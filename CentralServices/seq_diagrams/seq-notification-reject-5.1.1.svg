<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="832px" preserveAspectRatio="none" style="width:871px;height:832px;" version="1.1" viewBox="0 0 871 832" width="871.2px" zoomAndPan="magnify"><defs><filter height="300%" id="f1252wdv6zt3p7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.600000023841858"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="3.200000047683716" dy="3.200000047683716" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="11.2" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="235.2" x="319" y="18.8281">5.1.1. Notification Handler for Rejections</text><rect fill="#D3D3D3" height="796.125" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="148.8" x="3.2" y="27.5906"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="5.6" y="37.6453">Financial Service Providers</text><rect fill="#ADD8E6" height="796.125" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="192.8" x="224" y="27.5906"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125.6" x="257.6" y="37.6453">ML API Adapter Service</text><rect fill="#FFFFE0" height="796.125" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="239.2" x="618.8" y="27.5906"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80.8" x="698" y="37.6453">Central Service</text><rect fill="#FFFFFF" filter="url(#f1252wdv6zt3p7)" height="603.1141" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="316.4" y="131.0203"/><rect fill="#FFFFFF" filter="url(#f1252wdv6zt3p7)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="792" y="179.2688"/><rect fill="#FFFFFF" filter="url(#f1252wdv6zt3p7)" height="591.1141" style="stroke: #000000; stroke-width: 1.600000023841858;" width="820.8" x="42" y="136.6203"/><rect fill="#FFFFFF" filter="url(#f1252wdv6zt3p7)" height="506.3688" style="stroke: #000000; stroke-width: 1.600000023841858;" width="687.2" x="50" y="215.7656"/><rect fill="#FFFFFF" filter="url(#f1252wdv6zt3p7)" height="59.9453" style="stroke: #000000; stroke-width: 1.600000023841858;" width="456.4" x="219.2" y="235.2141"/><rect fill="#FFFFFF" height="148.3516" style="stroke: none; stroke-width: 0.800000011920929;" width="687.2" x="50" y="573.7828"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="77.2" x2="77.2" y1="123.0203" y2="741.3344"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="320" x2="320" y1="123.0203" y2="741.3344"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="675.6" x2="675.6" y1="123.0203" y2="741.3344"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 5.0,5.0;" x1="795.6" x2="795.6" y1="123.0203" y2="741.3344"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="34.4" x="58" y="107.4672">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="29.6" x="60.4" y="120.6578">Payer</text><ellipse cx="77.6" cy="51.0391" fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" rx="6.4" ry="6.4" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><path d="M77.6,57.4391 L77.6,79.0391 M67.2,63.8391 L88,63.8391 M77.6,79.0391 L67.2,91.0391 M77.6,79.0391 L88,91.0391 " fill="none" filter="url(#f1252wdv6zt3p7)" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="34.4" x="58" y="751.3625">DFSP1</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="29.6" x="60.4" y="764.5531">Payer</text><ellipse cx="77.6" cy="774.9156" fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" rx="6.4" ry="6.4" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><path d="M77.6,781.3156 L77.6,802.9156 M67.2,787.7156 L88,787.7156 M77.6,802.9156 L67.2,814.9156 M77.6,802.9156 L88,814.9156 " fill="none" filter="url(#f1252wdv6zt3p7)" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="181.6" x="227.2" y="120.6578">ML API Notification Event Handler</text><ellipse cx="320.4" cy="97.0297" fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><polygon fill="#A80036" points="317.2,87.4297,322,83.4297,320.4,87.4297,322,91.4297,317.2,87.4297" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="181.6" x="227.2" y="751.3625">ML API Notification Event Handler</text><ellipse cx="320.4" cy="766.525" fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><polygon fill="#A80036" points="317.2,756.925,322,752.925,320.4,756.925,322,760.925,317.2,756.925" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="102.4" x="622" y="120.6578">Central Service API</text><path d="M659.2,87.4297 L659.2,106.6297 M659.2,97.0297 L672.8,97.0297 " fill="none" filter="url(#f1252wdv6zt3p7)" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><ellipse cx="682.4" cy="97.0297" fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="102.4" x="622" y="751.3625">Central Service API</text><path d="M659.2,756.925 L659.2,776.125 M659.2,766.525 L672.8,766.525 " fill="none" filter="url(#f1252wdv6zt3p7)" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><ellipse cx="682.4" cy="766.525" fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" rx="9.6" ry="9.6" style="stroke: #A80036; stroke-width: 1.600000023841858;"/><rect fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="740.4" y="91.4297"/><rect fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="737.2" y="94.6297"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="100" x="742.8" y="111.0578">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="740.4" y="740.5344"/><rect fill="#FEFECE" filter="url(#f1252wdv6zt3p7)" height="24.3906" style="stroke: #A80036; stroke-width: 1.2000000178813934;" width="111.2" x="737.2" y="743.7344"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacingAndGlyphs" textLength="100" x="742.8" y="760.1625">Notification-Topic</text><rect fill="#FFFFFF" filter="url(#f1252wdv6zt3p7)" height="603.1141" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="316.4" y="131.0203"/><rect fill="#FFFFFF" filter="url(#f1252wdv6zt3p7)" height="24" style="stroke: #A80036; stroke-width: 0.800000011920929;" width="8" x="792" y="179.2688"/><path d="M42,136.6203 L215.6,136.6203 L215.6,142.2203 L207.6,150.2203 L42,150.2203 L42,136.6203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="591.1141" style="stroke: #000000; stroke-width: 1.600000023841858;" width="820.8" x="42" y="136.6203"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137.6" x="54" y="147.475">DFSP Notified of Rejection</text><polygon fill="#A80036" points="782.4,176.0688,790.4,179.2688,782.4,182.4688,785.6,179.2688" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="324.4" x2="787.2" y1="179.2688" y2="179.2688"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="330" y="169.8477">1</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="188" x="340.4" y="163.7234">Consume Notification event message</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="0" x="343.6" y="175.9719"/><text fill="#FF0000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58.4" x="343.6" y="175.9719">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="25.6" x="405.2" y="175.9719">2001</text><path d="M50,215.7656 L99.6,215.7656 L99.6,221.3656 L91.6,229.3656 L50,229.3656 L50,215.7656 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="506.3688" style="stroke: #000000; stroke-width: 1.600000023841858;" width="687.2" x="50" y="215.7656"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="13.6" x="62" y="226.6203">alt</text><path d="M219.2,235.2141 L332.8,235.2141 L332.8,240.8141 L324.8,248.8141 L219.2,248.8141 L219.2,235.2141 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.800000011920929;"/><rect fill="none" height="59.9453" style="stroke: #000000; stroke-width: 1.600000023841858;" width="456.4" x="219.2" y="235.2141"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77.6" x="231.2" y="246.0688">Validate Event</text><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="324.4" x2="358" y1="278.3594" y2="278.3594"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="358" x2="358" y1="278.3594" y2="288.7594"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="325.2" x2="358" y1="288.7594" y2="288.7594"/><polygon fill="#A80036" points="333.2,285.5594,325.2,288.7594,333.2,291.9594,330,288.7594" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="330" y="268.4414">2</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="322.4" x="340.4" y="262.3172">Validate event - Rule: type == 'notification' &amp;&amp; action =='reject'</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="0" x="343.6" y="274.5656"/><text fill="#FF0000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58.4" x="343.6" y="274.5656">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="25.6" x="405.2" y="274.5656">2001</text><polygon fill="#A80036" points="666,326.3594,674,329.5594,666,332.7594,669.2,329.5594" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929;" x1="324.4" x2="670.8" y1="329.5594" y2="329.5594"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="330" y="320.1383">3</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="180" x="340.4" y="314.0141">Request Participant Callback details</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="0" x="343.6" y="326.2625"/><text fill="#FF0000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58.4" x="343.6" y="326.2625">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="25.6" x="405.2" y="326.2625">3201</text><rect fill="#FFFFFF" filter="url(#f1252wdv6zt3p7)" height="32.4969" style="stroke: #000000; stroke-width: 1.600000023841858;" width="503.6" x="224.8" y="336.4563"/><polygon fill="#EEEEEE" points="224.8,336.4563,276,336.4563,276,342.0563,268,350.0563,224.8,350.0563,224.8,336.4563" style="stroke: #000000; stroke-width: 1.600000023841858;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15.2" x="235.2" y="348.1109">ref</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="193.6" x="381.4" y="363.3109">Get Participant Callback Details {3.1.0}</text><polygon fill="#A80036" points="333.2,386.5531,325.2,389.7531,333.2,392.9531,330,389.7531" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="328.4" x2="674.8" y1="389.7531" y2="389.7531"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="338" y="386.2078">4</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="172.8" x="348.4" y="386.2078">Return Participant Callback details</text><path d="M328,400.4016 L328,530.8016 L575.2,530.8016 L575.2,408.4016 L567.2,400.4016 L328,400.4016 " fill="#FFFF00" filter="url(#f1252wdv6zt3p7)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M567.2,400.4016 L567.2,408.4016 L575.2,408.4016 L567.2,400.4016 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="46.4" x="332.8" y="414.4563">Message:</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="332.8" y="426.7047">{</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="46.4" x="345.6" y="438.9531">id: &lt;ID&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="206.4" x="345.6" y="451.2016">from: &lt;transferHeaders.FSPIOP-Source&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="217.6" x="345.6" y="463.45">to: &lt;transferHeaders.FSPIOP-Destination&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="114.4" x="345.6" y="475.6984">type: application/json,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="48" x="345.6" y="487.9469">content: {</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="144" x="358.4" y="500.1953">payload: &lt;transferMessage&gt;</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="6.4" x="345.6" y="512.4438">},</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="332.8" y="524.6922">}</text><polygon fill="#A80036" points="86.4,563.6859,78.4,566.8859,86.4,570.0859,83.2,566.8859" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><line style="stroke: #A80036; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="81.6" x2="315.6" y1="566.8859" y2="566.8859"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7.2" x="91.2" y="557.4649">5</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="133.6" x="101.6" y="551.3406">Send Callback Notification</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="0" x="104.8" y="563.5891"/><text fill="#FF0000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58.4" x="104.8" y="563.5891">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="89.6" x="166.4" y="563.5891">1000, 1001, 3002</text><line style="stroke: #000000; stroke-width: 0.800000011920929; stroke-dasharray: 2.0,2.0;" x1="50" x2="737.2" y1="574.5828" y2="574.5828"/><text fill="#000000" font-family="sans-serif" font-size="8.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="54" y="583.0906">[Validate rule type != 'notification' / Error]</text><path d="M328,589.7469 L328,683.3469 L553.6,683.3469 L553.6,597.7469 L545.6,589.7469 L328,589.7469 " fill="#FFFF00" filter="url(#f1252wdv6zt3p7)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M545.6,589.7469 L545.6,597.7469 L553.6,597.7469 L545.6,589.7469 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="46.4" x="332.8" y="603.8016">Message:</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="332.8" y="616.05">{</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="100.8" x="345.6" y="628.2984">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="132.8" x="358.4" y="640.5469">"errorCode": &lt;errorCode&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="183.2" x="358.4" y="652.7953">"errorDescription": &lt;ErrorMessage&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="345.6" y="665.0438">}</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="3.2" x="332.8" y="677.2922">}</text><path d="M185.6,694.6859 L185.6,714.6859 L308.8,714.6859 L308.8,702.6859 L300.8,694.6859 L185.6,694.6859 " fill="#ADD8E6" filter="url(#f1252wdv6zt3p7)" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><path d="M300.8,694.6859 L300.8,702.6859 L308.8,702.6859 L300.8,694.6859 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 0.800000011920929;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacingAndGlyphs" textLength="106.4" x="190.4" y="708.7406">Log ERROR Messages</text><!--
@startuml
title 5.1.1. Notification Handler for Rejections

autonumber


actor "DFSP1\nPayer" as DFSP1
control "ML API Notification Event Handler" as NOTIFY_HANDLER
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS

box "Financial Service Providers" #lightGray
	participant DFSP1
end box

box "ML API Adapter Service" #LightBlue
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant CSAPI
    participant TOPIC_NOTIFICATIONS
end box

activate NOTIFY_HANDLER

group DFSP Notified of Rejection
    NOTIFY_HANDLER -> TOPIC_NOTIFICATIONS: Consume Notification event message \n <color #FF0000><b>Error code:</b> 2001 </color>
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS
    alt
        group Validate Event
            NOTIFY_HANDLER <-> NOTIFY_HANDLER: Validate event - Rule: type == 'notification' && action =='reject' \n <color #FF0000><b>Error code:</b> 2001 </color>
        end
        NOTIFY_HANDLER -> CSAPI: Request Participant Callback details \n <color #FF0000><b>Error code:</b> 3201 </color>
        ref over NOTIFY_HANDLER, CSAPI: Get Participant Callback Details {3.1.0}
        NOTIFY_HANDLER <- - CSAPI: Return Participant Callback details
        note right of NOTIFY_HANDLER #yellow
            Message:
            {
                id: <ID>,
                from: <transferHeaders.FSPIOP-Source>,
                to: <transferHeaders.FSPIOP-Destination>,
                type: application/json,
                content: {
                    payload: <transferMessage>
                },
            }
        end note

        NOTIFY_HANDLER - -> DFSP1: Send Callback Notification \n <color #FF0000><b>Error code:</b> 1000, 1001, 3002 </color>
    else Validate rule type != 'notification' / Error
        note right of NOTIFY_HANDLER #yellow
            Message:
            {
                "errorInformation": {
                    "errorCode": <errorCode>,
                    "errorDescription": <ErrorMessage>,
                }
            }
        end note

        note left of NOTIFY_HANDLER #lightblue
            Log ERROR Messages
        end note
    end
end
deactivate TOPIC_NOTIFICATIONS

@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b29
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>