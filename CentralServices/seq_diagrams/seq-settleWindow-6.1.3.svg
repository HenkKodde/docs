<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="861.6px" preserveAspectRatio="none" style="width:859px;height:861px;" version="1.1" viewBox="0 0 859 861" width="859.2px" zoomAndPan="magnify"><defs><filter height="300%" id="fe6cpb5mpe5ne" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185.4" x="337.5" y="14.1211">Request settlementWindow by parameters.</text><rect fill="#FFB6C1" height="834.3797" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="67.2" x="129.6" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="138.9" y="28.234">Central HUB</text><rect fill="#90EE90" height="834.3797" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="245.1" x="277.5" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="362.85" y="28.234">Settlement Service</text><rect fill="#FFFFE0" height="834.3797" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="68.4" x="584.4" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="586.2" y="28.234">Central Services</text><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="695.4211" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="160.2" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="445.2668" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="175.8902"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="136.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="647.7164"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="454.2399" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="483" y="193.4766"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="254.2582" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="615.6" y="220.0629"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="700.4074" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="844.8" x="7.8" y="92.5723"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="305.2723" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="512.4" x="13.8" y="483.5074"/><rect fill="#FFFFFF" height="162.6363" style="stroke: none; stroke-width: 0.6000000238418579;" width="512.4" x="13.8" y="626.1434"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="163.2" x2="163.2" y1="82.3723" y2="803.1797"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="326.7" x2="326.7" y1="82.3723" y2="803.1797"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="486" x2="486" y1="82.3723" y2="803.1797"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="618.6" x2="618.6" y1="82.3723" y2="803.1797"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="132" y="80.6004">Hub Employee</text><ellipse cx="163.2" cy="38.2793" fill="#FEFECE" filter="url(#fe6cpb5mpe5ne)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M163.2,43.0793 L163.2,59.2793 M155.4,47.8793 L171,47.8793 M163.2,59.2793 L155.4,68.2793 M163.2,59.2793 L171,68.2793 " fill="none" filter="url(#fe6cpb5mpe5ne)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="132" y="810.7008">Hub Employee</text><ellipse cx="163.2" cy="818.4727" fill="#FEFECE" filter="url(#fe6cpb5mpe5ne)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M163.2,823.2727 L163.2,839.4727 M155.4,828.0727 L171,828.0727 M163.2,839.4727 L155.4,848.4727 M163.2,839.4727 L171,848.4727 " fill="none" filter="url(#fe6cpb5mpe5ne)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="80.6004">Settlement Service API</text><path d="M314.7,55.6793 L314.7,70.0793 M314.7,62.8793 L324.9,62.8793 " fill="none" filter="url(#fe6cpb5mpe5ne)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="62.8793" fill="#FEFECE" filter="url(#fe6cpb5mpe5ne)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="810.7008">Settlement Service API</text><path d="M314.7,814.8727 L314.7,829.2727 M314.7,822.0727 L324.9,822.0727 " fill="none" filter="url(#fe6cpb5mpe5ne)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="822.0727" fill="#FEFECE" filter="url(#fe6cpb5mpe5ne)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="451.8" y="80.6004">Settlement DAO</text><ellipse cx="486" cy="62.8793" fill="#FEFECE" filter="url(#fe6cpb5mpe5ne)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="478.8" x2="493.2" y1="71.2793" y2="71.2793"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="451.8" y="810.7008">Settlement DAO</text><ellipse cx="486" cy="822.0727" fill="#FEFECE" filter="url(#fe6cpb5mpe5ne)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="478.8" x2="493.2" y1="830.4727" y2="830.4727"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="589.8" y="80.6004">Central Store</text><path d="M607.8,50.8793 C607.8,44.8793 618.6,44.8793 618.6,44.8793 C618.6,44.8793 629.4,44.8793 629.4,50.8793 L629.4,66.4793 C629.4,72.4793 618.6,72.4793 618.6,72.4793 C618.6,72.4793 607.8,72.4793 607.8,66.4793 L607.8,50.8793 " fill="#FEFECE" filter="url(#fe6cpb5mpe5ne)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M607.8,50.8793 C607.8,56.8793 618.6,56.8793 618.6,56.8793 C618.6,56.8793 629.4,56.8793 629.4,50.8793 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="589.8" y="810.7008">Central Store</text><path d="M607.8,818.4727 C607.8,812.4727 618.6,812.4727 618.6,812.4727 C618.6,812.4727 629.4,812.4727 629.4,818.4727 L629.4,834.0727 C629.4,840.0727 618.6,840.0727 618.6,840.0727 C618.6,840.0727 607.8,840.0727 607.8,834.0727 L607.8,818.4727 " fill="#FEFECE" filter="url(#fe6cpb5mpe5ne)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M607.8,818.4727 C607.8,824.4727 618.6,824.4727 618.6,824.4727 C618.6,824.4727 629.4,824.4727 629.4,818.4727 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="695.4211" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="160.2" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="445.2668" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="175.8902"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="136.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="647.7164"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="454.2399" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="483" y="193.4766"/><rect fill="#FFFFFF" filter="url(#fe6cpb5mpe5ne)" height="254.2582" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="615.6" y="220.0629"/><path d="M7.8,92.5723 L257.4,92.5723 L257.4,96.7723 L251.4,102.7723 L7.8,102.7723 L7.8,92.5723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="700.4074" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="844.8" x="7.8" y="92.5723"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222.6" x="16.8" y="100.7133">Retrieve SettlementWindow properties per parameters.</text><path d="M169.2,105.9586 L169.2,157.5586 L333.6,157.5586 L333.6,111.9586 L327.6,105.9586 L169.2,105.9586 " fill="#FFFF00" filter="url(#fe6cpb5mpe5ne)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M327.6,105.9586 L327.6,111.9586 L333.6,111.9586 L327.6,105.9586 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="172.8" y="116.4996">Filtering Params:</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="71.4" x="172.8" y="125.6859">&amp;participantId={id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="172.8" y="134.8723">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="151.8" x="172.8" y="144.0586">&amp;fromDateTime={yyyy-mm-ddThh:mm}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141.6" x="172.8" y="153.2449">&amp;toDateTime={yyyy-mm-ddThh:mm}</text><polygon fill="#A80036" points="316.8,173.4902,322.8,175.8902,316.8,178.2902,319.2,175.8902" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="166.2" x2="320.4" y1="175.8902" y2="175.8902"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="170.4" y="173.2313">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="138.6" x="178.2" y="173.2313">GET - /settlementWindows/{params}</text><polygon fill="#A80036" points="475.8,191.0766,481.8,193.4766,475.8,195.8766,478.2,193.4766" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="479.4" y1="193.4766" y2="193.4766"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="190.8176">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="102" x="342" y="190.8176">Request settlementWindow</text><polygon fill="#A80036" points="608.4,217.6629,614.4,220.0629,608.4,222.4629,610.8,220.0629" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="489" x2="612" y1="220.0629" y2="220.0629"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="493.2" y="212.9971">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="102" x="501" y="208.4039">Request settlementWindow</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="501" y="217.5902">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="547.2" y="217.5902">2001</text><polygon fill="#FFFFE0" filter="url(#fe6cpb5mpe5ne)" points="559.2,228.2356,678,228.2356,684,257.6356,678,287.6356,559.2,287.6356,553.2,257.6356,559.2,228.2356" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="560.4" y="238.1766">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="116.4" x="560.4" y="247.3629">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="560.4" y="256.5492">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="560.4" y="265.7356">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="560.4" y="274.9219">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="562.8" y="284.1082"/><path d="M390,294.1535 L390,456.1535 L844.2,456.1535 L844.2,300.1535 L838.2,294.1535 L390,294.1535 " fill="#D3D3D3" filter="url(#fe6cpb5mpe5ne)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M838.2,294.1535 L838.2,300.1535 L844.2,300.1535 L838.2,294.1535 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="148.2" x="393.6" y="304.6945">NOTES for constructing database query</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="396" y="313.8809"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.8" x="393.6" y="323.0672">settlementWindow -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="478.8" y="323.0672">(createdDate)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="403.2" y="332.2535"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57.6" x="403.2" y="332.2535">Optional Filter</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="247.2" x="403.2" y="341.4399">{createdDate &lt;= &amp;fromDateTime &amp; createdDate &gt;= &amp;toDateTime}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="396" y="350.6262"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="237" x="393.6" y="359.8125">settlementWindowStateChange -&gt; (use settlementWindowId to</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102.6" x="633" y="359.8125">settlementWindowStateId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="738" y="359.8125">&amp;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49.2" x="745.8" y="359.8125">createdDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="797.4" y="359.8125">&amp;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="805.2" y="359.8125">reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="832.8" y="359.8125">)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="202.8" x="393.6" y="368.9988">NOTE - settlementWindowStateChange.createdDate =</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="598.8" y="368.9988">changedDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="403.2" y="378.1852"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.2" x="403.2" y="378.1852">Filter on &amp;state</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="205.2" x="466.8" y="378.1852">(note valid is 'OPEN' 'CLOSE' as per Swagger definition)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="92.4" x="403.2" y="387.3715">(state) = {&amp;state={state}}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="396" y="396.5578"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73.2" x="393.6" y="405.7442">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="196.8" x="471.6" y="405.7442">-&gt; (use settlementWindowId = {id} to get transferId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76.2" x="393.6" y="414.9305">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="226.2" x="472.2" y="414.9305">-&gt; (use transferId = transferId to get participantCurrencyId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="393.6" y="424.1168">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="190.2" x="477.6" y="424.1168">-&gt; (use participantCurrencyId to get participantId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="403.2" y="433.3031"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93.6" x="403.2" y="433.3031">Filter on &amp;participantId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="139.8" x="393.6" y="442.4895">(participantId) = {&amp;participantId={id}}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="396" y="451.6758"/><polygon fill="#A80036" points="495.6,471.9211,489.6,474.3211,495.6,476.7211,493.2,474.3211" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="492" x2="618" y1="474.3211" y2="474.3211"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="499.2" y="471.6621">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="507" y="471.6621">Return result</text><path d="M13.8,483.5074 L51,483.5074 L51,487.7074 L45,493.7074 L13.8,493.7074 L13.8,483.5074 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="305.2723" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="512.4" x="13.8" y="483.5074"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="22.8" y="491.6485">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="60" y="491.0883">[Return settlementWindow(s)]</text><polygon fill="#A80036" points="336.6,504.0938,330.6,506.4938,336.6,508.8938,334.2,506.4938" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="482.4" y1="506.4938" y2="506.4938"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="503.8348">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="100.8" x="348" y="503.8348">Successful - return results</text><path d="M208.2,514.4801 L208.2,602.6801 L318.6,602.6801 L318.6,520.4801 L312.6,514.4801 L208.2,514.4801 " fill="#FFFF00" filter="url(#fe6cpb5mpe5ne)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,514.4801 L312.6,520.4801 L318.6,520.4801 L312.6,514.4801 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="211.8" y="525.0211">[</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="216.6" y="534.2074">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="221.4" y="543.3938">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="221.4" y="552.5801">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="221.4" y="561.7664">"state": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="221.4" y="570.9528">"createdDate": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="221.4" y="580.1391">"changedDate": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="216.6" y="589.3254">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="211.8" y="598.5117">]</text><polygon fill="#A80036" points="172.8,618.7571,166.8,621.1571,172.8,623.5571,170.4,621.1571" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="169.2" x2="326.4" y1="621.1571" y2="621.1571"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="176.4" y="618.4981">6</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="184.2" y="618.4981">Return results</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="13.8" x2="526.2" y1="626.7434" y2="626.7434"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="16.8" y="633.1242">[</text><text fill="#FF0000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96.6" x="19.2" y="633.1242">settlementWindow not found</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="115.8" y="633.1242">]</text><polygon fill="#A80036" points="336.6,645.3164,330.6,647.7164,336.6,650.1164,334.2,647.7164" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="485.4" y1="647.7164" y2="647.7164"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="645.0574">7</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="133.8" x="348" y="645.0574">Unsuccessful result - return ERROR</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="355.2" y1="665.4891" y2="665.4891"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="355.2" x2="355.2" y1="665.4891" y2="673.2891"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330.6" x2="355.2" y1="673.2891" y2="673.2891"/><polygon fill="#A80036" points="336.6,670.8891,330.6,673.2891,336.6,675.6891,334.2,673.2891" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="662.6438">8</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="63.6" x="342" y="662.6438">Update Event log</text><path d="M333,681.0891 L333,705.0891 L457.2,705.0891 L457.2,687.0891 L451.2,681.0891 L333,681.0891 " fill="#ADD8E6" filter="url(#fe6cpb5mpe5ne)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M451.2,681.0891 L451.2,687.0891 L457.2,687.0891 L451.2,681.0891 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.2" x="336.6" y="691.6301">Log ERROR Messages.</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="111.6" x="336.6" y="700.8164">Update Event log with ERROR.</text><path d="M19.8,713.8617 L19.8,765.4617 L318.6,765.4617 L318.6,719.8617 L312.6,713.8617 L19.8,713.8617 " fill="#FFFF00" filter="url(#fe6cpb5mpe5ne)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,713.8617 L312.6,719.8617 L318.6,719.8617 L312.6,713.8617 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="724.4028">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="41.4" x="28.2" y="733.5891">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="281.4" x="28.2" y="742.7754">"code": "(ERROR response code eg. '404' - Defined in swagger definition))",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="72" x="28.2" y="751.9617">"message": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="761.1481">}</text><polygon fill="#A80036" points="169.8,781.3934,163.8,783.7934,169.8,786.1934,167.4,783.7934" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="166.2" x2="326.4" y1="783.7934" y2="783.7934"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="173.4" y="781.1344">9</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="51.6" x="181.2" y="781.1344">Return ERROR</text><!--
@startuml
title Request settlementWindow by parameters.

autonumber

actor "Hub Employee" as OPERATOR

boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO

database "Central Store" as DB

box "Central HUB" #LightPink
    participant OPERATOR
end box

box "Settlement Service" #LightGreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #LightYellow
    participant DB
end box


group Retrieve SettlementWindow properties per parameters.
    activate OPERATOR
    note right of OPERATOR #Yellow
        **Filtering Params:**
        &participantId={id}
        &state={state}
        &fromDateTime={yyyy-mm-ddThh:mm}
        &toDateTime={yyyy-mm-ddThh:mm}
    end note
    OPERATOR -> SSAPI: GET - /settlementWindows/{params}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Request settlementWindow \n<color #FF0000><b>Error code:</b> 2001</color>
    activate DB
    hnote over DB #LightYellow
        settlementWindow
        settlementWindowStateChange
        transferFulfilment
        transferParticipant
        participantCurrency

    end hnote
    note over DB #LightGray
        NOTES for constructing database query

        settlementWindow -> **(createdDate)**
            **Optional Filter**
            {createdDate <= &fromDateTime & createdDate >= &toDateTime}

        settlementWindowStateChange -> (use settlementWindowId to **settlementWindowStateId** & **createdDate** & **reason**)
        NOTE - settlementWindowStateChange.createdDate = **changedDate**
            **Filter on &state** (note valid is 'OPEN' 'CLOSE' as per Swagger definition)
            (state) = {&state={state}}

        **transferFulfilment**  -> (use settlementWindowId = {id} to get transferId)
        **transferParticipant** -> (use transferId = transferId to get participantCurrencyId)
        **participantCurrency** -> (use participantCurrencyId to get participantId)
            **Filter on &participantId**
        (participantId) = {&participantId={id}}

    end note
    SETTLE_DAO <- - DB: Return result
    deactivate DB
    alt Return settlementWindow(s)
        SSAPI <- - SETTLE_DAO: Successful - return results
        note left of SSAPI #Yellow
          [
            {
              "id": 0,
              "reason": "string",
              "state": "string",
              "createdDate": "string",
              "changedDate": "string"
            }
          ]
        end note
        OPERATOR <- - SSAPI: Return results
        deactivate SSAPI
    else <color #FF0000><b>settlementWindow not found</b></color>
        SSAPI <- - SETTLE_DAO: Unsuccessful result - return ERROR
        deactivate SETTLE_DAO
        activate SSAPI
        SSAPI -> SSAPI: Update Event log
        note right of SSAPI #LightBlue
            Log ERROR Messages.
            Update Event log with ERROR.
        end note
        note left of SSAPI #Yellow
            {
              "status": 0,
              "code": "(ERROR response code eg. '404' - Defined in swagger definition))",
              "message": "string"
            }
        end note
        OPERATOR <- - SSAPI: Return ERROR
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b29
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>