<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1349px" preserveAspectRatio="none" style="width:1188px;height:1349px;" version="1.1" viewBox="0 0 1188 1349" width="1188px" zoomAndPan="magnify"><defs><filter height="300%" id="fgzkxqtnqhn9e" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="410" x="390" y="23.5352">6.1.3. Request Settlement Window(s) as per parameter(s).</text><rect fill="#FFB6C1" height="1304.3906" style="stroke: #A80036; stroke-width: 1.0;" width="112" x="29" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="44.5" y="47.0566">Central HUB</text><rect fill="#90EE90" height="1304.3906" style="stroke: #A80036; stroke-width: 1.0;" width="355.5" x="275.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="391.25" y="47.0566">Settlement Service</text><rect fill="#FFFFE0" height="1304.3906" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="730" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="733" y="47.0566">Central Services</text><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="1073.1035" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="80" y="147.2871"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="926.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="353" y="293.4609"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="482.7637" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="565" y="338.082"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="782" y="367.3926"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="1081.1035" style="stroke: #000000; stroke-width: 2.0;" width="1164" x="13" y="154.2871"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="392.5449" style="stroke: #000000; stroke-width: 2.0;" width="486" x="23" y="835.8457"/><rect fill="#FFFFFF" height="184.1289" style="stroke: none; stroke-width: 1.0;" width="486" x="23" y="1044.2617"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="85" x2="85" y1="137.2871" y2="1252.3906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="357.5" x2="357.5" y1="137.2871" y2="1252.3906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="570" x2="570" y1="137.2871" y2="1252.3906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="787" x2="787" y1="137.2871" y2="1252.3906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="33" y="134.334">Hub Employee</text><ellipse cx="85" cy="63.7988" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M85,71.7988 L85,98.7988 M72,79.7988 L98,79.7988 M85,98.7988 L72,113.7988 M85,98.7988 L98,113.7988 " fill="none" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="33" y="1264.9258">Hub Employee</text><ellipse cx="85" cy="1277.8789" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M85,1285.8789 L85,1312.8789 M72,1293.8789 L98,1293.8789 M85,1312.8789 L72,1327.8789 M85,1312.8789 L98,1327.8789 " fill="none" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="279.5" y="134.334">Settlement Service API</text><path d="M337.5,92.7988 L337.5,116.7988 M337.5,104.7988 L354.5,104.7988 " fill="none" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="366.5" cy="104.7988" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="279.5" y="1264.9258">Settlement Service API</text><path d="M337.5,1271.8789 L337.5,1295.8789 M337.5,1283.8789 L354.5,1283.8789 " fill="none" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="366.5" cy="1283.8789" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="513" y="134.334">Settlement DAO</text><ellipse cx="570" cy="104.7988" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="558" x2="582" y1="118.7988" y2="118.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="513" y="1264.9258">Settlement DAO</text><ellipse cx="570" cy="1283.8789" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="558" x2="582" y1="1297.8789" y2="1297.8789"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="739" y="134.334">Central Store</text><path d="M769,84.7988 C769,74.7988 787,74.7988 787,74.7988 C787,74.7988 805,74.7988 805,84.7988 L805,110.7988 C805,120.7988 787,120.7988 787,120.7988 C787,120.7988 769,120.7988 769,110.7988 L769,84.7988 " fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M769,84.7988 C769,94.7988 787,94.7988 787,94.7988 C787,94.7988 805,94.7988 805,84.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="739" y="1264.9258">Central Store</text><path d="M769,1277.8789 C769,1267.8789 787,1267.8789 787,1267.8789 C787,1267.8789 805,1267.8789 805,1277.8789 L805,1303.8789 C805,1313.8789 787,1313.8789 787,1313.8789 C787,1313.8789 769,1313.8789 769,1303.8789 L769,1277.8789 " fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M769,1277.8789 C769,1287.8789 787,1287.8789 787,1287.8789 C787,1287.8789 805,1287.8789 805,1277.8789 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="1073.1035" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="80" y="147.2871"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="926.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="353" y="293.4609"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="482.7637" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="565" y="338.082"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="782" y="367.3926"/><path d="M13,154.2871 L355,154.2871 L355,161.2871 L345,171.2871 L13,171.2871 L13,154.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1081.1035" style="stroke: #000000; stroke-width: 2.0;" width="1164" x="13" y="154.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="297" x="28" y="167.8555">Retrieve SettlementWindow per parameters.</text><path d="M95,176.5977 L95,262.5977 L369,262.5977 L369,186.5977 L359,176.5977 L95,176.5977 " fill="#FFFF00" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M359,176.5977 L359,186.5977 L369,186.5977 L359,176.5977 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="113" x="101" y="194.166">Filtering Params:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="101" y="209.4766">&amp;participantId={id}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="101" y="224.7871">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="101" y="240.0977">&amp;fromDateTime={yyyy-mm-ddThh:mm}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="101" y="255.4082">&amp;toDateTime={yyyy-mm-ddThh:mm}</text><polygon fill="#A80036" points="341,289.4609,351,293.4609,341,297.4609,345,293.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90" x2="347" y1="293.4609" y2="293.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="97" y="288.7188">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="231" x="110" y="288.7188">GET - /settlementWindows/{params}</text><polygon fill="#A80036" points="553,334.082,563,338.082,553,342.082,557,338.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="363" x2="559" y1="338.082" y2="338.082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="370" y="325.6846">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="383" y="318.0293">Request settlementWindow</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="383" y="333.3398">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="460" y="333.3398">2001</text><polygon fill="#A80036" points="770,363.3926,780,367.3926,770,371.3926,774,367.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="575" x2="776" y1="367.3926" y2="367.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="582" y="362.6504">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="595" y="362.6504">Request settlementWindow</text><polygon fill="#FFFFE0" filter="url(#fgzkxqtnqhn9e)" points="688,410.3926,886,410.3926,896,459.3926,886,509.3926,688,509.3926,678,459.3926,688,410.3926" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="690" y="426.9609">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="690" y="442.2715">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="690" y="457.582">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="690" y="472.8926">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="690" y="488.2031">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="694" y="503.5137"/><path d="M406,520.2559 L406,790.2559 L1163,790.2559 L1163,530.2559 L1153,520.2559 L406,520.2559 " fill="#D3D3D3" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1153,520.2559 L1153,530.2559 L1163,530.2559 L1153,520.2559 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="412" y="537.8242">NOTES for constructing database query</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="416" y="553.1348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="412" y="568.4453">settlementWindow -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="554" y="568.4453">(createdDate)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="428" y="583.7559"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="428" y="583.7559">Optional Filter</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="412" x="428" y="599.0664">{createdDate &lt;= &amp;fromDateTime &amp; createdDate &gt;= &amp;toDateTime}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="416" y="614.377"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="395" x="412" y="629.6875">settlementWindowStateChange -&gt; (use settlementWindowId to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="811" y="629.6875">settlementWindowStateId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="9" x="986" y="629.6875">&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="999" y="629.6875">createdDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="9" x="1085" y="629.6875">&amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1098" y="629.6875">reason</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1144" y="629.6875">)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="338" x="412" y="644.998">NOTE - settlementWindowStateChange.createdDate =</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="754" y="644.998">changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="428" y="660.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="428" y="660.3086">Filter on &amp;state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342" x="534" y="660.3086">(note valid is 'OPEN' 'CLOSE' as per Swagger definition)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="428" y="675.6191">(state) = {&amp;state={state}}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="416" y="690.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="412" y="706.2402">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="542" y="706.2402">-&gt; (use settlementWindowId = {id} to get transferId)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="412" y="721.5508">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="377" x="543" y="721.5508">-&gt; (use transferId = transferId to get participantCurrencyId)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="412" y="736.8613">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="317" x="552" y="736.8613">-&gt; (use participantCurrencyId to get participantId)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="428" y="752.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="428" y="752.1719">Filter on &amp;participantId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="412" y="767.4824">(participantId) = {&amp;participantId={id}}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="416" y="782.793"/><polygon fill="#A80036" points="374,816.8457,364,820.8457,374,824.8457,370,820.8457" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="368" x2="569" y1="820.8457" y2="820.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="380" y="816.1035">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="393" y="816.1035">Return result</text><path d="M23,835.8457 L85,835.8457 L85,842.8457 L75,852.8457 L23,852.8457 L23,835.8457 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="392.5449" style="stroke: #000000; stroke-width: 2.0;" width="486" x="23" y="835.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="849.4141">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="100" y="848.4805">[Return Settlement Window]</text><path d="M160,858.1563 L160,1005.1563 L344,1005.1563 L344,868.1563 L334,858.1563 L160,858.1563 " fill="#FFFF00" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M334,858.1563 L334,868.1563 L344,868.1563 L334,858.1563 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="166" y="875.7246">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="174" y="891.0352">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="182" y="906.3457">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="182" y="921.6563">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="182" y="936.9668">"state": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="182" y="952.2773">"createdDate": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="182" y="967.5879">"changedDate": "string"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="174" y="982.8984">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="166" y="998.209">]</text><polygon fill="#A80036" points="101,1032.2617,91,1036.2617,101,1040.2617,97,1036.2617" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="95" x2="352" y1="1036.2617" y2="1036.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="107" y="1031.5195">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="120" y="1031.5195">Respond HTTP -</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="227" y="1031.5195">200 (OK)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="509" y1="1045.2617" y2="1045.2617"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="28" y="1055.8965">[Settlement Window not found]</text><path d="M368,1064.2168 L368,1089.2168 L495,1089.2168 L495,1074.2168 L485,1064.2168 L368,1064.2168 " fill="#D3D3D3" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M485,1064.2168 L485,1074.2168 L495,1074.2168 L485,1064.2168 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="374" y="1081.7852">Log ERROR event</text><path d="M177,1103.5273 L177,1189.5273 L344,1189.5273 L344,1113.5273 L334,1103.5273 L177,1103.5273 " fill="#FFFF00" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M334,1103.5273 L334,1113.5273 L344,1113.5273 L334,1103.5273 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="183" y="1121.0957">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="199" y="1136.4063">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="199" y="1151.7168">"code": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="199" y="1167.0273">"message": &lt;string&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="183" y="1182.3379">}</text><polygon fill="#A80036" points="96,1216.3906,86,1220.3906,96,1224.3906,92,1220.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="90" x2="357" y1="1220.3906" y2="1220.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="102" y="1215.6484">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="115" y="1215.6484">Respond HTTP -</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="222" y="1215.6484">4xx (Client error)</text><!--
@startuml
title 6.1.3. Request Settlement Window(s) as per parameter(s).

autonumber


actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #LightPink
    participant OPERATOR
end box

box "Settlement Service" #LightGreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #LightYellow
    participant DB
end box


group Retrieve SettlementWindow per parameters.
    activate OPERATOR
    note right of OPERATOR #Yellow
        **Filtering Params:**
        &participantId={id}
        &state={state}
        &fromDateTime={yyyy-mm-ddThh:mm}
        &toDateTime={yyyy-mm-ddThh:mm}
    end note
    OPERATOR -> SSAPI: GET - /settlementWindows/{params}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Request settlementWindow
    activate DB
    hnote over DB #LightYellow
        settlementWindow
        settlementWindowStateChange
        transferFulfilment
        transferParticipant
        participantCurrency

    end hnote
    note over DB #LightGray
        NOTES for constructing database query

        settlementWindow -> **(createdDate)**
            **Optional Filter**
            {createdDate <= &fromDateTime & createdDate >= &toDateTime}

        settlementWindowStateChange -> (use settlementWindowId to **settlementWindowStateId** & **createdDate** & **reason**)
        NOTE - settlementWindowStateChange.createdDate = **changedDate**
            **Filter on &state** (note valid is 'OPEN' 'CLOSE' as per Swagger definition)
            (state) = {&state={state}}

        **transferFulfilment**  -> (use settlementWindowId = {id} to get transferId)
        **transferParticipant** -> (use transferId = transferId to get participantCurrencyId)
        **participantCurrency** -> (use participantCurrencyId to get participantId)
            **Filter on &participantId**
        (participantId) = {&participantId={id}}

    end note
    hnote over DB #LightYellow
    end hnote
    deactivate DB
    SSAPI <- - SETTLE_DAO: Return result
    deactivate SETTLE_DAO
    alt Return Settlement Window
        note left of SSAPI #Yellow
          [
            {
              "id": 0,
              "reason": "string",
              "state": "string",
              "createdDate": "string",
              "changedDate": "string"
            }
          ]
        end note
        OPERATOR <- - SSAPI: Respond HTTP - <color #FF0000>200 (OK)</color>
    else Settlement Window not found
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                "status": 0,
                "code": <integer>,
                "message": <string>
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - <color #FF0000>4xx (Client error)</color>
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>