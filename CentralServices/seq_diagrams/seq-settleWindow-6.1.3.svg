<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="806.4px" preserveAspectRatio="none" style="width:786px;height:806px;" version="1.1" viewBox="0 0 786 806" width="786px" zoomAndPan="magnify"><defs><filter height="300%" id="fenla84xom8qn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185.4" x="300.9" y="14.1211">Request settlementWindow by parameters.</text><rect fill="#FFB6C1" height="779.2617" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="67.2" x="129.6" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="138.9" y="28.234">Central HUB</text><rect fill="#90EE90" height="779.2617" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="245.1" x="277.5" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="362.85" y="28.234">Settlement Service</text><rect fill="#FFFFE0" height="779.2617" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="68.4" x="584.4" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="586.2" y="28.234">Central Services</text><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="640.3032" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="160.2" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="390.1488" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="175.8902"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="136.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="592.5985"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="399.1219" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="483" y="193.4766"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="199.1402" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="615.6" y="220.0629"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="645.2895" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="771.6" x="7.8" y="92.5723"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="305.2723" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="512.4" x="13.8" y="428.3895"/><rect fill="#FFFFFF" height="162.6363" style="stroke: none; stroke-width: 0.6000000238418579;" width="512.4" x="13.8" y="571.0254"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="163.2" x2="163.2" y1="82.3723" y2="748.0617"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="326.7" x2="326.7" y1="82.3723" y2="748.0617"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="486" x2="486" y1="82.3723" y2="748.0617"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="618.6" x2="618.6" y1="82.3723" y2="748.0617"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="132" y="80.6004">Hub Employee</text><ellipse cx="163.2" cy="38.2793" fill="#FEFECE" filter="url(#fenla84xom8qn)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M163.2,43.0793 L163.2,59.2793 M155.4,47.8793 L171,47.8793 M163.2,59.2793 L155.4,68.2793 M163.2,59.2793 L171,68.2793 " fill="none" filter="url(#fenla84xom8qn)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="132" y="755.5828">Hub Employee</text><ellipse cx="163.2" cy="763.3547" fill="#FEFECE" filter="url(#fenla84xom8qn)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M163.2,768.1547 L163.2,784.3547 M155.4,772.9547 L171,772.9547 M163.2,784.3547 L155.4,793.3547 M163.2,784.3547 L171,793.3547 " fill="none" filter="url(#fenla84xom8qn)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="80.6004">Settlement Service API</text><path d="M314.7,55.6793 L314.7,70.0793 M314.7,62.8793 L324.9,62.8793 " fill="none" filter="url(#fenla84xom8qn)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="62.8793" fill="#FEFECE" filter="url(#fenla84xom8qn)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="755.5828">Settlement Service API</text><path d="M314.7,759.7547 L314.7,774.1547 M314.7,766.9547 L324.9,766.9547 " fill="none" filter="url(#fenla84xom8qn)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="766.9547" fill="#FEFECE" filter="url(#fenla84xom8qn)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="451.8" y="80.6004">Settlement DAO</text><ellipse cx="486" cy="62.8793" fill="#FEFECE" filter="url(#fenla84xom8qn)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="478.8" x2="493.2" y1="71.2793" y2="71.2793"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="451.8" y="755.5828">Settlement DAO</text><ellipse cx="486" cy="766.9547" fill="#FEFECE" filter="url(#fenla84xom8qn)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="478.8" x2="493.2" y1="775.3547" y2="775.3547"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="589.8" y="80.6004">Central Store</text><path d="M607.8,50.8793 C607.8,44.8793 618.6,44.8793 618.6,44.8793 C618.6,44.8793 629.4,44.8793 629.4,50.8793 L629.4,66.4793 C629.4,72.4793 618.6,72.4793 618.6,72.4793 C618.6,72.4793 607.8,72.4793 607.8,66.4793 L607.8,50.8793 " fill="#FEFECE" filter="url(#fenla84xom8qn)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M607.8,50.8793 C607.8,56.8793 618.6,56.8793 618.6,56.8793 C618.6,56.8793 629.4,56.8793 629.4,50.8793 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="589.8" y="755.5828">Central Store</text><path d="M607.8,763.3547 C607.8,757.3547 618.6,757.3547 618.6,757.3547 C618.6,757.3547 629.4,757.3547 629.4,763.3547 L629.4,778.9547 C629.4,784.9547 618.6,784.9547 618.6,784.9547 C618.6,784.9547 607.8,784.9547 607.8,778.9547 L607.8,763.3547 " fill="#FEFECE" filter="url(#fenla84xom8qn)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M607.8,763.3547 C607.8,769.3547 618.6,769.3547 618.6,769.3547 C618.6,769.3547 629.4,769.3547 629.4,763.3547 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="640.3032" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="160.2" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="390.1488" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="175.8902"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="136.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="592.5985"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="399.1219" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="483" y="193.4766"/><rect fill="#FFFFFF" filter="url(#fenla84xom8qn)" height="199.1402" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="615.6" y="220.0629"/><path d="M7.8,92.5723 L257.4,92.5723 L257.4,96.7723 L251.4,102.7723 L7.8,102.7723 L7.8,92.5723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="645.2895" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="771.6" x="7.8" y="92.5723"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222.6" x="16.8" y="100.7133">Retrieve SettlementWindow properties per parameters.</text><path d="M169.2,105.9586 L169.2,157.5586 L333.6,157.5586 L333.6,111.9586 L327.6,105.9586 L169.2,105.9586 " fill="#FFFF00" filter="url(#fenla84xom8qn)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M327.6,105.9586 L327.6,111.9586 L333.6,111.9586 L327.6,105.9586 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="172.8" y="116.4996">Filtering Params:</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="71.4" x="172.8" y="125.6859">&amp;participantId={id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="172.8" y="134.8723">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="151.8" x="172.8" y="144.0586">&amp;fromDateTime={yyyy-mm-ddThh:mm}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141.6" x="172.8" y="153.2449">&amp;toDateTime={yyyy-mm-ddThh:mm}</text><polygon fill="#A80036" points="316.8,173.4902,322.8,175.8902,316.8,178.2902,319.2,175.8902" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="166.2" x2="320.4" y1="175.8902" y2="175.8902"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="170.4" y="173.2313">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="138.6" x="178.2" y="173.2313">GET - /settlementWindows/{params}</text><polygon fill="#A80036" points="475.8,191.0766,481.8,193.4766,475.8,195.8766,478.2,193.4766" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="479.4" y1="193.4766" y2="193.4766"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="190.8176">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="102" x="342" y="190.8176">Request settlementWindow</text><polygon fill="#A80036" points="608.4,217.6629,614.4,220.0629,608.4,222.4629,610.8,220.0629" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="489" x2="612" y1="220.0629" y2="220.0629"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="493.2" y="212.9971">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="102" x="501" y="208.4039">Request settlementWindow</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="501" y="217.5902">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="547.2" y="217.5902">2001</text><polygon fill="#FFFFE0" filter="url(#fenla84xom8qn)" points="559.2,228.2356,678,228.2356,684,253.4356,678,278.6356,559.2,278.6356,553.2,253.4356,559.2,228.2356" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="560.4" y="238.1766">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="560.4" y="247.3629">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="560.4" y="256.5492">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="560.4" y="265.7356">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="116.4" x="560.4" y="274.9219">settlementWindowStateChange</text><path d="M463.2,284.9672 L463.2,400.7672 L771,400.7672 L771,290.9672 L765,284.9672 L463.2,284.9672 " fill="#D3D3D3" filter="url(#fenla84xom8qn)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M765,284.9672 L765,290.9672 L771,290.9672 L765,284.9672 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="148.2" x="466.8" y="295.5082">NOTES for constructing database query</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="469.2" y="304.6945"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="131.4" x="466.8" y="313.8809">(participantId) {&amp;participantId={id}}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="173.4" x="466.8" y="323.0672">participantCurrency -&gt; (participantCurencyId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="126.6" x="466.8" y="332.2535">transferParticipant -&gt; (transferId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="83.4" x="466.8" y="341.4399">transferFulfilment  -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88.8" x="552.6" y="341.4399">(settlementWindowId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="469.2" y="350.6262"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.8" x="466.8" y="359.8125">settlementWindow -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49.8" x="552" y="359.8125">(createDate)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="237.6" x="476.4" y="368.9988">{createDate &lt;= &amp;fromDateTime &amp; createDate &gt;= &amp;toDateTime}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="469.2" y="378.1852"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="129.6" x="466.8" y="387.3715">settlementWindowStateChange -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163.2" x="598.8" y="387.3715">(settlementWindowStateId &amp; createDate)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="198" x="476.4" y="396.5578">NOTE - settlementWindowStateChange.createDate =</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="676.8" y="396.5578">changeDate</text><polygon fill="#A80036" points="495.6,416.8031,489.6,419.2031,495.6,421.6031,493.2,419.2031" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="492" x2="618" y1="419.2031" y2="419.2031"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="499.2" y="416.5442">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="507" y="416.5442">Return result</text><path d="M13.8,428.3895 L51,428.3895 L51,432.5895 L45,438.5895 L13.8,438.5895 L13.8,428.3895 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="305.2723" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="512.4" x="13.8" y="428.3895"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="22.8" y="436.5305">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="60" y="435.9703">[Return settlementWindow(s)]</text><polygon fill="#A80036" points="336.6,448.9758,330.6,451.3758,336.6,453.7758,334.2,451.3758" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="482.4" y1="451.3758" y2="451.3758"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="448.7168">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="100.8" x="348" y="448.7168">Successful - return results</text><path d="M208.2,459.3621 L208.2,547.5621 L318.6,547.5621 L318.6,465.3621 L312.6,459.3621 L208.2,459.3621 " fill="#FFFF00" filter="url(#fenla84xom8qn)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,459.3621 L312.6,465.3621 L318.6,465.3621 L312.6,459.3621 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="211.8" y="469.9031">[</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="216.6" y="479.0895">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="221.4" y="488.2758">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="221.4" y="497.4621">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="221.4" y="506.6485">"state": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="221.4" y="515.8348">"createdDate": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="221.4" y="525.0211">"changedDate": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="216.6" y="534.2074">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="211.8" y="543.3938">]</text><polygon fill="#A80036" points="172.8,563.6391,166.8,566.0391,172.8,568.4391,170.4,566.0391" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="169.2" x2="326.4" y1="566.0391" y2="566.0391"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="176.4" y="563.3801">6</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="184.2" y="563.3801">Return results</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="13.8" x2="526.2" y1="571.6254" y2="571.6254"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="16.8" y="578.0063">[</text><text fill="#FF0000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96.6" x="19.2" y="578.0063">settlementWindow not found</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="115.8" y="578.0063">]</text><polygon fill="#A80036" points="336.6,590.1985,330.6,592.5985,336.6,594.9985,334.2,592.5985" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="485.4" y1="592.5985" y2="592.5985"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="589.9395">7</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="133.8" x="348" y="589.9395">Unsuccessful result - return ERROR</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="355.2" y1="610.3711" y2="610.3711"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="355.2" x2="355.2" y1="610.3711" y2="618.1711"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330.6" x2="355.2" y1="618.1711" y2="618.1711"/><polygon fill="#A80036" points="336.6,615.7711,330.6,618.1711,336.6,620.5711,334.2,618.1711" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="607.5258">8</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="63.6" x="342" y="607.5258">Update Event log</text><path d="M333,625.9711 L333,649.9711 L457.2,649.9711 L457.2,631.9711 L451.2,625.9711 L333,625.9711 " fill="#ADD8E6" filter="url(#fenla84xom8qn)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M451.2,625.9711 L451.2,631.9711 L457.2,631.9711 L451.2,625.9711 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.2" x="336.6" y="636.5121">Log ERROR Messages.</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="111.6" x="336.6" y="645.6985">Update Event log with ERROR.</text><path d="M19.8,658.7438 L19.8,710.3438 L318.6,710.3438 L318.6,664.7438 L312.6,658.7438 L19.8,658.7438 " fill="#FFFF00" filter="url(#fenla84xom8qn)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,658.7438 L312.6,664.7438 L318.6,664.7438 L312.6,658.7438 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="669.2848">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="41.4" x="28.2" y="678.4711">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="281.4" x="28.2" y="687.6574">"code": "(ERROR response code eg. '404' - Defined in swagger definition))",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="72" x="28.2" y="696.8438">"message": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="706.0301">}</text><polygon fill="#A80036" points="169.8,726.2754,163.8,728.6754,169.8,731.0754,167.4,728.6754" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="166.2" x2="326.4" y1="728.6754" y2="728.6754"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="173.4" y="726.0164">9</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="51.6" x="181.2" y="726.0164">Return ERROR</text><!--
@startuml
title Request settlementWindow by parameters.

autonumber

actor "Hub Employee" as OPERATOR

boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO

database "Central Store" as DB

box "Central HUB" #LightPink
    participant OPERATOR
end box

box "Settlement Service" #LightGreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #LightYellow
    participant DB
end box


group Retrieve SettlementWindow properties per parameters.
    activate OPERATOR
    note right of OPERATOR #Yellow
        **Filtering Params:**
        &participantId={id}
        &state={state}
        &fromDateTime={yyyy-mm-ddThh:mm}
        &toDateTime={yyyy-mm-ddThh:mm}
    end note
    OPERATOR -> SSAPI: GET - /settlementWindows/{params}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Request settlementWindow \n<color #FF0000><b>Error code:</b> 2001</color>
    activate DB
    hnote over DB #LightYellow
        participantCurrency
        transferParticipant
        transferFulfilment
        settlementWindow
        settlementWindowStateChange
    end hnote
    note over DB #LightGray
        NOTES for constructing database query

        (participantId) {&participantId={id}}
        participantCurrency -> (participantCurencyId)
        transferParticipant -> (transferId)
        transferFulfilment  -> **(settlementWindowId)**

        settlementWindow -> **(createDate)**
            {createDate <= &fromDateTime & createDate >= &toDateTime}

        settlementWindowStateChange -> **(settlementWindowStateId & createDate)**
            NOTE - settlementWindowStateChange.createDate = **changeDate**
    end note
    SETTLE_DAO <- - DB: Return result
    deactivate DB
    alt Return settlementWindow(s)
        SSAPI <- - SETTLE_DAO: Successful - return results
        note left of SSAPI #Yellow
          [
            {
              "id": 0,
              "reason": "string",
              "state": "string",
              "createdDate": "string",
              "changedDate": "string"
            }
          ]
        end note
        OPERATOR <- - SSAPI: Return results
        deactivate SSAPI
    else <color #FF0000><b>settlementWindow not found</b></color>
        SSAPI <- - SETTLE_DAO: Unsuccessful result - return ERROR
        deactivate SETTLE_DAO
        activate SSAPI
        SSAPI -> SSAPI: Update Event log
        note right of SSAPI #LightBlue
            Log ERROR Messages.
            Update Event log with ERROR.
        end note
        note left of SSAPI #Yellow
            {
              "status": 0,
              "code": "(ERROR response code eg. '404' - Defined in swagger definition))",
              "message": "string"
            }
        end note
        OPERATOR <- - SSAPI: Return ERROR
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b29
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>