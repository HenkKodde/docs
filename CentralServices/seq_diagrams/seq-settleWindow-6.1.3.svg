<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="809.4px" preserveAspectRatio="none" style="width:712px;height:809px;" version="1.1" viewBox="0 0 712 809" width="712.8px" zoomAndPan="magnify"><defs><filter height="300%" id="fgzkxqtnqhn9e" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="246" x="234" y="14.1211">6.1.3. Request Settlement Window(s) as per parameter(s).</text><rect fill="#FFB6C1" height="782.6344" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="67.2" x="17.4" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="26.7" y="28.234">Central HUB</text><rect fill="#90EE90" height="782.6344" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="213.3" x="165.3" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="234.75" y="28.234">Settlement Service</text><rect fill="#FFFFE0" height="782.6344" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="68.4" x="438" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="439.8" y="28.234">Central Services</text><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="643.6758" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="48" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="556.1578" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="211.8" y="175.8902"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="289.8445" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="339" y="202.4766"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="469.2" y="220.2492"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="648.6621" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="698.4" x="7.8" y="92.5723"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="235.527" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="291.6" x="13.8" y="501.5074"/><rect fill="#FFFFFF" height="110.4773" style="stroke: none; stroke-width: 0.6000000238418579;" width="291.6" x="13.8" y="626.5571"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="51" x2="51" y1="82.3723" y2="751.4344"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="214.5" x2="214.5" y1="82.3723" y2="751.4344"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="342" x2="342" y1="82.3723" y2="751.4344"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="472.2" x2="472.2" y1="82.3723" y2="751.4344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="19.8" y="80.6004">Hub Employee</text><ellipse cx="51" cy="38.2793" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M51,43.0793 L51,59.2793 M43.2,47.8793 L58.8,47.8793 M51,59.2793 L43.2,68.2793 M51,59.2793 L58.8,68.2793 " fill="none" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="19.8" y="758.9555">Hub Employee</text><ellipse cx="51" cy="766.7274" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M51,771.5274 L51,787.7274 M43.2,776.3274 L58.8,776.3274 M51,787.7274 L43.2,796.7274 M51,787.7274 L58.8,796.7274 " fill="none" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="167.7" y="80.6004">Settlement Service API</text><path d="M202.5,55.6793 L202.5,70.0793 M202.5,62.8793 L212.7,62.8793 " fill="none" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="219.9" cy="62.8793" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="167.7" y="758.9555">Settlement Service API</text><path d="M202.5,763.1274 L202.5,777.5274 M202.5,770.3274 L212.7,770.3274 " fill="none" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="219.9" cy="770.3274" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="307.8" y="80.6004">Settlement DAO</text><ellipse cx="342" cy="62.8793" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="334.8" x2="349.2" y1="71.2793" y2="71.2793"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="307.8" y="758.9555">Settlement DAO</text><ellipse cx="342" cy="770.3274" fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="334.8" x2="349.2" y1="778.7274" y2="778.7274"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="443.4" y="80.6004">Central Store</text><path d="M461.4,50.8793 C461.4,44.8793 472.2,44.8793 472.2,44.8793 C472.2,44.8793 483,44.8793 483,50.8793 L483,66.4793 C483,72.4793 472.2,72.4793 472.2,72.4793 C472.2,72.4793 461.4,72.4793 461.4,66.4793 L461.4,50.8793 " fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M461.4,50.8793 C461.4,56.8793 472.2,56.8793 472.2,56.8793 C472.2,56.8793 483,56.8793 483,50.8793 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="443.4" y="758.9555">Central Store</text><path d="M461.4,766.7274 C461.4,760.7274 472.2,760.7274 472.2,760.7274 C472.2,760.7274 483,760.7274 483,766.7274 L483,782.3274 C483,788.3274 472.2,788.3274 472.2,788.3274 C472.2,788.3274 461.4,788.3274 461.4,782.3274 L461.4,766.7274 " fill="#FEFECE" filter="url(#fgzkxqtnqhn9e)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M461.4,766.7274 C461.4,772.7274 472.2,772.7274 472.2,772.7274 C472.2,772.7274 483,772.7274 483,766.7274 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="643.6758" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="48" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="556.1578" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="211.8" y="175.8902"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="289.8445" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="339" y="202.4766"/><rect fill="#FFFFFF" filter="url(#fgzkxqtnqhn9e)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="469.2" y="220.2492"/><path d="M7.8,92.5723 L213,92.5723 L213,96.7723 L207,102.7723 L7.8,102.7723 L7.8,92.5723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="648.6621" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="698.4" x="7.8" y="92.5723"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178.2" x="16.8" y="100.7133">Retrieve SettlementWindow per parameters.</text><path d="M57,105.9586 L57,157.5586 L221.4,157.5586 L221.4,111.9586 L215.4,105.9586 L57,105.9586 " fill="#FFFF00" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M215.4,105.9586 L215.4,111.9586 L221.4,111.9586 L215.4,105.9586 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="60.6" y="116.4996">Filtering Params:</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="71.4" x="60.6" y="125.6859">&amp;participantId={id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="60.6" y="134.8723">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="151.8" x="60.6" y="144.0586">&amp;fromDateTime={yyyy-mm-ddThh:mm}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141.6" x="60.6" y="153.2449">&amp;toDateTime={yyyy-mm-ddThh:mm}</text><polygon fill="#A80036" points="204.6,173.4902,210.6,175.8902,204.6,178.2902,207,175.8902" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="54" x2="208.2" y1="175.8902" y2="175.8902"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="58.2" y="173.2313">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="138.6" x="66" y="173.2313">GET - /settlementWindows/{params}</text><polygon fill="#A80036" points="331.8,200.0766,337.8,202.4766,331.8,204.8766,334.2,202.4766" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="217.8" x2="335.4" y1="202.4766" y2="202.4766"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="222" y="195.4107">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="102" x="229.8" y="190.8176">Request settlementWindow</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="229.8" y="200.0039">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="276" y="200.0039">2001</text><polygon fill="#A80036" points="462,217.8492,468,220.2492,462,222.6492,464.4,220.2492" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="345" x2="465.6" y1="220.2492" y2="220.2492"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="349.2" y="217.5902">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="102" x="357" y="217.5902">Request settlementWindow</text><polygon fill="#FFFFE0" filter="url(#fgzkxqtnqhn9e)" points="412.8,246.2356,531.6,246.2356,537.6,275.6356,531.6,305.6356,412.8,305.6356,406.8,275.6356,412.8,246.2356" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="414" y="256.1766">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="116.4" x="414" y="265.3629">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="414" y="274.5492">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="414" y="283.7356">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="414" y="292.9219">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="416.4" y="302.1082"/><path d="M243.6,312.1535 L243.6,474.1535 L697.8,474.1535 L697.8,318.1535 L691.8,312.1535 L243.6,312.1535 " fill="#D3D3D3" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M691.8,312.1535 L691.8,318.1535 L697.8,318.1535 L691.8,312.1535 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="148.2" x="247.2" y="322.6945">NOTES for constructing database query</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="249.6" y="331.8809"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.8" x="247.2" y="341.0672">settlementWindow -&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="332.4" y="341.0672">(createdDate)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="256.8" y="350.2535"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57.6" x="256.8" y="350.2535">Optional Filter</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="247.2" x="256.8" y="359.4399">{createdDate &lt;= &amp;fromDateTime &amp; createdDate &gt;= &amp;toDateTime}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="249.6" y="368.6262"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="237" x="247.2" y="377.8125">settlementWindowStateChange -&gt; (use settlementWindowId to</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102.6" x="486.6" y="377.8125">settlementWindowStateId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="591.6" y="377.8125">&amp;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49.2" x="599.4" y="377.8125">createdDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="651" y="377.8125">&amp;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="658.8" y="377.8125">reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="686.4" y="377.8125">)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="202.8" x="247.2" y="386.9988">NOTE - settlementWindowStateChange.createdDate =</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54" x="452.4" y="386.9988">changedDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="256.8" y="396.1852"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.2" x="256.8" y="396.1852">Filter on &amp;state</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="205.2" x="320.4" y="396.1852">(note valid is 'OPEN' 'CLOSE' as per Swagger definition)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="92.4" x="256.8" y="405.3715">(state) = {&amp;state={state}}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="249.6" y="414.5578"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73.2" x="247.2" y="423.7442">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="196.8" x="325.2" y="423.7442">-&gt; (use settlementWindowId = {id} to get transferId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76.2" x="247.2" y="432.9305">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="226.2" x="325.8" y="432.9305">-&gt; (use transferId = transferId to get participantCurrencyId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="247.2" y="442.1168">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="190.2" x="331.2" y="442.1168">-&gt; (use participantCurrencyId to get participantId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="256.8" y="451.3031"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93.6" x="256.8" y="451.3031">Filter on &amp;participantId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="139.8" x="247.2" y="460.4895">(participantId) = {&amp;participantId={id}}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="249.6" y="469.6758"/><polygon fill="#A80036" points="224.4,489.9211,218.4,492.3211,224.4,494.7211,222,492.3211" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="220.8" x2="341.4" y1="492.3211" y2="492.3211"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="228" y="489.6621">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="235.8" y="489.6621">Return result</text><path d="M13.8,501.5074 L51,501.5074 L51,505.7074 L45,511.7074 L13.8,511.7074 L13.8,501.5074 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="235.527" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="291.6" x="13.8" y="501.5074"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="22.8" y="509.6485">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="60" y="509.0883">[Return Settlement Window]</text><path d="M96,514.8938 L96,603.0938 L206.4,603.0938 L206.4,520.8938 L200.4,514.8938 L96,514.8938 " fill="#FFFF00" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M200.4,514.8938 L200.4,520.8938 L206.4,520.8938 L200.4,514.8938 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="99.6" y="525.4348">[</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="104.4" y="534.6211">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="109.2" y="543.8074">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="109.2" y="552.9938">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="109.2" y="562.1801">"state": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="109.2" y="571.3664">"createdDate": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="109.2" y="580.5528">"changedDate": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="104.4" y="589.7391">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="99.6" y="598.9254">]</text><polygon fill="#A80036" points="60.6,619.1707,54.6,621.5707,60.6,623.9707,58.2,621.5707" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="57" x2="211.2" y1="621.5707" y2="621.5707"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="64.2" y="618.9117">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="72" y="618.9117">Respond HTTP -</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="32.4" x="136.2" y="618.9117">200 (OK)</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="13.8" x2="305.4" y1="627.1571" y2="627.1571"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103.8" x="16.8" y="633.5379">[Settlement Window not found]</text><path d="M220.8,638.5301 L220.8,653.5301 L297,653.5301 L297,644.5301 L291,638.5301 L220.8,638.5301 " fill="#D3D3D3" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M291,638.5301 L291,644.5301 L297,644.5301 L291,638.5301 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="63.6" x="224.4" y="649.0711">Log ERROR event</text><path d="M106.2,662.1164 L106.2,713.7164 L206.4,713.7164 L206.4,668.1164 L200.4,662.1164 L106.2,662.1164 " fill="#FFFF00" filter="url(#fgzkxqtnqhn9e)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M200.4,662.1164 L200.4,668.1164 L206.4,668.1164 L200.4,662.1164 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="109.8" y="672.6574">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="41.4" x="119.4" y="681.8438">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="119.4" y="691.0301">"code": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="78" x="119.4" y="700.2164">"message": &lt;string&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="109.8" y="709.4028">}</text><polygon fill="#A80036" points="57.6,729.6481,51.6,732.0481,57.6,734.4481,55.2,732.0481" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="54" x2="214.2" y1="732.0481" y2="732.0481"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="61.2" y="729.3891">6</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="69" y="729.3891">Respond HTTP -</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="64.2" x="133.2" y="729.3891">4xx (Client error)</text><!--
@startuml
title 6.1.3. Request Settlement Window(s) as per parameter(s).

autonumber


actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #LightPink
    participant OPERATOR
end box

box "Settlement Service" #LightGreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #LightYellow
    participant DB
end box


group Retrieve SettlementWindow per parameters.
    activate OPERATOR
    note right of OPERATOR #Yellow
        **Filtering Params:**
        &participantId={id}
        &state={state}
        &fromDateTime={yyyy-mm-ddThh:mm}
        &toDateTime={yyyy-mm-ddThh:mm}
    end note
    OPERATOR -> SSAPI: GET - /settlementWindows/{params}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Request settlementWindow
    activate DB
    hnote over DB #LightYellow
        settlementWindow
        settlementWindowStateChange
        transferFulfilment
        transferParticipant
        participantCurrency

    end hnote
    note over DB #LightGray
        NOTES for constructing database query

        settlementWindow -> **(createdDate)**
            **Optional Filter**
            {createdDate <= &fromDateTime & createdDate >= &toDateTime}

        settlementWindowStateChange -> (use settlementWindowId to **settlementWindowStateId** & **createdDate** & **reason**)
        NOTE - settlementWindowStateChange.createdDate = **changedDate**
            **Filter on &state** (note valid is 'OPEN' 'CLOSE' as per Swagger definition)
            (state) = {&state={state}}

        **transferFulfilment**  -> (use settlementWindowId = {id} to get transferId)
        **transferParticipant** -> (use transferId = transferId to get participantCurrencyId)
        **participantCurrency** -> (use participantCurrencyId to get participantId)
            **Filter on &participantId**
        (participantId) = {&participantId={id}}

    end note
    hnote over DB #LightYellow
    end hnote
    deactivate DB
    SSAPI <- - SETTLE_DAO: Return result
    deactivate SETTLE_DAO
    alt Return Settlement Window
        note left of SSAPI #Yellow
          [
            {
              "id": 0,
              "reason": "string",
              "state": "string",
              "createdDate": "string",
              "changedDate": "string"
            }
          ]
        end note
        OPERATOR <- - SSAPI: Respond HTTP - <color #FF0000>200 (OK)</color>
    else Settlement Window not found
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                "status": 0,
                "code": <integer>,
                "message": <string>
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - <color #FF0000>4xx (Client error)</color>
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b29
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>