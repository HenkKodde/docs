<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2238px" preserveAspectRatio="none" style="width:1637px;height:2238px;" version="1.1" viewBox="0 0 1637 2238" width="1637px" zoomAndPan="magnify"><defs><filter height="300%" id="f1w5zbutsyva5w" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="374" x="632.5" y="23.5352">2.06 Design an API to manage NET DEBIT CAP #330</text><rect fill="#FFFFE0" height="2193.3066" style="stroke: #A80036; stroke-width: 1.0;" width="718.5" x="848" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="1153.25" y="47.0566">Central Services</text><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="1997.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="74.5" y="126.9766"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="1952.0195" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="700.5" y="172.2871"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="1653.7402" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="912.5" y="470.5664"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1268.5" y="514.877"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1268.5" y="747.3613"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1268.5" y="1004.1563"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="156.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1268.5" y="1367.8145"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1509.5" y="544.498"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1509.5" y="776.9824"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1509.5" y="1033.7773"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1509.5" y="1397.4355"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="1990.3301" style="stroke: #000000; stroke-width: 2.0;" width="1613" x="13" y="133.9766"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="1423.2559" style="stroke: #000000; stroke-width: 2.0;" width="804" x="812" y="694.0508"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="998.332" style="stroke: #000000; stroke-width: 2.0;" width="784" x="822" y="926.5352"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="967.0215" style="stroke: #000000; stroke-width: 2.0;" width="764" x="832" y="950.8457"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="542.0977" style="stroke: #000000; stroke-width: 2.0;" width="744" x="842" y="1183.3301"/><rect fill="#FFFFFF" height="185.4395" style="stroke: none; stroke-width: 1.0;" width="744" x="842" y="1539.9883"/><rect fill="#FFFFFF" height="185.4395" style="stroke: none; stroke-width: 1.0;" width="764" x="832" y="1732.4277"/><rect fill="#FFFFFF" height="185.4395" style="stroke: none; stroke-width: 1.0;" width="804" x="812" y="1931.8672"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="79" x2="79" y1="116.9766" y2="2141.3066"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="705" x2="705" y1="116.9766" y2="2141.3066"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="917" x2="917" y1="116.9766" y2="2141.3066"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1273.5" x2="1273.5" y1="116.9766" y2="2141.3066"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1514.5" x2="1514.5" y1="116.9766" y2="2141.3066"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="23" y="114.0234">HUB OPERATOR</text><ellipse cx="79.5" cy="43.4883" fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M79.5,51.4883 L79.5,78.4883 M66.5,59.4883 L92.5,59.4883 M79.5,78.4883 L66.5,93.4883 M79.5,78.4883 L92.5,93.4883 " fill="none" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="23" y="2153.8418">HUB OPERATOR</text><ellipse cx="79.5" cy="2166.7949" fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M79.5,2174.7949 L79.5,2201.7949 M66.5,2182.7949 L92.5,2182.7949 M79.5,2201.7949 L66.5,2216.7949 M79.5,2201.7949 L92.5,2216.7949 " fill="none" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="624" y="114.0234">Participant Handler API</text><path d="M685,72.4883 L685,96.4883 M685,84.4883 L702,84.4883 " fill="none" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="714" cy="84.4883" fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="624" y="2153.8418">Participant Handler API</text><path d="M685,2160.7949 L685,2184.7949 M685,2172.7949 L702,2172.7949 " fill="none" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="714" cy="2172.7949" fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="852" y="114.0234">Participant Facade</text><ellipse cx="917.5" cy="84.4883" fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="913.5,72.4883,919.5,67.4883,917.5,72.4883,919.5,77.4883,913.5,72.4883" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="852" y="2153.8418">Participant Facade</text><ellipse cx="917.5" cy="2172.7949" fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="913.5,2160.7949,919.5,2155.7949,917.5,2160.7949,919.5,2165.7949,913.5,2160.7949" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1216.5" y="114.0234">Participant DAO</text><ellipse cx="1273.5" cy="84.4883" fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1261.5" x2="1285.5" y1="98.4883" y2="98.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1216.5" y="2153.8418">Participant DAO</text><ellipse cx="1273.5" cy="2172.7949" fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1261.5" x2="1285.5" y1="2186.7949" y2="2186.7949"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1466.5" y="114.0234">Central Store</text><path d="M1496.5,64.4883 C1496.5,54.4883 1514.5,54.4883 1514.5,54.4883 C1514.5,54.4883 1532.5,54.4883 1532.5,64.4883 L1532.5,90.4883 C1532.5,100.4883 1514.5,100.4883 1514.5,100.4883 C1514.5,100.4883 1496.5,100.4883 1496.5,90.4883 L1496.5,64.4883 " fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1496.5,64.4883 C1496.5,74.4883 1514.5,74.4883 1514.5,74.4883 C1514.5,74.4883 1532.5,74.4883 1532.5,64.4883 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1466.5" y="2153.8418">Central Store</text><path d="M1496.5,2166.7949 C1496.5,2156.7949 1514.5,2156.7949 1514.5,2156.7949 C1514.5,2156.7949 1532.5,2156.7949 1532.5,2166.7949 L1532.5,2192.7949 C1532.5,2202.7949 1514.5,2202.7949 1514.5,2202.7949 C1514.5,2202.7949 1496.5,2202.7949 1496.5,2192.7949 L1496.5,2166.7949 " fill="#FEFECE" filter="url(#f1w5zbutsyva5w)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1496.5,2166.7949 C1496.5,2176.7949 1514.5,2176.7949 1514.5,2176.7949 C1514.5,2176.7949 1532.5,2176.7949 1532.5,2166.7949 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="1997.3301" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="74.5" y="126.9766"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="1952.0195" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="700.5" y="172.2871"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="1653.7402" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="912.5" y="470.5664"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1268.5" y="514.877"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1268.5" y="747.3613"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="121.5527" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1268.5" y="1004.1563"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="156.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1268.5" y="1367.8145"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1509.5" y="544.498"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1509.5" y="776.9824"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1509.5" y="1033.7773"/><rect fill="#FFFFFF" filter="url(#f1w5zbutsyva5w)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1509.5" y="1397.4355"/><path d="M13,133.9766 L209,133.9766 L209,140.9766 L199,150.9766 L13,150.9766 L13,133.9766 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1990.3301" style="stroke: #000000; stroke-width: 2.0;" width="1613" x="13" y="133.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="28" y="147.5449">Manage Net Debit Cap</text><polygon fill="#A80036" points="688.5,168.2871,698.5,172.2871,688.5,176.2871,692.5,172.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84.5" x2="694.5" y1="172.2871" y2="172.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="91.5" y="167.8555">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="584" x="104.5" y="167.8555">Request to adjust ParticipantLimit for a certain Currency - POST - /participants/{name}/limit</text><path d="M89,185.5977 L89,439.5977 L297,439.5977 L297,195.5977 L287,185.5977 L89,185.5977 " fill="#FFFF00" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M287,185.5977 L287,195.5977 L297,195.5977 L287,185.5977 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="95" y="203.166">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="95" y="218.4766">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="111" y="233.7871">payload: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="127" y="249.0977">LimitAdjustment: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="143" y="264.4082">type: &lt;object&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="159" y="279.7188">currencyId: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="175" y="295.0293">type: &lt;string&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="175" y="310.3398">value: &lt;Id&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="159" y="325.6504">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="159" y="340.9609">adjustmentValue: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="175" y="356.2715">type: &lt;number&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="175" y="371.582">value: &lt;0&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="159" y="386.8926">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="127" y="402.2031">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="111" y="417.5137">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="95" y="432.8242">}</text><polygon fill="#A80036" points="900.5,466.5664,910.5,470.5664,900.5,474.5664,904.5,470.5664" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="710.5" x2="906.5" y1="470.5664" y2="470.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="717.5" y="466.1348">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="730.5" y="466.1348">Adjust Limit for Participant</text><polygon fill="#A80036" points="1256.5,510.877,1266.5,514.877,1256.5,518.877,1260.5,514.877" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="922.5" x2="1262.5" y1="514.877" y2="514.877"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="929.5" y="503.1006">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="942.5" y="495.4453">Fetch Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="942.5" y="510.7559">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1019.5" y="510.7559">3200</text><polygon fill="#A80036" points="1497.5,540.498,1507.5,544.498,1497.5,548.498,1501.5,544.498" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1278.5" x2="1503.5" y1="544.498" y2="544.498"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1285.5" y="540.0664">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="1298.5" y="540.0664">Fetch Participant</text><polygon fill="#FFFFE0" filter="url(#f1w5zbutsyva5w)" points="1478,557.8086,1550,557.8086,1560,568.8086,1550,580.8086,1478,580.8086,1468,568.8086,1478,557.8086" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1480" y="574.377">participant</text><polygon fill="#A80036" points="1289.5,603.1191,1279.5,607.1191,1289.5,611.1191,1285.5,607.1191" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1283.5" x2="1513.5" y1="607.1191" y2="607.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1295.5" y="602.6875">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1308.5" y="602.6875">Retrieved Participant</text><polygon fill="#A80036" points="933.5,632.4297,923.5,636.4297,933.5,640.4297,929.5,636.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="927.5" x2="1272.5" y1="636.4297" y2="636.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="939.5" y="631.998">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="952.5" y="631.998">Return Participant</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="922.5" x2="964.5" y1="666.0508" y2="666.0508"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="964.5" x2="964.5" y1="666.0508" y2="679.0508"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="923.5" x2="964.5" y1="679.0508" y2="679.0508"/><polygon fill="#A80036" points="933.5,675.0508,923.5,679.0508,933.5,683.0508,929.5,679.0508" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="929.5" y="661.3086">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="942.5" y="661.3086">Validate DFSP</text><path d="M812,694.0508 L874,694.0508 L874,701.0508 L864,711.0508 L812,711.0508 L812,694.0508 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1423.2559" style="stroke: #000000; stroke-width: 2.0;" width="804" x="812" y="694.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="827" y="707.6191">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="889" y="706.6855">[Validate participant (success)]</text><polygon fill="#A80036" points="1256.5,743.3613,1266.5,747.3613,1256.5,751.3613,1260.5,747.3613" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="922.5" x2="1262.5" y1="747.3613" y2="747.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="929.5" y="735.585">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="942.5" y="727.9297">(for Participant) Fetch ParticipantCurrency</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="942.5" y="743.2402">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1019.5" y="743.2402">3200</text><polygon fill="#A80036" points="1497.5,772.9824,1507.5,776.9824,1497.5,780.9824,1501.5,776.9824" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1278.5" x2="1503.5" y1="776.9824" y2="776.9824"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1285.5" y="772.5508">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="1298.5" y="772.5508">Fetch ParticipantCurrency</text><polygon fill="#FFFFE0" filter="url(#f1w5zbutsyva5w)" points="1450,790.293,1578,790.293,1588,801.293,1578,813.293,1450,813.293,1440,801.293,1450,790.293" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="1452" y="806.8613">participantCurrency</text><polygon fill="#A80036" points="1289.5,835.6035,1279.5,839.6035,1289.5,843.6035,1285.5,839.6035" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1283.5" x2="1513.5" y1="839.6035" y2="839.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1295.5" y="835.1719">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="1317.5" y="835.1719">Retrieved ParticipantCurrency</text><polygon fill="#A80036" points="933.5,864.9141,923.5,868.9141,933.5,872.9141,929.5,868.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="927.5" x2="1272.5" y1="868.9141" y2="868.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="939.5" y="864.4824">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="961.5" y="864.4824">Return ParticipantCurrency</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="922.5" x2="964.5" y1="898.5352" y2="898.5352"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="964.5" x2="964.5" y1="898.5352" y2="911.5352"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="923.5" x2="964.5" y1="911.5352" y2="911.5352"/><polygon fill="#A80036" points="933.5,907.5352,923.5,911.5352,933.5,915.5352,929.5,911.5352" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="929.5" y="893.793">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="951.5" y="893.793">Validate ParticipantCurrency</text><path d="M822,926.5352 L1423,926.5352 L1423,933.5352 L1413,943.5352 L822,943.5352 L822,926.5352 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="998.332" style="stroke: #000000; stroke-width: 2.0;" width="784" x="822" y="926.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="556" x="837" y="940.1035">DB TRANSACTION IMPLEMENTATION - Lock on ParticipantLimit table with UPDATE</text><path d="M832,950.8457 L894,950.8457 L894,957.8457 L884,967.8457 L832,967.8457 L832,950.8457 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="967.0215" style="stroke: #000000; stroke-width: 2.0;" width="764" x="832" y="950.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="847" y="964.4141">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="909" y="963.4805">[Validate participantCurrency (success)]</text><polygon fill="#A80036" points="1256.5,1000.1563,1266.5,1004.1563,1256.5,1008.1563,1260.5,1004.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="922.5" x2="1262.5" y1="1004.1563" y2="1004.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="929.5" y="992.3799">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="294" x="951.5" y="984.7246">(for ParticipantCurrency) Fetch ParticipantLimit</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="951.5" y="1000.0352">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1028.5" y="1000.0352">3200</text><polygon fill="#A80036" points="1497.5,1029.7773,1507.5,1033.7773,1497.5,1037.7773,1501.5,1033.7773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1278.5" x2="1503.5" y1="1033.7773" y2="1033.7773"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1285.5" y="1029.3457">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="1307.5" y="1029.3457">Fetch ParticipantLimit</text><polygon fill="#FFFFE0" filter="url(#f1w5zbutsyva5w)" points="1462,1047.0879,1566,1047.0879,1576,1058.0879,1566,1070.0879,1462,1070.0879,1452,1058.0879,1462,1047.0879" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1464" y="1063.6563">participantLimit</text><polygon fill="#A80036" points="1289.5,1092.3984,1279.5,1096.3984,1289.5,1100.3984,1285.5,1096.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1283.5" x2="1513.5" y1="1096.3984" y2="1096.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1295.5" y="1091.9668">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="1317.5" y="1091.9668">Retrieved ParticipantLimit</text><polygon fill="#A80036" points="933.5,1121.709,923.5,1125.709,933.5,1129.709,929.5,1125.709" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="927.5" x2="1272.5" y1="1125.709" y2="1125.709"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="939.5" y="1121.2773">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="961.5" y="1121.2773">Return ParticipantLimit</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="922.5" x2="964.5" y1="1155.3301" y2="1155.3301"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="964.5" x2="964.5" y1="1155.3301" y2="1168.3301"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="923.5" x2="964.5" y1="1168.3301" y2="1168.3301"/><polygon fill="#A80036" points="933.5,1164.3301,923.5,1168.3301,933.5,1172.3301,929.5,1168.3301" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="929.5" y="1150.5879">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="951.5" y="1150.5879">Validate ParticipantLimit</text><path d="M842,1183.3301 L904,1183.3301 L904,1190.3301 L894,1200.3301 L842,1200.3301 L842,1183.3301 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="542.0977" style="stroke: #000000; stroke-width: 2.0;" width="744" x="842" y="1183.3301"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="857" y="1196.8984">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="919" y="1195.9648">[Validate participantLimit (success)]</text><path d="M1278,1205.6406 L1278,1322.6406 L1504,1322.6406 L1504,1215.6406 L1494,1205.6406 L1278,1205.6406 " fill="#D3D3D3" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1494,1205.6406 L1494,1215.6406 L1504,1215.6406 L1494,1205.6406 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="1284" y="1223.209">If (record exists &amp;&amp; isActive = 1)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="1300" y="1238.5195">oldIsActive.isActive = 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="1300" y="1253.8301">insert Record</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="1284" y="1269.1406">Else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="1300" y="1284.4512">insert Record</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1284" y="1299.7617">End</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1288" y="1315.0723"/><polygon fill="#A80036" points="1256.5,1363.8145,1266.5,1367.8145,1256.5,1371.8145,1260.5,1367.8145" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="922.5" x2="1262.5" y1="1367.8145" y2="1367.8145"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="929.5" y="1356.0381">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="301" x="951.5" y="1348.3828">(for ParticipantLimit) Insert new ParticipantLimit</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="951.5" y="1363.6934">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1028.5" y="1363.6934">3200</text><polygon fill="#A80036" points="1497.5,1393.4355,1507.5,1397.4355,1497.5,1401.4355,1501.5,1397.4355" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1278.5" x2="1503.5" y1="1397.4355" y2="1397.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1285.5" y="1393.0039">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="1307.5" y="1393.0039">Insert ParticipantLimit</text><polygon fill="#FFFFE0" filter="url(#f1w5zbutsyva5w)" points="1462,1410.7461,1566,1410.7461,1576,1421.7461,1566,1433.7461,1462,1433.7461,1452,1421.7461,1462,1410.7461" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1464" y="1427.3145">participantLimit</text><polygon fill="#A80036" points="1289.5,1456.0566,1279.5,1460.0566,1289.5,1464.0566,1285.5,1460.0566" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1283.5" x2="1513.5" y1="1460.0566" y2="1460.0566"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1295.5" y="1455.625">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="1317.5" y="1455.625">Inserted ParticipantLimit</text><polygon fill="#A80036" points="933.5,1485.3672,923.5,1489.3672,933.5,1493.3672,929.5,1489.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="927.5" x2="1267.5" y1="1489.3672" y2="1489.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="939.5" y="1484.9355">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="961.5" y="1484.9355">Return ParticipantLimit</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="922.5" x2="964.5" y1="1523.9883" y2="1523.9883"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="964.5" x2="964.5" y1="1523.9883" y2="1536.9883"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="917.5" x2="964.5" y1="1536.9883" y2="1536.9883"/><polygon fill="#A80036" points="927.5,1532.9883,917.5,1536.9883,927.5,1540.9883,923.5,1536.9883" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="929.5" y="1519.2461">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="951.5" y="1519.2461">Validate status</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="842" x2="1586" y1="1540.9883" y2="1540.9883"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="847" y="1551.623">[Validate participantLimit (failure)]</text><path d="M927,1559.9434 L927,1584.9434 L1059,1584.9434 L1059,1569.9434 L1049,1559.9434 L927,1559.9434 " fill="#FF0000" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1049,1559.9434 L1049,1569.9434 L1059,1569.9434 L1049,1559.9434 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="933" y="1577.5117">Validation failure!</text><path d="M927,1599.2539 L927,1716.2539 L1300,1716.2539 L1300,1609.2539 L1290,1599.2539 L927,1599.2539 " fill="#FFFF00" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1290,1599.2539 L1290,1609.2539 L1300,1609.2539 L1290,1599.2539 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="933" y="1616.8223">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="949" y="1632.1328">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="965" y="1647.4434">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="981" y="1662.7539">"errorCode": 3200,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="981" y="1678.0645">"errorDescription": "ParticipantLimit Not Found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="965" y="1693.375">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="949" y="1708.6855">}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="832" x2="1596" y1="1733.4277" y2="1733.4277"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="216" x="837" y="1744.0625">[Validate participantCurrency (failure)]</text><path d="M927,1752.3828 L927,1777.3828 L1059,1777.3828 L1059,1762.3828 L1049,1752.3828 L927,1752.3828 " fill="#FF0000" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1049,1752.3828 L1049,1762.3828 L1059,1762.3828 L1049,1752.3828 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="933" y="1769.9512">Validation failure!</text><path d="M927,1791.6934 L927,1908.6934 L1324,1908.6934 L1324,1801.6934 L1314,1791.6934 L927,1791.6934 " fill="#FFFF00" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1314,1791.6934 L1314,1801.6934 L1324,1801.6934 L1314,1791.6934 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="933" y="1809.2617">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="949" y="1824.5723">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="965" y="1839.8828">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="981" y="1855.1934">"errorCode": 3200,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="981" y="1870.5039">"errorDescription": "ParticipantCurrency Not Found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="965" y="1885.8145">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="949" y="1901.125">}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="812" x2="1616" y1="1932.8672" y2="1932.8672"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="817" y="1943.502">[Validate participant (failure)]</text><path d="M927,1951.8223 L927,1976.8223 L1059,1976.8223 L1059,1961.8223 L1049,1951.8223 L927,1951.8223 " fill="#FF0000" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1049,1951.8223 L1049,1961.8223 L1059,1961.8223 L1049,1951.8223 " fill="#FF0000" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="933" y="1969.3906">Validation failure!</text><path d="M927,1991.1328 L927,2108.1328 L1238,2108.1328 L1238,2001.1328 L1228,1991.1328 L927,1991.1328 " fill="#FFFF00" filter="url(#f1w5zbutsyva5w)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1228,1991.1328 L1228,2001.1328 L1238,2001.1328 L1228,1991.1328 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="933" y="2008.7012">Message:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="949" y="2024.0117">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="965" y="2039.3223">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="981" y="2054.6328">"errorCode": 3200,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="981" y="2069.9434">"errorDescription": "FSP id Not Found",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="965" y="2085.2539">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="949" y="2100.5645">}</text><!--
@startuml
title 2.06 Design an API to manage NET DEBIT CAP #330

autonumber

actor "HUB OPERATOR" as OPERATOR
boundary "Participant Handler API" as PartHAPI
control "Participant Facade" as PARTICIPANT_FACADE
entity "Participant DAO" as PARTICIPANT_DAO
database "Central Store" as DB

box "Central Services" #LightYellow
participant PARTICIPANT_FACADE
participant PARTICIPANT_DAO
participant DB
end box


activate OPERATOR
group Manage Net Debit Cap
    OPERATOR -> PartHAPI: Request to adjust ParticipantLimit for a certain Currency - POST - /participants/{name}/limit
    note right of OPERATOR #yellow
        Message:
        {
            payload: {
                LimitAdjustment: {
                    type: <object>
                        currencyId: {
                            type: <string>,
                            value: <Id>
                        }
                        adjustmentValue: {
                            type: <number>,
                            value: <0>
                        }
                }
            }
        }
    end note

    activate PartHAPI
    PartHAPI -> PARTICIPANT_FACADE: Adjust Limit for Participant
    activate PARTICIPANT_FACADE
    PARTICIPANT_FACADE ->PARTICIPANT_DAO: Fetch Participant \n<color #FF0000><b>Error code:</b> 3200</color>
    activate PARTICIPANT_DAO
    PARTICIPANT_DAO -> DB: Fetch Participant
    activate DB
    hnote over DB #lightyellow
        participant
    end note
    DB - -> PARTICIPANT_DAO: Retrieved Participant
    deactivate DB
    PARTICIPANT_DAO - -> PARTICIPANT_FACADE: Return Participant
    deactivate PARTICIPANT_DAO
    PARTICIPANT_FACADE -> PARTICIPANT_FACADE: Validate DFSP
    alt Validate participant (success)
        PARTICIPANT_FACADE ->PARTICIPANT_DAO:  (for Participant) Fetch ParticipantCurrency \n<color #FF0000><b>Error code:</b> 3200</color>
        activate PARTICIPANT_DAO
        PARTICIPANT_DAO -> DB: Fetch ParticipantCurrency
        activate DB
        hnote over DB #lightyellow
            participantCurrency
        end note
        DB - -> PARTICIPANT_DAO: Retrieved ParticipantCurrency
        deactivate DB
        PARTICIPANT_DAO - -> PARTICIPANT_FACADE: Return ParticipantCurrency
        deactivate PARTICIPANT_DAO
        PARTICIPANT_FACADE->PARTICIPANT_FACADE: Validate ParticipantCurrency
        Group DB TRANSACTION IMPLEMENTATION - Lock on ParticipantLimit table with UPDATE
            alt Validate participantCurrency (success)
                PARTICIPANT_FACADE ->PARTICIPANT_DAO:  (for ParticipantCurrency) Fetch ParticipantLimit \n<color #FF0000><b>Error code:</b> 3200</color>
                activate PARTICIPANT_DAO
                PARTICIPANT_DAO -> DB: Fetch ParticipantLimit
                activate DB
                hnote over DB #lightyellow
                    participantLimit
                end note
                DB - -> PARTICIPANT_DAO: Retrieved ParticipantLimit
                deactivate DB
                PARTICIPANT_DAO - -> PARTICIPANT_FACADE: Return ParticipantLimit
                deactivate PARTICIPANT_DAO
                PARTICIPANT_FACADE -> PARTICIPANT_FACADE: Validate ParticipantLimit
                alt Validate participantLimit (success)
                    note right of PARTICIPANT_DAO #lightgrey
                        If (record exists && isActive = 1)
                            oldIsActive.isActive = 0
                            insert Record
                        Else
                            insert Record
                        End

                    end note

                    PARTICIPANT_FACADE ->PARTICIPANT_DAO:  (for ParticipantLimit) Insert new ParticipantLimit \n<color #FF0000><b>Error code:</b> 3200</color>

                    activate PARTICIPANT_DAO

                    PARTICIPANT_DAO -> DB: Insert ParticipantLimit
                    activate DB
                    hnote over DB #lightyellow
                        participantLimit
                    end note
                    DB - -> PARTICIPANT_DAO: Inserted ParticipantLimit
                    deactivate DB
                    PARTICIPANT_DAO - -> PARTICIPANT_FACADE: Return ParticipantLimit

                    PARTICIPANT_FACADE -> PARTICIPANT_FACADE: Validate status

                    deactivate PARTICIPANT_DAO
                else Validate participantLimit (failure)
                    note right of PARTICIPANT_FACADE #red: Validation failure!

                    note right of PARTICIPANT_FACADE #yellow
                        Message:
                            {
                                "errorInformation": {
                                    "errorCode": 3200,
                                    "errorDescription": "ParticipantLimit Not Found",
                                }
                            }
                    end note
                end
            else Validate participantCurrency (failure)
                note right of PARTICIPANT_FACADE #red: Validation failure!

                note right of PARTICIPANT_FACADE #yellow
                    Message:
                        {
                            "errorInformation": {
                                "errorCode": 3200,
                                "errorDescription": "ParticipantCurrency Not Found",
                            }
                        }
                end note
            end

        End

    else Validate participant (failure)
        note right of PARTICIPANT_FACADE #red: Validation failure!

        note right of PARTICIPANT_FACADE #yellow
            Message:
                {
                    "errorInformation": {
                        "errorCode": 3200,
                        "errorDescription": "FSP id Not Found",
                    }
                }
        end note

    end

    deactivate PARTICIPANT_FACADE
    deactivate PartHAPI
    deactivate OPERATOR
end
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-915-b12
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>