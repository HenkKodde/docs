<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="876px" preserveAspectRatio="none" style="width:2020px;height:876px;" version="1.1" viewBox="0 0 2020 876" width="2020px" zoomAndPan="magnify"><defs><filter height="300%" id="f1dxgwtc1z3vgh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="508" x="756.5" y="23.5352">1.1.4.a. Send notification to Participant (Payer/Payee) (single message)</text><rect fill="#D3D3D3" height="830.8535" style="stroke: #A80036; stroke-width: 1.0;" width="179" x="4" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="7" y="47.0566">Financial Service Provider</text><rect fill="#ADD8E6" height="830.8535" style="stroke: #A80036; stroke-width: 1.0;" width="241" x="659" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="701" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="830.8535" style="stroke: #A80036; stroke-width: 1.0;" width="1058" x="930" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="1408.5" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="588.5898" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="774.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1002.5" y="209.3965"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="198.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1281.5" y="293.0176"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="179.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1281.5" y="528.1914"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="140.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1485.5" y="322.3281"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="121.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1608" y="557.502"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1931" y="586.8125"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="574.5898" style="stroke: #000000; stroke-width: 2.0;" width="1964" x="44" y="170.7754"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="245.4844" style="stroke: #000000; stroke-width: 2.0;" width="900" x="653" y="254.3965"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="93" x2="93" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="779" x2="779" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1007" x2="1007" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1286.5" x2="1286.5" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1490" x2="1490" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1613" x2="1613" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1936" x2="1936" y1="153.7754" y2="762.3652"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="64" y="134.334">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="54" y="150.8223">Participant</text><ellipse cx="93.5" cy="63.7988" fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93.5,71.7988 L93.5,98.7988 M80.5,79.7988 L106.5,79.7988 M93.5,98.7988 L80.5,113.7988 M93.5,98.7988 L106.5,113.7988 " fill="none" filter="url(#f1dxgwtc1z3vgh)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="64" y="774.9004">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="54" y="791.3887">Participant</text><ellipse cx="93.5" cy="804.3418" fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93.5,812.3418 L93.5,839.3418 M80.5,820.3418 L106.5,820.3418 M93.5,839.3418 L80.5,854.3418 M93.5,839.3418 L106.5,854.3418 " fill="none" filter="url(#f1dxgwtc1z3vgh)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="663" y="150.8223">ML API Notification Event Handler</text><ellipse cx="779.5" cy="121.2871" fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="775.5,109.2871,781.5,104.2871,779.5,109.2871,781.5,114.2871,775.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="663" y="774.9004">ML API Notification Event Handler</text><ellipse cx="779.5" cy="793.8535" fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="775.5,781.8535,781.5,776.8535,779.5,781.8535,781.5,786.8535,775.5,781.8535" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="938" y="114.2871"/><rect fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="934" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="941" y="138.8223">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="938" y="761.3652"/><rect fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="934" y="765.3652"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="941" y="785.9004">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1219.5" y="150.8223">Central Service API</text><path d="M1266,109.2871 L1266,133.2871 M1266,121.2871 L1283,121.2871 " fill="none" filter="url(#f1dxgwtc1z3vgh)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1295" cy="121.2871" fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="1219.5" y="774.9004">Central Service API</text><path d="M1266,781.8535 L1266,805.8535 M1266,793.8535 L1283,793.8535 " fill="none" filter="url(#f1dxgwtc1z3vgh)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1295" cy="793.8535" fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1442" y="114.2871"/><rect fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1438" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1445" y="138.8223">Event-Topic</text><rect fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1442" y="761.3652"/><rect fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1438" y="765.3652"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1445" y="785.9004">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1553" y="150.8223">Notification DAO</text><ellipse cx="1613" cy="121.2871" fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1625" y1="135.2871" y2="135.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1553" y="774.9004">Notification DAO</text><ellipse cx="1613" cy="793.8535" fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1601" x2="1625" y1="807.8535" y2="807.8535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1888" y="150.8223">Central Store</text><path d="M1918,101.2871 C1918,91.2871 1936,91.2871 1936,91.2871 C1936,91.2871 1954,91.2871 1954,101.2871 L1954,127.2871 C1954,137.2871 1936,137.2871 1936,137.2871 C1936,137.2871 1918,137.2871 1918,127.2871 L1918,101.2871 " fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1918,101.2871 C1918,111.2871 1936,111.2871 1936,111.2871 C1936,111.2871 1954,111.2871 1954,101.2871 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1888" y="774.9004">Central Store</text><path d="M1918,787.8535 C1918,777.8535 1936,777.8535 1936,777.8535 C1936,777.8535 1954,777.8535 1954,787.8535 L1954,813.8535 C1954,823.8535 1936,823.8535 1936,823.8535 C1936,823.8535 1918,823.8535 1918,813.8535 L1918,787.8535 " fill="#FEFECE" filter="url(#f1dxgwtc1z3vgh)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1918,787.8535 C1918,797.8535 1936,797.8535 1936,797.8535 C1936,797.8535 1954,797.8535 1954,787.8535 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="588.5898" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="774.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1002.5" y="209.3965"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="198.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1281.5" y="293.0176"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="179.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1281.5" y="528.1914"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="140.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1485.5" y="322.3281"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="121.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1608" y="557.502"/><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1931" y="586.8125"/><path d="M44,170.7754 L296,170.7754 L296,177.7754 L286,187.7754 L44,187.7754 L44,170.7754 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="574.5898" style="stroke: #000000; stroke-width: 2.0;" width="1964" x="44" y="170.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="59" y="184.3438">Send notification to Participant</text><polygon fill="#A80036" points="990.5,205.3965,1000.5,209.3965,990.5,213.3965,994.5,209.3965" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="784.5" x2="996.5" y1="209.3965" y2="209.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="791.5" y="204.6543">1</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="804.5" y="204.6543">Consume Notification event</text><path d="M653,254.3965 L868,254.3965 L868,261.3965 L858,271.3965 L653,271.3965 L653,254.3965 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="245.4844" style="stroke: #000000; stroke-width: 2.0;" width="900" x="653" y="254.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="668" y="267.9648">Persist Event Information</text><polygon fill="#A80036" points="1269.5,289.0176,1279.5,293.0176,1269.5,297.0176,1273.5,293.0176" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="784.5" x2="1275.5" y1="293.0176" y2="293.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="791.5" y="288.2754">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342" x="804.5" y="288.2754">Request to persist event information - POST - /events</text><polygon fill="#A80036" points="1473.5,318.3281,1483.5,322.3281,1473.5,326.3281,1477.5,322.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1291.5" x2="1479.5" y1="322.3281" y2="322.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1298.5" y="317.5859">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1311.5" y="317.5859">Publish event information</text><rect fill="#FFFFFF" filter="url(#f1dxgwtc1z3vgh)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="210" x="1435" y="355.3281"/><polygon fill="#EEEEEE" points="1435,355.3281,1499,355.3281,1499,362.3281,1489,372.3281,1435,372.3281,1435,355.3281" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1448" y="369.8965">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="1441" y="388.8965">Event Handler Consume {9.1.0.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1445" y="404.207"/><polygon fill="#A80036" points="1302.5,458.5703,1292.5,462.5703,1302.5,466.5703,1298.5,462.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1296.5" x2="1489.5" y1="462.5703" y2="462.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1308.5" y="457.8281">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1321.5" y="457.8281">Return success</text><polygon fill="#A80036" points="795.5,487.8809,785.5,491.8809,795.5,495.8809,791.5,491.8809" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="789.5" x2="1285.5" y1="491.8809" y2="491.8809"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="801.5" y="487.1387">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="814.5" y="487.1387">Return success</text><polygon fill="#A80036" points="1269.5,524.1914,1279.5,528.1914,1269.5,532.1914,1273.5,528.1914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="784.5" x2="1275.5" y1="528.1914" y2="528.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="791.5" y="523.4492">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="465" x="804.5" y="523.4492">Request Notification details for Participant - GET - /notifications/DFSP(n)</text><polygon fill="#A80036" points="1596,553.502,1606,557.502,1596,561.502,1600,557.502" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1291.5" x2="1602" y1="557.502" y2="557.502"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1298.5" y="552.7598">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="1311.5" y="552.7598">Fetch Notification details for Participant</text><polygon fill="#A80036" points="1919,582.8125,1929,586.8125,1919,590.8125,1923,586.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1618" x2="1925" y1="586.8125" y2="586.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1625" y="582.0703">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="1638" y="582.0703">Fetch Notification details for Participant</text><polygon fill="#FFFFE0" filter="url(#f1dxgwtc1z3vgh)" points="1884,599.8125,1988,599.8125,1998,610.8125,1988,622.8125,1884,622.8125,1874,610.8125,1884,599.8125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1886" y="616.3809">transferPosition</text><polygon fill="#A80036" points="1629,645.4336,1619,649.4336,1629,653.4336,1625,649.4336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1623" x2="1935" y1="649.4336" y2="649.4336"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1635" y="644.6914">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="1648" y="644.6914">Retrieved Notification details for Participant</text><polygon fill="#A80036" points="1302.5,674.7441,1292.5,678.7441,1302.5,682.7441,1298.5,678.7441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1296.5" x2="1612" y1="678.7441" y2="678.7441"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1308.5" y="674.002">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="1330.5" y="674.002">Return Notification details for Participant</text><polygon fill="#A80036" points="795.5,704.0547,785.5,708.0547,795.5,712.0547,791.5,708.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="789.5" x2="1285.5" y1="708.0547" y2="708.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="801.5" y="703.3125">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="823.5" y="703.3125">Return Notification details for Participant</text><polygon fill="#A80036" points="104.5,733.3652,94.5,737.3652,104.5,741.3652,100.5,737.3652" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="98.5" x2="773.5" y1="737.3652" y2="737.3652"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="110.5" y="732.623">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="589" x="132.5" y="732.623">Callback with Prepare result to Participant to specified URL - PUT - /&lt;dfsp-host&gt;&gt;/transfers</text><!--
@startuml
title 1.1.4.a. Send notification to Participant (Payer/Payee) (single message)

autonumber


actor "DFSP(n)\nParticipant" as DFSP
control "ML API Notification Event Handler" as NOTIFY_HANDLER
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENTS
entity "Notification DAO" as NOTIFY_DAO
database "Central Store" as DB

box "Financial Service Provider" #lightGray
	participant DFSP
end box

box "ML API Adapter Service" #LightBlue
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
participant TOPIC_NOTIFICATIONS
    participant CSAPI
    participant TOPIC_EVENTS
    participant NOTIFY_DAO
    participant DB
end box

activate NOTIFY_HANDLER
group Send notification to Participant
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: <color #FF0000>**Consume Notification event**</color>
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS

    group Persist Event Information
        NOTIFY_HANDLER -> CSAPI: Request to persist event information - POST - /events
        activate CSAPI
        CSAPI -> TOPIC_EVENTS: Publish event information
        activate TOPIC_EVENTS
        |||
        ref over TOPIC_EVENTS :  Event Handler Consume {9.1.0.} \n
        |||
        TOPIC_EVENTS - -> CSAPI: Return success
        deactivate TOPIC_EVENTS
        CSAPI - -> NOTIFY_HANDLER: Return success
        deactivate CSAPI
    end
    NOTIFY_HANDLER -> CSAPI: Request Notification details for Participant - GET - /notifications/DFSP(n)
    activate CSAPI
    CSAPI -> NOTIFY_DAO: Fetch Notification details for Participant
    activate NOTIFY_DAO
    NOTIFY_DAO -> DB: Fetch Notification details for Participant
    activate DB
    hnote over DB #lightyellow
        transferPosition
    end note
    DB -> NOTIFY_DAO: Retrieved Notification details for Participant
    deactivate DB
    NOTIFY_DAO - -> CSAPI: Return Notification details for Participant
    deactivate NOTIFY_DAO
    CSAPI - -> NOTIFY_HANDLER: Return Notification details for Participant
    deactivate CSAPI
    NOTIFY_HANDLER - -> DFSP: Callback with Prepare result to Participant to specified URL - PUT - /<dfsp-host>>/transfers
end
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.13.5
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>