<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1810.2001px" preserveAspectRatio="none" style="width:774px;height:1810px;" version="1.1" viewBox="0 0 774 1810" width="774px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ex2kqtzos8ty" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="235.2" x="270" y="14.1211">Returns Settlement(s) as per parameters/filter criteria</text><rect fill="#FFB6C1" height="1783.1766" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="67.2" x="183.6" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="192.9" y="28.234">Central HUB</text><rect fill="#90EE90" height="1783.1766" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="294.3" x="277.5" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="387.45" y="28.234">Settlement Service</text><rect fill="#FFFFE0" height="1783.1766" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="68.4" x="627" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="628.8" y="28.234">Central Services</text><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="1644.218" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="214.2" y="88.3723"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="1366.5047" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="203.4492"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="136.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="1596.5133"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="151.6359" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="532.2" y="230.0356"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="225.1266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="532.2" y="422.8442"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="335.3625" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="532.2" y="674.5571"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="74.318" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="658.2" y="247.8082"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="111.0633" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="658.2" y="440.6168"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="202.9266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="658.2" y="692.3297"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="1649.2044" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="759.6" x="7.8" y="92.5723"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="1346.7188" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="747.6" x="13.8" y="390.8578"/><rect fill="#FFFFFF" height="162.6363" style="stroke: none; stroke-width: 0.6000000238418579;" width="747.6" x="13.8" y="1574.9403"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="217.2" x2="217.2" y1="82.3723" y2="1751.9766"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="326.7" x2="326.7" y1="82.3723" y2="1751.9766"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="535.2" x2="535.2" y1="82.3723" y2="1751.9766"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="661.2" x2="661.2" y1="82.3723" y2="1751.9766"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="186" y="80.6004">Hub Employee</text><ellipse cx="217.2" cy="38.2793" fill="#FEFECE" filter="url(#f1ex2kqtzos8ty)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M217.2,43.0793 L217.2,59.2793 M209.4,47.8793 L225,47.8793 M217.2,59.2793 L209.4,68.2793 M217.2,59.2793 L225,68.2793 " fill="none" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="186" y="1759.4977">Hub Employee</text><ellipse cx="217.2" cy="1767.2696" fill="#FEFECE" filter="url(#f1ex2kqtzos8ty)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M217.2,1772.0696 L217.2,1788.2696 M209.4,1776.8696 L225,1776.8696 M217.2,1788.2696 L209.4,1797.2696 M217.2,1788.2696 L225,1797.2696 " fill="none" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="80.6004">Settlement Service API</text><path d="M314.7,55.6793 L314.7,70.0793 M314.7,62.8793 L324.9,62.8793 " fill="none" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="62.8793" fill="#FEFECE" filter="url(#f1ex2kqtzos8ty)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="1759.4977">Settlement Service API</text><path d="M314.7,1763.6696 L314.7,1778.0696 M314.7,1770.8696 L324.9,1770.8696 " fill="none" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="1770.8696" fill="#FEFECE" filter="url(#f1ex2kqtzos8ty)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="501" y="80.6004">Settlement DAO</text><ellipse cx="535.2" cy="62.8793" fill="#FEFECE" filter="url(#f1ex2kqtzos8ty)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="528" x2="542.4" y1="71.2793" y2="71.2793"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="501" y="1759.4977">Settlement DAO</text><ellipse cx="535.2" cy="1770.8696" fill="#FEFECE" filter="url(#f1ex2kqtzos8ty)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="528" x2="542.4" y1="1779.2696" y2="1779.2696"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="632.4" y="80.6004">Central Store</text><path d="M650.4,50.8793 C650.4,44.8793 661.2,44.8793 661.2,44.8793 C661.2,44.8793 672,44.8793 672,50.8793 L672,66.4793 C672,72.4793 661.2,72.4793 661.2,72.4793 C661.2,72.4793 650.4,72.4793 650.4,66.4793 L650.4,50.8793 " fill="#FEFECE" filter="url(#f1ex2kqtzos8ty)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M650.4,50.8793 C650.4,56.8793 661.2,56.8793 661.2,56.8793 C661.2,56.8793 672,56.8793 672,50.8793 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="632.4" y="1759.4977">Central Store</text><path d="M650.4,1767.2696 C650.4,1761.2696 661.2,1761.2696 661.2,1761.2696 C661.2,1761.2696 672,1761.2696 672,1767.2696 L672,1782.8696 C672,1788.8696 661.2,1788.8696 661.2,1788.8696 C661.2,1788.8696 650.4,1788.8696 650.4,1782.8696 L650.4,1767.2696 " fill="#FEFECE" filter="url(#f1ex2kqtzos8ty)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M650.4,1767.2696 C650.4,1773.2696 661.2,1773.2696 661.2,1773.2696 C661.2,1773.2696 672,1773.2696 672,1767.2696 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="1644.218" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="214.2" y="88.3723"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="1366.5047" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="203.4492"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="136.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="1596.5133"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="151.6359" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="532.2" y="230.0356"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="225.1266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="532.2" y="422.8442"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="335.3625" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="532.2" y="674.5571"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="74.318" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="658.2" y="247.8082"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="111.0633" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="658.2" y="440.6168"/><rect fill="#FFFFFF" filter="url(#f1ex2kqtzos8ty)" height="202.9266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="658.2" y="692.3297"/><path d="M7.8,92.5723 L143.4,92.5723 L143.4,96.7723 L137.4,102.7723 L7.8,102.7723 L7.8,92.5723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="1649.2044" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="759.6" x="7.8" y="92.5723"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108.6" x="16.8" y="100.7133">Request Settlement Details</text><path d="M223.2,105.9586 L223.2,185.1586 L414,185.1586 L414,111.9586 L408,105.9586 L223.2,105.9586 " fill="#FFFF00" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M408,105.9586 L408,111.9586 L414,111.9586 L408,105.9586 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="226.8" y="116.4996">Filtering Params:</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="178.2" x="226.8" y="125.6859">&amp;settlementWindowId=/settlementWindow/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="103.8" x="226.8" y="134.8723">&amp;currencyId=/currency/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="120.6" x="226.8" y="144.0586">&amp;participantId=/participant/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="99" x="226.8" y="153.2449">&amp;accountId=/account/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="226.8" y="162.4313">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="151.8" x="226.8" y="171.6176">&amp;fromDateTime={yyyy-mm-ddThh:mm}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141.6" x="226.8" y="180.8039">&amp;toDateTime={yyyy-mm-ddThh:mm}</text><polygon fill="#A80036" points="316.8,201.0492,322.8,203.4492,316.8,205.8492,319.2,203.4492" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="220.2" x2="320.4" y1="203.4492" y2="203.4492"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="224.4" y="200.7902">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="84.6" x="232.2" y="200.7902">GET - /settlement/{id}</text><polygon fill="#A80036" points="525,227.6356,531,230.0356,525,232.4356,527.4,230.0356" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="528.6" y1="230.0356" y2="230.0356"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="222.9697">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="100.2" x="342" y="218.3766">Retrieve settlement details</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="342" y="227.5629">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="388.2" y="227.5629">2001</text><polygon fill="#A80036" points="651,245.4082,657,247.8082,651,250.2082,653.4,247.8082" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="538.2" x2="654.6" y1="247.8082" y2="247.8082"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="542.4" y="245.1492">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="97.8" x="550.2" y="245.1492">Select settlement from DB</text><polygon fill="#FFFFE0" filter="url(#f1ex2kqtzos8ty)" points="601.2,255.7945,721.2,255.7945,727.2,280.9945,721.2,306.1945,601.2,306.1945,595.2,280.9945,601.2,255.7945" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="51" x="602.4" y="265.7356">SELECT FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="602.4" y="274.9219">settlement</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="47.4" x="612" y="284.1082">settlementId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117.6" x="602.4" y="293.2945">settlementSettlementChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66" x="612" y="302.4809">settlementStateId</text><polygon fill="#A80036" points="544.8,319.7262,538.8,322.1262,544.8,324.5262,542.4,322.1262" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="541.2" x2="660.6" y1="322.1262" y2="322.1262"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="548.4" y="319.4672">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="556.2" y="319.4672">Return data</text><path d="M367.2,330.1125 L367.2,363.1125 L526.8,363.1125 L526.8,336.1125 L520.8,330.1125 L367.2,330.1125 " fill="#D3D3D3" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M520.8,330.1125 L520.8,336.1125 L526.8,336.1125 L520.8,330.1125 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="370.8" y="340.6535">settlementData</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="147" x="370.8" y="349.8399">Contains information about settlement</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="370.8" y="359.0262">-state</text><polygon fill="#A80036" points="336.6,379.2715,330.6,381.6715,336.6,384.0715,334.2,381.6715" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="534.6" y1="381.6715" y2="381.6715"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="379.0125">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="348" y="379.0125">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="375" y="379.0125">settlementData</text><path d="M13.8,390.8578 L51,390.8578 L51,395.0578 L45,401.0578 L13.8,401.0578 L13.8,390.8578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="1346.7188" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="747.6" x="13.8" y="390.8578"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="22.8" y="398.9988">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="60" y="398.4387">[settlement found]</text><polygon fill="#A80036" points="525,420.4442,531,422.8442,525,425.2442,527.4,422.8442" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="528.6" y1="422.8442" y2="422.8442"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="415.7783">6</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="183" x="342" y="411.1852">Retrieve full information for settlement windows</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="342" y="420.3715">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="388.2" y="420.3715">2001</text><polygon fill="#A80036" points="651,438.2168,657,440.6168,651,443.0168,653.4,440.6168" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="538.2" x2="654.6" y1="440.6168" y2="440.6168"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="542.4" y="437.9578">7</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="550.2" y="437.9578">Select from DB</text><polygon fill="#FFFFE0" filter="url(#f1ex2kqtzos8ty)" points="597,448.6031,725.4,448.6031,731.4,491.8031,725.4,535.6031,597,535.6031,591,491.8031,597,448.6031" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118.2" x="598.2" y="458.5442">settlementSettlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="47.4" x="607.8" y="467.7305">settlementId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="607.8" y="476.9168">settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="598.2" y="486.1031">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="45" x="607.8" y="495.2895">createdDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="598.2" y="504.4758">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="607.8" y="513.6621">reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="101.4" x="607.8" y="522.8485">createdDate (changedDate)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="600.6" y="532.0348"/><polygon fill="#A80036" points="544.8,549.2801,538.8,551.6801,544.8,554.0801,542.4,551.6801" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="541.2" x2="660.6" y1="551.6801" y2="551.6801"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="548.4" y="549.0211">8</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="556.2" y="549.0211">Return data</text><path d="M326.4,559.6664 L326.4,629.8664 L526.8,629.8664 L526.8,565.6664 L520.8,559.6664 L326.4,559.6664 " fill="#D3D3D3" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M520.8,559.6664 L520.8,565.6664 L526.8,565.6664 L520.8,559.6664 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49.8" x="330" y="570.2074">windowsList</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="187.8" x="330" y="579.3938">Contains about settlement windows in settlement</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="330" y="588.5801">-settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="30" x="330" y="597.7664">-reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="330" y="606.9528">-state</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="49.8" x="330" y="616.1391">-createdDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="54" x="330" y="625.3254">-changedDate</text><polygon fill="#A80036" points="336.6,645.5707,330.6,647.9707,336.6,650.3707,334.2,647.9707" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="534.6" y1="647.9707" y2="647.9707"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="645.3117">9</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="348" y="645.3117">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49.8" x="375" y="645.3117">windowsList</text><polygon fill="#A80036" points="525,672.1571,531,674.5571,525,676.9571,527.4,674.5571" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="528.6" y1="674.5571" y2="674.5571"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="334.2" y="667.4912">10</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="169.2" x="347.4" y="662.8981">Retrieve information for settlement accounts</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="347.4" y="672.0844">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="393.6" y="672.0844">2001</text><polygon fill="#A80036" points="651,689.9297,657,692.3297,651,694.7297,653.4,692.3297" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="538.2" x2="654.6" y1="692.3297" y2="692.3297"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="542.4" y="689.6707">11</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="555.6" y="689.6707">Select from DB</text><polygon fill="#FFFFE0" filter="url(#f1ex2kqtzos8ty)" points="572.4,700.316,749.4,700.316,755.4,789.716,749.4,879.1161,572.4,879.1161,566.4,789.716,572.4,700.316" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="51" x="573.6" y="710.2571">SELECT FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73.2" x="573.6" y="719.4434">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="36.6" x="583.2" y="728.6297">transferid</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="583.2" y="737.816">settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76.2" x="573.6" y="747.0024">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="36.6" x="583.2" y="756.1887">transferId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="583.2" y="765.375">participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="573.6" y="774.5614">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="583.2" y="783.7477">participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="48" x="583.2" y="792.934">participantId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="583.2" y="802.1203">currencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124.2" x="573.6" y="811.3067">settlementParticipantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="583.2" y="820.493">settlementId - ?</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="583.2" y="829.6793">participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="42" x="583.2" y="838.8657">netAmount</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174.6" x="573.6" y="848.052">settlementSettlementCurrencyStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66" x="583.2" y="857.2383">settlementStateId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="583.2" y="866.4246">reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="576" y="875.611"/><polygon fill="#A80036" points="544.8,892.8563,538.8,895.2563,544.8,897.6563,542.4,895.2563" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="541.2" x2="660.6" y1="895.2563" y2="895.2563"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="548.4" y="892.5973">12</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="561.6" y="892.5973">Return data</text><path d="M321,903.2426 L321,991.4426 L526.8,991.4426 L526.8,909.2426 L520.8,903.2426 L321,903.2426 " fill="#D3D3D3" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M520.8,903.2426 L520.8,909.2426 L526.8,909.2426 L520.8,903.2426 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.8" x="324.6" y="913.7836">settlementAccountsList</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="193.2" x="324.6" y="922.97">Holds information about all accounts in settlement</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="324.6" y="932.1563">-settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="334.2" y="941.3426">-participantId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="123.6" x="343.8" y="950.5289">-participantCurrencyId (account)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="30" x="343.8" y="959.7153">-reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="343.8" y="968.9016">-state</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.8" x="343.8" y="978.0879">-amount (netAmount)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="44.4" x="343.8" y="987.2743">-currencyId</text><polygon fill="#A80036" points="336.6,1007.5196,330.6,1009.9196,336.6,1012.3196,334.2,1009.9196" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="534.6" y1="1009.9196" y2="1009.9196"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="340.2" y="1007.2606">13</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="353.4" y="1007.2606">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.8" x="380.4" y="1007.2606">settlementAccountsList</text><path d="M333,1017.9059 L333,1216.5059 L525,1216.5059 L525,1023.9059 L519,1017.9059 L333,1017.9059 " fill="#FFC0CB" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M519,1017.9059 L519,1023.9059 L525,1023.9059 L519,1017.9059 " fill="#FFC0CB" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93.6" x="336.6" y="1028.4469">Design still in progress</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="339" y="1037.6332"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="118.8" x="336.6" y="1046.8196">settlementId = /settlement/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="336.6" y="1056.0059">loop</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="169.8" x="346.2" y="1065.1922">settlementWindowId = &amp;settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="121.2" x="346.2" y="1074.3786">createdDate &gt;= &amp;fromDateTime</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="111" x="346.2" y="1083.5649">createdDate &lt;= &amp;toDateTime</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="346.2" y="1092.7512">loop</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="112.2" x="355.8" y="1101.9375">participantId = &amp;participantId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="355.8" y="1111.1239">loop</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="127.8" x="365.4" y="1120.3102">participantCurrencyId = &amp;account</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="365.4" y="1129.4965">currencyId = &amp;currency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="365.4" y="1138.6829">state = &amp;state</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="13.8" x="355.8" y="1147.8692">end</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="13.8" x="346.2" y="1157.0555">end</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="13.8" x="336.6" y="1166.2418">end</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="339" y="1175.4282"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="339" y="1184.6145"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="129" x="336.6" y="1193.8008">Apply filters to datalist(s) from DB</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="339" y="1202.9872"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="87" x="336.6" y="1212.1735">Format reply messages</text><polygon fill="#A80036" points="336.6,1232.4188,330.6,1234.8188,336.6,1237.2188,334.2,1234.8188" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="534.6" y1="1234.8188" y2="1234.8188"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="340.2" y="1232.1598">14</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="128.4" x="353.4" y="1232.1598">Operation successfully completed</text><path d="M152.4,1242.8051 L152.4,1551.8051 L318.6,1551.8051 L318.6,1248.8051 L312.6,1242.8051 L152.4,1242.8051 " fill="#FFFF00" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,1242.8051 L312.6,1248.8051 L318.6,1248.8051 L312.6,1242.8051 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="156" y="1253.3461">[</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="160.8" y="1262.5325">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="165.6" y="1271.7188">"Id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="165.6" y="1280.9051">"State": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="87" x="165.6" y="1290.0915">"settlementWindows": [</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="170.4" y="1299.2778">[</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="175.2" y="1308.4641">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="180" y="1317.6504">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="180" y="1326.8368">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="180" y="1336.0231">"state": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="180" y="1345.2094">"createdDate": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="180" y="1354.3958">"changedDate": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="175.2" y="1363.5821">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="170.4" y="1372.7684">]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="4.8" x="165.6" y="1381.9547">],</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="57.6" x="165.6" y="1391.1411">"Participants": [</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="170.4" y="1400.3274">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="175.2" y="1409.5137">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="47.4" x="175.2" y="1418.7001">"accounts": [</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="180" y="1427.8864">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="184.8" y="1437.0727">"id": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="184.8" y="1446.259">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="124.8" x="184.8" y="1455.4454">"state": "PENDING-SETTLEMENT",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="95.4" x="184.8" y="1464.6317">"netSettlementAmount": {</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="46.8" x="189.6" y="1473.818">"amount": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="71.4" x="189.6" y="1483.0044">"currency": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="184.8" y="1492.1907">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="180" y="1501.377">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="175.2" y="1510.5633">]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="170.4" y="1519.7497">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="165.6" y="1528.936">]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="160.8" y="1538.1223">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="156" y="1547.3087">]</text><polygon fill="#A80036" points="226.8,1567.554,220.8,1569.954,226.8,1572.354,224.4,1569.954" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="223.2" x2="326.4" y1="1569.954" y2="1569.954"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="230.4" y="1567.295">15</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="243.6" y="1567.295">Return results</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="13.8" x2="761.4" y1="1575.5403" y2="1575.5403"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="16.8" y="1581.9212">[</text><text fill="#FF0000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70.2" x="19.2" y="1581.9212">Settlement not found</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="89.4" y="1581.9212">]</text><polygon fill="#A80036" points="336.6,1594.1133,330.6,1596.5133,336.6,1598.9133,334.2,1596.5133" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="534.6" y1="1596.5133" y2="1596.5133"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="340.2" y="1593.8544">16</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141" x="353.4" y="1593.8544">settlement not found - Return ERROR</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="330" x2="355.2" y1="1614.286" y2="1614.286"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="355.2" x2="355.2" y1="1614.286" y2="1622.086"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="330.6" x2="355.2" y1="1622.086" y2="1622.086"/><polygon fill="#A80036" points="336.6,1619.686,330.6,1622.086,336.6,1624.486,334.2,1622.086" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="334.2" y="1611.4407">17</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="63.6" x="347.4" y="1611.4407">Update Event log</text><path d="M333,1629.886 L333,1653.886 L457.2,1653.886 L457.2,1635.886 L451.2,1629.886 L333,1629.886 " fill="#ADD8E6" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M451.2,1629.886 L451.2,1635.886 L457.2,1635.886 L451.2,1629.886 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.2" x="336.6" y="1640.427">Log ERROR Messages.</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="111.6" x="336.6" y="1649.6133">Update Event log with ERROR.</text><path d="M19.8,1662.6587 L19.8,1714.2587 L318.6,1714.2587 L318.6,1668.6587 L312.6,1662.6587 L19.8,1662.6587 " fill="#FFFF00" filter="url(#f1ex2kqtzos8ty)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,1662.6587 L312.6,1668.6587 L318.6,1668.6587 L312.6,1662.6587 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="1673.1997">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="41.4" x="28.2" y="1682.386">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="281.4" x="28.2" y="1691.5723">"code": "(ERROR response code eg. '404' - Defined in swagger definition))",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="72" x="28.2" y="1700.7587">"message": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="1709.945">}</text><polygon fill="#A80036" points="223.8,1730.1903,217.8,1732.5903,223.8,1734.9903,221.4,1732.5903" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="220.2" x2="326.4" y1="1732.5903" y2="1732.5903"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="227.4" y="1729.9313">18</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="51.6" x="240.6" y="1729.9313">Return ERROR</text><!--
@startuml
title Returns Settlement(s) as per parameters/filter criteria

autonumber

actor "Hub Employee" as OPERATOR

boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO

database "Central Store" as DB

box "Central HUB" #LightPink
    participant OPERATOR
end box

box "Settlement Service" #LightGreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #LightYellow
    participant DB
end box

group Request Settlement Details
    activate OPERATOR
    note right of OPERATOR #Yellow
        **Filtering Params:**
        &settlementWindowId=/settlementWindow/{id}
        &currencyId=/currency/{id}
        &participantId=/participant/{id}
        &accountId=/account/{id}
        &state={state}
        &fromDateTime={yyyy-mm-ddThh:mm}
        &toDateTime={yyyy-mm-ddThh:mm}
    end note

    OPERATOR -> SSAPI: GET - /settlement/{id}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Retrieve settlement details\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO

    SETTLE_DAO -> DB: Select settlement from DB
    activate DB
    hnote over DB #LightYellow
        SELECT FROM
        **settlement**
            settlementId
        **settlementSettlementChange**
            settlementStateId
    end hnote

        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **settlementData**
            Contains information about settlement
            -state
        end note
        SSAPI <- - SETTLE_DAO: Return **settlementData**
        deactivate SETTLE_DAO
    alt settlement found

        SSAPI -> SETTLE_DAO: Retrieve full information for settlement windows\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Select from DB
        activate DB
        hnote over DB #LightYellow
            **settlementSettlementWindow**
                settlementId
                settlementWindowId
            **settlementWindow**
                createdDate
            **settlementWindowStateChange**
                reason
                createdDate (changedDate)

        end hnote
        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **windowsList**
            Contains about settlement windows in settlement
            -settlementWindowId
            -reason
            -state
            -createdDate
            -changedDate
        end note
        SSAPI <- - SETTLE_DAO: Return **windowsList**
        deactivate SETTLE_DAO

        SSAPI -> SETTLE_DAO: Retrieve information for settlement accounts\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Select from DB
        activate DB
        hnote over DB #LightYellow
            SELECT FROM
            **transferFulfilment**
                transferid
                settlementWindowId
            **transferParticipant**
                transferId
                participantCurrencyId
            **participantCurrency**
                participantCurrencyId
                participantId
                currencyId
            **settlementParticipantCurrency**
                settlementId - ?
                participantCurrencyId
                netAmount
            **settlementSettlementCurrencyStateChange**
                settlementStateId
                reason

        end hnote
        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **settlementAccountsList**
            Holds information about all accounts in settlement
            -settlementWindowId
                -participantId
                    -participantCurrencyId (account)
                    -reason
                    -state
                    -amount (netAmount)
                    -currencyId
        end note
        SSAPI <- - SETTLE_DAO: Return **settlementAccountsList**
        deactivate SETTLE_DAO

        note right of SSAPI #Pink
        **Design still in progress**

        settlementId = /settlement/{id}
        loop
            settlementWindowId = &settlementWindowId
            createdDate >= &fromDateTime
            createdDate <= &toDateTime
            loop
                participantId = &participantId
                loop
                    participantCurrencyId = &account
                    currencyId = &currency
                    state = &state
                end
            end
        end


        Apply filters to datalist(s) from DB

        Format reply messages
        end note

        SSAPI <- - SETTLE_DAO: Operation successfully completed
        note left of SSAPI #Yellow
            [
              {
                "Id": 0,
                "State": "string",
                "settlementWindows": [
                  [
                    {
                      "id": 0,
                      "reason": "string",
                      "state": "string",
                      "createdDate": "string",
                      "changedDate": "string"
                    }
                  ]
                ],
                "Participants": [
                  {
                    "id": 0,
                    "accounts": [
                      {
                        "id": "string",
                        "reason": "string",
                        "state": "PENDING-SETTLEMENT",
                        "netSettlementAmount": {
                          "amount": 0,
                          "currency": "string"
                        }
                      }
                    ]
                  }
                ]
              }
            ]
        end note
        OPERATOR <- - SSAPI: Return results
    deactivate SSAPI
    else <color #FF0000><b>Settlement not found</b></color>
        SETTLE_DAO - -> SSAPI: settlement not found - Return ERROR
        deactivate SETTLE_DAO
        activate SSAPI
        SSAPI - -> SSAPI: Update Event log
        note right of SSAPI #LightBlue
            Log ERROR Messages.
            Update Event log with ERROR.
        end note
        note left of SSAPI #Yellow
            {
              "status": 0,
              "code": "(ERROR response code eg. '404' - Defined in swagger definition))",
              "message": "string"
            }
        end note
        OPERATOR <- - SSAPI: Return ERROR
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b29
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>