<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2930px" preserveAspectRatio="none" style="width:1095px;height:2930px;" version="1.1" viewBox="0 0 1095 2930" width="1095px" zoomAndPan="magnify"><defs><filter height="300%" id="fwhtss73mrfkf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="433" x="332" y="23.5352">6.2.0. Returns Settlement(s) as per parameters/filter criteria</text><rect fill="#FFB6C1" height="2885.0293" style="stroke: #A80036; stroke-width: 1.0;" width="112" x="29" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="44.5" y="47.0566">Central HUB</text><rect fill="#90EE90" height="2885.0293" style="stroke: #A80036; stroke-width: 1.0;" width="490.5" x="267.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="450.75" y="47.0566">Settlement Service</text><rect fill="#FFFFE0" height="2885.0293" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="850" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="853" y="47.0566">Central Services</text><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="2653.7422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="80" y="147.2871"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="2277.5078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="345" y="339.3926"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="252.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="692" y="384.0137"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="374.9004" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="692" y="705.3613"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="558.627" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="692" y="1124.8828"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="123.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="902" y="413.3242"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="185.1055" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="902" y="734.6719"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="338.2109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="902" y="1154.1934"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="2661.7422" style="stroke: #000000; stroke-width: 2.0;" width="1071" x="13" y="154.2871"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="2157.5996" style="stroke: #000000; stroke-width: 2.0;" width="1051" x="23" y="651.4297"/><rect fill="#FFFFFF" height="184.1289" style="stroke: none; stroke-width: 1.0;" width="1051" x="23" y="2624.9004"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="85" x2="85" y1="137.2871" y2="2833.0293"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="349.5" x2="349.5" y1="137.2871" y2="2833.0293"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="697" x2="697" y1="137.2871" y2="2833.0293"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="907" x2="907" y1="137.2871" y2="2833.0293"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="33" y="134.334">Hub Employee</text><ellipse cx="85" cy="63.7988" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M85,71.7988 L85,98.7988 M72,79.7988 L98,79.7988 M85,98.7988 L72,113.7988 M85,98.7988 L98,113.7988 " fill="none" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="33" y="2845.5645">Hub Employee</text><ellipse cx="85" cy="2858.5176" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M85,2866.5176 L85,2893.5176 M72,2874.5176 L98,2874.5176 M85,2893.5176 L72,2908.5176 M85,2893.5176 L98,2908.5176 " fill="none" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="271.5" y="134.334">Settlement Service API</text><path d="M329.5,92.7988 L329.5,116.7988 M329.5,104.7988 L346.5,104.7988 " fill="none" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="358.5" cy="104.7988" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="271.5" y="2845.5645">Settlement Service API</text><path d="M329.5,2852.5176 L329.5,2876.5176 M329.5,2864.5176 L346.5,2864.5176 " fill="none" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="358.5" cy="2864.5176" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="640" y="134.334">Settlement DAO</text><ellipse cx="697" cy="104.7988" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="685" x2="709" y1="118.7988" y2="118.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="640" y="2845.5645">Settlement DAO</text><ellipse cx="697" cy="2864.5176" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="685" x2="709" y1="2878.5176" y2="2878.5176"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="859" y="134.334">Central Store</text><path d="M889,84.7988 C889,74.7988 907,74.7988 907,74.7988 C907,74.7988 925,74.7988 925,84.7988 L925,110.7988 C925,120.7988 907,120.7988 907,120.7988 C907,120.7988 889,120.7988 889,110.7988 L889,84.7988 " fill="#FEFECE" filter="url(#fwhtss73mrfkf)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M889,84.7988 C889,94.7988 907,94.7988 907,94.7988 C907,94.7988 925,94.7988 925,84.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="859" y="2845.5645">Central Store</text><path d="M889,2858.5176 C889,2848.5176 907,2848.5176 907,2848.5176 C907,2848.5176 925,2848.5176 925,2858.5176 L925,2884.5176 C925,2894.5176 907,2894.5176 907,2894.5176 C907,2894.5176 889,2894.5176 889,2884.5176 L889,2858.5176 " fill="#FEFECE" filter="url(#fwhtss73mrfkf)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M889,2858.5176 C889,2868.5176 907,2868.5176 907,2868.5176 C907,2868.5176 925,2868.5176 925,2858.5176 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="2653.7422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="80" y="147.2871"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="2277.5078" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="345" y="339.3926"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="252.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="692" y="384.0137"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="374.9004" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="692" y="705.3613"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="558.627" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="692" y="1124.8828"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="123.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="902" y="413.3242"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="185.1055" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="902" y="734.6719"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="338.2109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="902" y="1154.1934"/><path d="M13,154.2871 L239,154.2871 L239,161.2871 L229,171.2871 L13,171.2871 L13,154.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2661.7422" style="stroke: #000000; stroke-width: 2.0;" width="1071" x="13" y="154.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="28" y="167.8555">Request Settlement Details</text><path d="M95,176.5977 L95,308.5977 L413,308.5977 L413,186.5977 L403,176.5977 L95,176.5977 " fill="#FFFF00" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M403,176.5977 L403,186.5977 L413,186.5977 L403,176.5977 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="113" x="101" y="194.166">Filtering Params:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="297" x="101" y="209.4766">&amp;settlementWindowId=/settlementWindow/{id}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="101" y="224.7871">&amp;currencyId=/currency/{id}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="101" y="240.0977">&amp;participantId=/participant/{id}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="101" y="255.4082">&amp;accountId=/account/{id}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="101" y="270.7188">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="101" y="286.0293">&amp;fromDateTime={yyyy-mm-ddThh:mm}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="236" x="101" y="301.3398">&amp;toDateTime={yyyy-mm-ddThh:mm}</text><polygon fill="#A80036" points="333,335.3926,343,339.3926,333,343.3926,337,339.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90" x2="339" y1="339.3926" y2="339.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="97" y="334.6504">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="110" y="334.6504">GET - /settlement/{id}</text><polygon fill="#A80036" points="680,380.0137,690,384.0137,680,388.0137,684,384.0137" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="355" x2="686" y1="384.0137" y2="384.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="362" y="371.6162">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="375" y="363.9609">Retrieve settlement details</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="375" y="379.2715">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="452" y="379.2715">2001</text><polygon fill="#A80036" points="890,409.3242,900,413.3242,890,417.3242,894,413.3242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="896" y1="413.3242" y2="413.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="709" y="408.582">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="722" y="408.582">Select settlement from DB</text><polygon fill="#FFFFE0" filter="url(#fwhtss73mrfkf)" points="807,426.3242,1007,426.3242,1017,468.3242,1007,510.3242,807,510.3242,797,468.3242,807,426.3242" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="809" y="442.8926">SELECT FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="809" y="458.2031">settlement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="825" y="473.5137">settlementId</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="196" x="809" y="488.8242">settlementSettlementChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="825" y="504.1348">settlementStateId</text><polygon fill="#A80036" points="713,533.1875,703,537.1875,713,541.1875,709,537.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="707" x2="906" y1="537.1875" y2="537.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="719" y="532.4453">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="732" y="532.4453">Return data</text><path d="M417,550.1875 L417,605.1875 L683,605.1875 L683,560.1875 L673,550.1875 L417,550.1875 " fill="#D3D3D3" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M673,550.1875 L673,560.1875 L683,560.1875 L673,550.1875 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="423" y="567.7559">settlementData</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="423" y="583.0664">Contains information about settlement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="423" y="598.377">-state</text><polygon fill="#A80036" points="366,632.4297,356,636.4297,366,640.4297,362,636.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="360" x2="696" y1="636.4297" y2="636.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="372" y="631.6875">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="385" y="631.6875">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="430" y="631.6875">settlementData</text><path d="M23,651.4297 L85,651.4297 L85,658.4297 L75,668.4297 L23,668.4297 L23,651.4297 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2157.5996" style="stroke: #000000; stroke-width: 2.0;" width="1051" x="23" y="651.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="664.998">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="100" y="664.0645">[Settlement found]</text><polygon fill="#A80036" points="680,701.3613,690,705.3613,680,709.3613,684,705.3613" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="355" x2="686" y1="705.3613" y2="705.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="362" y="692.9639">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="375" y="685.3086">Retrieve full information for settlement windows</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="375" y="700.6191">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="452" y="700.6191">2001</text><polygon fill="#A80036" points="890,730.6719,900,734.6719,890,738.6719,894,734.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="896" y1="734.6719" y2="734.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="709" y="729.9297">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="722" y="729.9297">Select from DB</text><polygon fill="#FFFFE0" filter="url(#fwhtss73mrfkf)" points="800,747.6719,1014,747.6719,1024,819.6719,1014,892.6719,800,892.6719,790,819.6719,800,747.6719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="197" x="802" y="764.2402">settlementSettlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="818" y="779.5508">settlementId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="818" y="794.8613">settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="802" y="810.1719">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="818" y="825.4824">createdDate</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="802" y="840.793">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="818" y="856.1035">reason</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="818" y="871.4141">createdDate (changedDate)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="806" y="886.7246"/><polygon fill="#A80036" points="713,915.7773,703,919.7773,713,923.7773,709,919.7773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="707" x2="906" y1="919.7773" y2="919.7773"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="719" y="915.0352">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="732" y="915.0352">Return data</text><path d="M349,932.7773 L349,1049.7773 L683,1049.7773 L683,942.7773 L673,932.7773 L349,932.7773 " fill="#D3D3D3" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M673,932.7773 L673,942.7773 L683,942.7773 L673,932.7773 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="355" y="950.3457">windowsList</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="313" x="355" y="965.6563">Contains about settlement windows in settlement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="355" y="980.9668">-settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="355" y="996.2773">-reason</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="355" y="1011.5879">-state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="355" y="1026.8984">-createdDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="355" y="1042.209">-changedDate</text><polygon fill="#A80036" points="366,1076.2617,356,1080.2617,366,1084.2617,362,1080.2617" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="360" x2="696" y1="1080.2617" y2="1080.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="372" y="1075.5195">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="385" y="1075.5195">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="430" y="1075.5195">windowsList</text><polygon fill="#A80036" points="680,1120.8828,690,1124.8828,680,1128.8828,684,1124.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="355" x2="686" y1="1124.8828" y2="1124.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="362" y="1112.4854">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="384" y="1104.8301">Retrieve information for settlement accounts</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="384" y="1120.1406">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="461" y="1120.1406">2001</text><polygon fill="#A80036" points="890,1150.1934,900,1154.1934,890,1158.1934,894,1154.1934" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="896" y1="1154.1934" y2="1154.1934"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="709" y="1149.4512">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="731" y="1149.4512">Select from DB</text><polygon fill="#FFFFE0" filter="url(#fwhtss73mrfkf)" points="759,1167.1934,1054,1167.1934,1064,1316.1934,1054,1465.1934,759,1465.1934,749,1316.1934,759,1167.1934" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="761" y="1183.7617">SELECT FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="761" y="1199.0723">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="777" y="1214.3828">transferid</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="777" y="1229.6934">settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="761" y="1245.0039">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="777" y="1260.3145">transferId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="777" y="1275.625">participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="761" y="1290.9355">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="777" y="1306.2461">participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="777" y="1321.5566">participantId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="777" y="1336.8672">currencyId</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="761" y="1352.1777">settlementParticipantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="777" y="1367.4883">settlementId - ?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="777" y="1382.7988">participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="777" y="1398.1094">netAmount</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="291" x="761" y="1413.4199">settlementSettlementCurrencyStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="777" y="1428.7305">settlementStateId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="777" y="1444.041">reason</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="765" y="1459.3516"/><polygon fill="#A80036" points="713,1488.4043,703,1492.4043,713,1496.4043,709,1492.4043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="707" x2="906" y1="1492.4043" y2="1492.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="719" y="1487.6621">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="741" y="1487.6621">Return data</text><path d="M340,1505.4043 L340,1652.4043 L683,1652.4043 L683,1515.4043 L673,1505.4043 L340,1505.4043 " fill="#D3D3D3" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M673,1505.4043 L673,1515.4043 L683,1515.4043 L673,1505.4043 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="158" x="346" y="1522.9727">settlementAccountsList</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="322" x="346" y="1538.2832">Holds information about all accounts in settlement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="346" y="1553.5938">-settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="362" y="1568.9043">-participantId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="206" x="378" y="1584.2148">-participantCurrencyId (account)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="378" y="1599.5254">-reason</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="378" y="1614.8359">-state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="378" y="1630.1465">-amount (netAmount)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="378" y="1645.457">-currencyId</text><polygon fill="#A80036" points="366,1679.5098,356,1683.5098,366,1687.5098,362,1683.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="360" x2="696" y1="1683.5098" y2="1683.5098"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="372" y="1678.7676">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="394" y="1678.7676">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="158" x="439" y="1678.7676">settlementAccountsList</text><path d="M360,1696.5098 L360,2027.5098 L680,2027.5098 L680,1706.5098 L670,1696.5098 L360,1696.5098 " fill="#FFC0CB" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M670,1696.5098 L670,1706.5098 L680,1706.5098 L670,1696.5098 " fill="#FFC0CB" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="366" y="1714.0781">Design still in progress</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="370" y="1729.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="366" y="1744.6992">settlementId = /settlement/{id}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="366" y="1760.0098">loop</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="382" y="1775.3203">settlementWindowId = &amp;settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="382" y="1790.6309">createdDate &gt;= &amp;fromDateTime</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="382" y="1805.9414">createdDate &lt;= &amp;toDateTime</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="382" y="1821.252">loop</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="398" y="1836.5625">participantId = &amp;participantId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="398" y="1851.873">loop</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="414" y="1867.1836">participantCurrencyId = &amp;account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="414" y="1882.4941">currencyId = &amp;currency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="414" y="1897.8047">state = &amp;state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="398" y="1913.1152">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="382" y="1928.4258">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="366" y="1943.7363">end</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="370" y="1959.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="370" y="1974.3574"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="366" y="1989.668">Apply filters to datalist(s) from DB</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="370" y="2004.9785"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="366" y="2020.2891">Format reply messages</text><polygon fill="#A80036" points="366,2054.3418,356,2058.3418,366,2062.3418,362,2058.3418" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="360" x2="696" y1="2058.3418" y2="2058.3418"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="372" y="2053.5996">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="394" y="2053.5996">Operation successfully completed</text><path d="M59,2071.3418 L59,2586.3418 L336,2586.3418 L336,2081.3418 L326,2071.3418 L59,2071.3418 " fill="#FFFF00" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M326,2071.3418 L326,2081.3418 L336,2081.3418 L326,2071.3418 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="65" y="2088.9102">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="73" y="2104.2207">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="81" y="2119.5313">"Id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="81" y="2134.8418">"State": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="81" y="2150.1523">"settlementWindows": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="89" y="2165.4629">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="97" y="2180.7734">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="105" y="2196.084">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="105" y="2211.3945">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="105" y="2226.7051">"state": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="105" y="2242.0156">"createdDate": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="105" y="2257.3262">"changedDate": "string"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="97" y="2272.6367">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="89" y="2287.9473">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="81" y="2303.2578">],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="81" y="2318.5684">"Participants": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="89" y="2333.8789">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="97" y="2349.1895">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="97" y="2364.5">"accounts": [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="105" y="2379.8105">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="113" y="2395.1211">"id": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="113" y="2410.4316">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="113" y="2425.7422">"state": "PENDING-SETTLEMENT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="113" y="2441.0527">"netSettlementAmount": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="121" y="2456.3633">"amount": 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="121" y="2471.6738">"currency": "string"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="113" y="2486.9844">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="105" y="2502.2949">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="97" y="2517.6055">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="89" y="2532.916">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="81" y="2548.2266">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="73" y="2563.5371">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="65" y="2578.8477">]</text><polygon fill="#A80036" points="101,2612.9004,91,2616.9004,101,2620.9004,97,2616.9004" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="95" x2="349" y1="2616.9004" y2="2616.9004"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="107" y="2612.1582">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="129" y="2612.1582">Return results</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="1074" y1="2625.9004" y2="2625.9004"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="28" y="2636.5352">[Settlement not found]</text><path d="M355,2644.8555 L355,2669.8555 L482,2669.8555 L482,2654.8555 L472,2644.8555 L355,2644.8555 " fill="#D3D3D3" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M472,2644.8555 L472,2654.8555 L482,2654.8555 L472,2644.8555 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="361" y="2662.4238">Log ERROR event</text><path d="M174,2684.166 L174,2770.166 L341,2770.166 L341,2694.166 L331,2684.166 L174,2684.166 " fill="#FFFF00" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M331,2684.166 L331,2694.166 L341,2694.166 L331,2684.166 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="180" y="2701.7344">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="196" y="2717.0449">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="196" y="2732.3555">"code": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="196" y="2747.666">"message": &lt;string&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="180" y="2762.9766">}</text><polygon fill="#A80036" points="96,2797.0293,86,2801.0293,96,2805.0293,92,2801.0293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="90" x2="349" y1="2801.0293" y2="2801.0293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="102" y="2796.2871">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="124" y="2796.2871">Respond HTTP -</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="231" y="2796.2871">4xx (Client error)</text><!--
@startuml
title 6.2.0. Returns Settlement(s) as per parameters/filter criteria

autonumber

actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #LightPink
    participant OPERATOR
end box

box "Settlement Service" #LightGreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #LightYellow
    participant DB
end box

group Request Settlement Details
    activate OPERATOR
    note right of OPERATOR #Yellow
        **Filtering Params:**
        &settlementWindowId=/settlementWindow/{id}
        &currencyId=/currency/{id}
        &participantId=/participant/{id}
        &accountId=/account/{id}
        &state={state}
        &fromDateTime={yyyy-mm-ddThh:mm}
        &toDateTime={yyyy-mm-ddThh:mm}
    end note

    OPERATOR -> SSAPI: GET - /settlement/{id}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Retrieve settlement details\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO

    SETTLE_DAO -> DB: Select settlement from DB
    activate DB
    hnote over DB #LightYellow
        SELECT FROM
        **settlement**
            settlementId
        **settlementSettlementChange**
            settlementStateId
    end hnote

        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **settlementData**
            Contains information about settlement
            -state
        end note
        SSAPI <- - SETTLE_DAO: Return **settlementData**
        deactivate SETTLE_DAO
    alt Settlement found

        SSAPI -> SETTLE_DAO: Retrieve full information for settlement windows\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Select from DB
        activate DB
        hnote over DB #LightYellow
            **settlementSettlementWindow**
                settlementId
                settlementWindowId
            **settlementWindow**
                createdDate
            **settlementWindowStateChange**
                reason
                createdDate (changedDate)

        end hnote
        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **windowsList**
            Contains about settlement windows in settlement
            -settlementWindowId
            -reason
            -state
            -createdDate
            -changedDate
        end note
        SSAPI <- - SETTLE_DAO: Return **windowsList**
        deactivate SETTLE_DAO

        SSAPI -> SETTLE_DAO: Retrieve information for settlement accounts\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Select from DB
        activate DB
        hnote over DB #LightYellow
            SELECT FROM
            **transferFulfilment**
                transferid
                settlementWindowId
            **transferParticipant**
                transferId
                participantCurrencyId
            **participantCurrency**
                participantCurrencyId
                participantId
                currencyId
            **settlementParticipantCurrency**
                settlementId - ?
                participantCurrencyId
                netAmount
            **settlementSettlementCurrencyStateChange**
                settlementStateId
                reason

        end hnote
        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **settlementAccountsList**
            Holds information about all accounts in settlement
            -settlementWindowId
                -participantId
                    -participantCurrencyId (account)
                    -reason
                    -state
                    -amount (netAmount)
                    -currencyId
        end note
        SSAPI <- - SETTLE_DAO: Return **settlementAccountsList**
        deactivate SETTLE_DAO

        note right of SSAPI #Pink
        **Design still in progress**

        settlementId = /settlement/{id}
        loop
            settlementWindowId = &settlementWindowId
            createdDate >= &fromDateTime
            createdDate <= &toDateTime
            loop
                participantId = &participantId
                loop
                    participantCurrencyId = &account
                    currencyId = &currency
                    state = &state
                end
            end
        end


        Apply filters to datalist(s) from DB

        Format reply messages
        end note

        SSAPI <- - SETTLE_DAO: Operation successfully completed
        note left of SSAPI #Yellow
            [
              {
                "Id": 0,
                "State": "string",
                "settlementWindows": [
                  [
                    {
                      "id": 0,
                      "reason": "string",
                      "state": "string",
                      "createdDate": "string",
                      "changedDate": "string"
                    }
                  ]
                ],
                "Participants": [
                  {
                    "id": 0,
                    "accounts": [
                      {
                        "id": "string",
                        "reason": "string",
                        "state": "PENDING-SETTLEMENT",
                        "netSettlementAmount": {
                          "amount": 0,
                          "currency": "string"
                        }
                      }
                    ]
                  }
                ]
              }
            ]
        end note
        OPERATOR <- - SSAPI: Return results
    deactivate SSAPI
    else Settlement not found
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                "status": 0,
                "code": <integer>,
                "message": <string>
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - <color #FF0000>4xx (Client error)</color>
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>