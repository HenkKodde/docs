<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1795.2001px" preserveAspectRatio="none" style="width:918px;height:1795px;" version="1.1" viewBox="0 0 918 1795" width="918px" zoomAndPan="magnify"><defs><filter height="300%" id="f753m48m0bq9a" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="235.2" x="342" y="14.1211">Returns Settlement(s) as per parameters/filter criteria</text><rect fill="#FFB6C1" height="1768.486" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="67.2" x="183.6" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="192.9" y="28.234">Central HUB</text><rect fill="#90EE90" height="1768.486" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="336.3" x="277.5" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="408.45" y="28.234">Settlement Service</text><rect fill="#FFFFE0" height="1768.486" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="68.4" x="669" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="670.8" y="28.234">Central Services</text><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="1629.5274" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="214.2" y="88.3723"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="1351.8141" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="203.4492"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="136.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="1581.8227"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="179.1949" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="574.2" y="230.0356"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="252.6856" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="574.2" y="450.4031"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="225.1266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="574.2" y="729.675"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="170.0086" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="574.2" y="981.3879"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="111.0633" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="700.2" y="247.8082"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="184.5539" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="700.2" y="468.1758"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="156.9949" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="700.2" y="747.4477"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="101.877" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="700.2" y="999.1606"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="1634.5137" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="903.6" x="7.8" y="92.5723"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="1304.4692" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="891.6" x="13.8" y="418.4168"/><rect fill="#FFFFFF" height="162.6363" style="stroke: none; stroke-width: 0.6000000238418579;" width="891.6" x="13.8" y="1560.2497"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="217.2" x2="217.2" y1="82.3723" y2="1737.286"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="326.7" x2="326.7" y1="82.3723" y2="1737.286"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="577.2" x2="577.2" y1="82.3723" y2="1737.286"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="703.2" x2="703.2" y1="82.3723" y2="1737.286"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="186" y="80.6004">Hub Employee</text><ellipse cx="217.2" cy="38.2793" fill="#FEFECE" filter="url(#f753m48m0bq9a)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M217.2,43.0793 L217.2,59.2793 M209.4,47.8793 L225,47.8793 M217.2,59.2793 L209.4,68.2793 M217.2,59.2793 L225,68.2793 " fill="none" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="186" y="1744.8071">Hub Employee</text><ellipse cx="217.2" cy="1752.579" fill="#FEFECE" filter="url(#f753m48m0bq9a)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M217.2,1757.379 L217.2,1773.579 M209.4,1762.179 L225,1762.179 M217.2,1773.579 L209.4,1782.579 M217.2,1773.579 L225,1782.579 " fill="none" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="80.6004">Settlement Service API</text><path d="M314.7,55.6793 L314.7,70.0793 M314.7,62.8793 L324.9,62.8793 " fill="none" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="62.8793" fill="#FEFECE" filter="url(#f753m48m0bq9a)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="1744.8071">Settlement Service API</text><path d="M314.7,1748.979 L314.7,1763.379 M314.7,1756.179 L324.9,1756.179 " fill="none" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="1756.179" fill="#FEFECE" filter="url(#f753m48m0bq9a)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="543" y="80.6004">Settlement DAO</text><ellipse cx="577.2" cy="62.8793" fill="#FEFECE" filter="url(#f753m48m0bq9a)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="570" x2="584.4" y1="71.2793" y2="71.2793"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="543" y="1744.8071">Settlement DAO</text><ellipse cx="577.2" cy="1756.179" fill="#FEFECE" filter="url(#f753m48m0bq9a)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="570" x2="584.4" y1="1764.579" y2="1764.579"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="674.4" y="80.6004">Central Store</text><path d="M692.4,50.8793 C692.4,44.8793 703.2,44.8793 703.2,44.8793 C703.2,44.8793 714,44.8793 714,50.8793 L714,66.4793 C714,72.4793 703.2,72.4793 703.2,72.4793 C703.2,72.4793 692.4,72.4793 692.4,66.4793 L692.4,50.8793 " fill="#FEFECE" filter="url(#f753m48m0bq9a)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M692.4,50.8793 C692.4,56.8793 703.2,56.8793 703.2,56.8793 C703.2,56.8793 714,56.8793 714,50.8793 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="674.4" y="1744.8071">Central Store</text><path d="M692.4,1752.579 C692.4,1746.579 703.2,1746.579 703.2,1746.579 C703.2,1746.579 714,1746.579 714,1752.579 L714,1768.179 C714,1774.179 703.2,1774.179 703.2,1774.179 C703.2,1774.179 692.4,1774.179 692.4,1768.179 L692.4,1752.579 " fill="#FEFECE" filter="url(#f753m48m0bq9a)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M692.4,1752.579 C692.4,1758.579 703.2,1758.579 703.2,1758.579 C703.2,1758.579 714,1758.579 714,1752.579 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="1629.5274" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="214.2" y="88.3723"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="1351.8141" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="203.4492"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="136.077" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="1581.8227"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="179.1949" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="574.2" y="230.0356"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="252.6856" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="574.2" y="450.4031"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="225.1266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="574.2" y="729.675"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="170.0086" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="574.2" y="981.3879"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="111.0633" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="700.2" y="247.8082"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="184.5539" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="700.2" y="468.1758"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="156.9949" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="700.2" y="747.4477"/><rect fill="#FFFFFF" filter="url(#f753m48m0bq9a)" height="101.877" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="700.2" y="999.1606"/><path d="M7.8,92.5723 L143.4,92.5723 L143.4,96.7723 L137.4,102.7723 L7.8,102.7723 L7.8,92.5723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="1634.5137" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="903.6" x="7.8" y="92.5723"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108.6" x="16.8" y="100.7133">Request Settlement Details</text><path d="M223.2,105.9586 L223.2,185.1586 L414,185.1586 L414,111.9586 L408,105.9586 L223.2,105.9586 " fill="#FFFF00" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M408,105.9586 L408,111.9586 L414,111.9586 L408,105.9586 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="226.8" y="116.4996">Filtering Params:</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="178.2" x="226.8" y="125.6859">&amp;settlementWindowId=/settlementWindow/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="103.8" x="226.8" y="134.8723">&amp;currencyId=/currency/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="120.6" x="226.8" y="144.0586">&amp;participantId=/participant/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="99" x="226.8" y="153.2449">&amp;accountId=/account/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="226.8" y="162.4313">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="151.8" x="226.8" y="171.6176">&amp;fromDateTime={yyyy-mm-ddThh:mm}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141.6" x="226.8" y="180.8039">&amp;toDateTime={yyyy-mm-ddThh:mm}</text><polygon fill="#A80036" points="316.8,201.0492,322.8,203.4492,316.8,205.8492,319.2,203.4492" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="220.2" x2="320.4" y1="203.4492" y2="203.4492"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="224.4" y="200.7902">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="84.6" x="232.2" y="200.7902">GET - /settlement/{id}</text><polygon fill="#A80036" points="567,227.6356,573,230.0356,567,232.4356,569.4,230.0356" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="570.6" y1="230.0356" y2="230.0356"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="222.9697">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="115.2" x="342" y="218.3766">Retrieve full settlement details</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="342" y="227.5629">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="388.2" y="227.5629">2001</text><polygon fill="#A80036" points="693,245.4082,699,247.8082,693,250.2082,695.4,247.8082" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="580.2" x2="696.6" y1="247.8082" y2="247.8082"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="584.4" y="245.1492">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="97.8" x="592.2" y="245.1492">Select settlement from DB</text><polygon fill="#FFFFE0" filter="url(#f753m48m0bq9a)" points="562.2,255.7945,843.6,255.7945,849.6,298.9945,843.6,342.7945,562.2,342.7945,556.2,298.9945,562.2,255.7945" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="279" x="563.4" y="265.7356">SELECT s.settlementId, ssc.settlementStateId, ssc.reason, ssc.createdDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="563.4" y="274.9219">FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="587.4" y="274.9219">settlement</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.2" x="633" y="274.9219">AS s</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="36.6" x="563.4" y="284.1082">LEFT JOIN</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.2" x="602.4" y="284.1082">settlementStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="699" y="284.1082">AS ssc</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141.6" x="563.4" y="293.2945">ON ssc.settlementId = s.settlementId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="146.4" x="563.4" y="302.4809">AND ssc.settelementStateChangeId = (</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="169.2" x="573" y="311.6672">SELECT MAX(ssc1.settelementStateChangeId)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="573" y="320.8535">FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.2" x="597" y="320.8535">settlementStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="29.4" x="693.6" y="320.8535">AS ssc1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="120.6" x="573" y="330.0399">WHERE ssc1.settlementId = {id})</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="105" x="563.4" y="339.2262">WHERE s.settlementId = {id}</text><polygon fill="#A80036" points="586.8,356.4715,580.8,358.8715,586.8,361.2715,584.4,358.8715" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="583.2" x2="702.6" y1="358.8715" y2="358.8715"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="590.4" y="356.2125">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="598.2" y="356.2125">Return data</text><path d="M301.2,366.8578 L301.2,390.8578 L568.8,390.8578 L568.8,372.8578 L562.8,366.8578 L301.2,366.8578 " fill="#D3D3D3" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M562.8,366.8578 L562.8,372.8578 L568.8,372.8578 L562.8,366.8578 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="304.8" y="377.3988">settlementData</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="255" x="304.8" y="386.5852">Contains information about settlement and its current state/reason</text><polygon fill="#A80036" points="336.6,406.8305,330.6,409.2305,336.6,411.6305,334.2,409.2305" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="576.6" y1="409.2305" y2="409.2305"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="406.5715">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="348" y="406.5715">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="375" y="406.5715">settlementData</text><path d="M13.8,418.4168 L51,418.4168 L51,422.6168 L45,428.6168 L13.8,428.6168 L13.8,418.4168 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="1304.4692" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="891.6" x="13.8" y="418.4168"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="22.8" y="426.5578">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="60" y="425.9977">[settlement found]</text><polygon fill="#A80036" points="567,448.0031,573,450.4031,567,452.8031,569.4,450.4031" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="570.6" y1="450.4031" y2="450.4031"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="443.3373">6</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="184.2" x="342" y="438.7442">Retrieve full information for settlement accounts</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="342" y="447.9305">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="388.2" y="447.9305">2001</text><polygon fill="#A80036" points="693,465.7758,699,468.1758,693,470.5758,695.4,468.1758" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="580.2" x2="696.6" y1="468.1758" y2="468.1758"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="584.4" y="465.5168">7</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="592.2" y="465.5168">Select from DB</text><polygon fill="#FFFFE0" filter="url(#f753m48m0bq9a)" points="531,476.1621,875.4,476.1621,881.4,556.5621,875.4,636.9621,531,636.9621,525,556.5621,531,476.1621" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="342" x="532.2" y="486.1031">SELECT pc.participantId, spc.participantCurrencyId, spcsc.settlementStateId, spcsc.reason,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="328.8" x="541.8" y="495.2895">spcsc.createdDate, spc.netAmount, pc.currencyId, spc.settlementParticipantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="532.2" y="504.4758">FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124.2" x="556.2" y="504.4758">settlementParticipantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="682.8" y="504.4758">AS spc</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="203.4" x="532.2" y="513.6621">JOIN (SELECT spcsc1.settlementParticipantCurrencyId,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="230.4" x="551.4" y="522.8485">MAX(spcsc1.settlementParticipantCurrencyStateChangeId) AS</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="184.2" x="551.4" y="532.0348">maxSettlementParticipantCurrencyStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="541.8" y="541.2211">FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124.2" x="565.8" y="541.2211">settlementParticipantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="30" x="692.4" y="541.2211">AS spc1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="541.8" y="550.4074">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175.2" x="561" y="550.4074">settlementParticipantCurrencyStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="38.4" x="738.6" y="550.4074">AS spcsc1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="316.8" x="541.8" y="559.5938">ON spcsc1.settlementParticipantCurrencyId = spc1.settlementParticipantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="118.8" x="541.8" y="568.7801">WHERE spc1.settlementId = {id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="211.8" x="541.8" y="577.9664">GROUP BY spcsc1.settlementParticipantCurrencyId) spcs</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="532.2" y="587.1528">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175.2" x="551.4" y="587.1528">settlementParticipantCurrencyStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="33.6" x="729" y="587.1528">AS spcsc</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="214.8" x="532.2" y="596.3391">ON spcsc.settlementParticipantCurrencyStateChangeId =</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="204" x="541.8" y="605.5254">spcs.maxSettlementParticipantCurrencyStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="532.2" y="614.7117">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="551.4" y="614.7117">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="21" x="635.4" y="614.7117">AS pc</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="215.4" x="532.2" y="623.8981">ON pc.participantCurrencyId = spc.participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="114" x="532.2" y="633.0844">WHERE spc.settlementId = {id}</text><polygon fill="#A80036" points="586.8,650.3297,580.8,652.7297,586.8,655.1297,584.4,652.7297" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="583.2" x2="702.6" y1="652.7297" y2="652.7297"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="590.4" y="650.0707">8</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="598.2" y="650.0707">Return data</text><path d="M299.4,660.716 L299.4,684.716 L568.8,684.716 L568.8,666.716 L562.8,660.716 L299.4,660.716 " fill="#D3D3D3" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M562.8,660.716 L562.8,666.716 L568.8,666.716 L562.8,660.716 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.8" x="303" y="671.2571">settlementAccountsList</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="256.8" x="303" y="680.4434">Holds information about all accounts and their current state/reason</text><polygon fill="#A80036" points="336.6,700.6887,330.6,703.0887,336.6,705.4887,334.2,703.0887" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="576.6" y1="703.0887" y2="703.0887"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="700.4297">9</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="348" y="700.4297">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.8" x="375" y="700.4297">settlementAccountsList</text><polygon fill="#A80036" points="567,727.275,573,729.675,567,732.075,569.4,729.675" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="570.6" y1="729.675" y2="729.675"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="334.2" y="722.6092">10</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="183" x="347.4" y="718.016">Retrieve full information for settlement windows</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="347.4" y="727.2024">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="393.6" y="727.2024">2001</text><polygon fill="#A80036" points="693,745.0477,699,747.4477,693,749.8477,695.4,747.4477" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="580.2" x2="696.6" y1="747.4477" y2="747.4477"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="584.4" y="744.7887">11</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="597.6" y="744.7887">Select from DB</text><polygon fill="#FFFFE0" filter="url(#f753m48m0bq9a)" points="512.4,755.434,893.4,755.434,899.4,822.034,893.4,888.634,512.4,888.634,506.4,822.034,512.4,755.434" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="378.6" x="513.6" y="765.375">SELECT ssw.settlementWindowId, sswsc.settlementWindowStateId, sswsc.reason, sswsc.createdDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="513.6" y="774.5614">FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118.2" x="537.6" y="774.5614">settlementSettlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="26.4" x="658.2" y="774.5614">AS ssw</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="349.8" x="513.6" y="783.7477">JOIN (SELECT sswsc1.settlementWindowId, MAX(sswsc1.settlementWindowStateChangeId) AS</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="139.8" x="542.4" y="792.934">maxSettlementWindowStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="532.8" y="802.1203">FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169.2" x="556.8" y="802.1203">settlementSettlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="728.4" y="802.1203">AS sswsc1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="150.6" x="530.4" y="811.3067">WHERE sswsc1.settlementWindowId IN (</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="127.8" x="542.4" y="820.493">SELECT ssw1.settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="532.8" y="829.6793">FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118.2" x="556.8" y="829.6793">settlementSettlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="677.4" y="829.6793">AS ssw1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="122.4" x="532.8" y="838.8657">WHERE ssw1.settlementId = {id})</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="169.8" x="523.2" y="848.052">GROUP BY sswsc1.settlementWindowId) ssws</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="216.6" x="513.6" y="857.2383">ON ssws.settlementWindowId = ssw.settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="513.6" y="866.4246">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169.2" x="532.8" y="866.4246">settlementSettlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="34.8" x="704.4" y="866.4246">AS sswsc</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="334.8" x="513.6" y="875.611">ON sswsc.settlementWindowStateChangeId = ssws.maxSettlementWindowStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="115.2" x="513.6" y="884.7973">WHERE ssw.settlementId = {id}</text><polygon fill="#A80036" points="586.8,902.0426,580.8,904.4426,586.8,906.8426,584.4,904.4426" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="583.2" x2="702.6" y1="904.4426" y2="904.4426"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="590.4" y="901.7836">12</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="603.6" y="901.7836">Return data</text><path d="M308.4,912.4289 L308.4,936.4289 L568.8,936.4289 L568.8,918.4289 L562.8,912.4289 L308.4,912.4289 " fill="#D3D3D3" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M562.8,912.4289 L562.8,918.4289 L568.8,918.4289 L562.8,912.4289 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49.8" x="312" y="922.97">windowsList</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="247.8" x="312" y="932.1563">Has information about all windows and their current state/reason</text><polygon fill="#A80036" points="336.6,952.4016,330.6,954.8016,336.6,957.2016,334.2,954.8016" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="576.6" y1="954.8016" y2="954.8016"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="340.2" y="952.1426">13</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="353.4" y="952.1426">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49.8" x="380.4" y="952.1426">windowsList</text><polygon fill="#A80036" points="567,978.9879,573,981.3879,567,983.7879,569.4,981.3879" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="570.6" y1="981.3879" y2="981.3879"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="334.2" y="974.3221">14</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="219.6" x="347.4" y="969.7289">Retrieve full information for settlement windows accounts</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="347.4" y="978.9153">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="393.6" y="978.9153">2001</text><polygon fill="#A80036" points="693,996.7606,699,999.1606,693,1001.5606,695.4,999.1606" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="580.2" x2="696.6" y1="999.1606" y2="999.1606"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="584.4" y="996.5016">15</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="597.6" y="996.5016">Select from DB</text><polygon fill="#FFFFE0" filter="url(#f753m48m0bq9a)" points="586.8,1007.1469,819,1007.1469,825,1046.1469,819,1085.1469,586.8,1085.1469,580.8,1046.1469,586.8,1007.1469" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="219.6" x="588" y="1017.0879">SELECT ssw.settlementWindowId, tp.participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="21.6" x="588" y="1026.2743">FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118.2" x="612" y="1026.2743">settlementSettlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="26.4" x="732.6" y="1026.2743">AS ssw</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="588" y="1035.4606">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73.2" x="607.2" y="1035.4606">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="18" x="682.8" y="1035.4606">AS tf</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="204" x="588" y="1044.6469">ON tf.settlementWindowId = ssw.settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="588" y="1053.8332">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76.2" x="607.2" y="1053.8332">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.8" x="685.8" y="1053.8332">AS tp</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="117" x="588" y="1063.0196">ON tp.transferId = tf.transferId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="98.4" x="588" y="1072.2059">WHERE settlementId = {id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="229.8" x="588" y="1081.3922">GROUP BY ssw.settlementWindowId, tp.participantCurrencyId</text><polygon fill="#A80036" points="586.8,1098.6375,580.8,1101.0375,586.8,1103.4375,584.4,1101.0375" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="583.2" x2="702.6" y1="1101.0375" y2="1101.0375"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="590.4" y="1098.3786">16</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="603.6" y="1098.3786">Return data</text><path d="M371.4,1109.0239 L371.4,1133.0239 L568.8,1133.0239 L568.8,1115.0239 L562.8,1109.0239 L371.4,1109.0239 " fill="#D3D3D3" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M562.8,1109.0239 L562.8,1115.0239 L568.8,1115.0239 L562.8,1109.0239 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="375" y="1119.5649">windowsAccountsList</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="184.8" x="375" y="1128.7512">Has information about all accounts and windows</text><polygon fill="#A80036" points="336.6,1148.9965,330.6,1151.3965,336.6,1153.7965,334.2,1151.3965" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="576.6" y1="1151.3965" y2="1151.3965"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="340.2" y="1148.7375">17</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="353.4" y="1148.7375">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="380.4" y="1148.7375">windowsAccountsList</text><path d="M333,1159.3829 L333,1201.9829 L474.6,1201.9829 L474.6,1165.3829 L468.6,1159.3829 L333,1159.3829 " fill="#FFC0CB" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M468.6,1159.3829 L468.6,1165.3829 L474.6,1165.3829 L468.6,1159.3829 " fill="#FFC0CB" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93.6" x="336.6" y="1169.9239">Design still in progress</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="339" y="1179.1102"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="129" x="336.6" y="1188.2965">Apply filters to datalist(s) from DB</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="87" x="336.6" y="1197.4829">Format reply messages</text><polygon fill="#A80036" points="336.6,1217.7282,330.6,1220.1282,336.6,1222.5282,334.2,1220.1282" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="576.6" y1="1220.1282" y2="1220.1282"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="340.2" y="1217.4692">18</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="128.4" x="353.4" y="1217.4692">Operation successfully completed</text><path d="M152.4,1228.1145 L152.4,1537.1145 L318.6,1537.1145 L318.6,1234.1145 L312.6,1228.1145 L152.4,1228.1145 " fill="#FFFF00" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,1228.1145 L312.6,1234.1145 L318.6,1234.1145 L312.6,1228.1145 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="156" y="1238.6555">[</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="160.8" y="1247.8418">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="165.6" y="1257.0282">"Id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="165.6" y="1266.2145">"State": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="87" x="165.6" y="1275.4008">"settlementWindows": [</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="170.4" y="1284.5872">[</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="175.2" y="1293.7735">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="180" y="1302.9598">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="180" y="1312.1461">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="180" y="1321.3325">"state": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="180" y="1330.5188">"createdDate": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="180" y="1339.7051">"changedDate": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="175.2" y="1348.8915">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="170.4" y="1358.0778">]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="4.8" x="165.6" y="1367.2641">],</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="57.6" x="165.6" y="1376.4504">"Participants": [</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="170.4" y="1385.6368">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="175.2" y="1394.8231">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="47.4" x="175.2" y="1404.0094">"accounts": [</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="180" y="1413.1958">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="184.8" y="1422.3821">"id": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="184.8" y="1431.5684">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="124.8" x="184.8" y="1440.7547">"state": "PENDING-SETTLEMENT",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="95.4" x="184.8" y="1449.9411">"netSettlementAmount": {</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="46.8" x="189.6" y="1459.1274">"amount": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="71.4" x="189.6" y="1468.3137">"currency": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="184.8" y="1477.5001">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="180" y="1486.6864">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="175.2" y="1495.8727">]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="170.4" y="1505.059">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="165.6" y="1514.2454">]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="160.8" y="1523.4317">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="156" y="1532.618">]</text><polygon fill="#A80036" points="226.8,1552.8633,220.8,1555.2633,226.8,1557.6633,224.4,1555.2633" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="223.2" x2="326.4" y1="1555.2633" y2="1555.2633"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="230.4" y="1552.6044">19</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="243.6" y="1552.6044">Return results</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="13.8" x2="905.4" y1="1560.8497" y2="1560.8497"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="16.8" y="1567.2305">[</text><text fill="#FF0000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70.2" x="19.2" y="1567.2305">Settlement not found</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="89.4" y="1567.2305">]</text><polygon fill="#A80036" points="336.6,1579.4227,330.6,1581.8227,336.6,1584.2227,334.2,1581.8227" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="576.6" y1="1581.8227" y2="1581.8227"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="340.2" y="1579.1637">20</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141" x="353.4" y="1579.1637">settlement not found - Return ERROR</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="330" x2="355.2" y1="1599.5954" y2="1599.5954"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="355.2" x2="355.2" y1="1599.5954" y2="1607.3954"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="330.6" x2="355.2" y1="1607.3954" y2="1607.3954"/><polygon fill="#A80036" points="336.6,1604.9954,330.6,1607.3954,336.6,1609.7954,334.2,1607.3954" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="334.2" y="1596.7501">21</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="63.6" x="347.4" y="1596.7501">Update Event log</text><path d="M333,1615.1954 L333,1639.1954 L457.2,1639.1954 L457.2,1621.1954 L451.2,1615.1954 L333,1615.1954 " fill="#ADD8E6" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M451.2,1615.1954 L451.2,1621.1954 L457.2,1621.1954 L451.2,1615.1954 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.2" x="336.6" y="1625.7364">Log ERROR Messages.</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="111.6" x="336.6" y="1634.9227">Update Event log with ERROR.</text><path d="M19.8,1647.968 L19.8,1699.568 L318.6,1699.568 L318.6,1653.968 L312.6,1647.968 L19.8,1647.968 " fill="#FFFF00" filter="url(#f753m48m0bq9a)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,1647.968 L312.6,1653.968 L318.6,1653.968 L312.6,1647.968 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="1658.5091">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="41.4" x="28.2" y="1667.6954">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="281.4" x="28.2" y="1676.8817">"code": "(ERROR response code eg. '404' - Defined in swagger definition))",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="72" x="28.2" y="1686.068">"message": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="1695.2544">}</text><polygon fill="#A80036" points="223.8,1715.4997,217.8,1717.8997,223.8,1720.2997,221.4,1717.8997" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="220.2" x2="326.4" y1="1717.8997" y2="1717.8997"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="227.4" y="1715.2407">22</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="51.6" x="240.6" y="1715.2407">Return ERROR</text><!--
@startuml
title Returns Settlement(s) as per parameters/filter criteria

autonumber

actor "Hub Employee" as OPERATOR

boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO

database "Central Store" as DB

box "Central HUB" #LightPink
    participant OPERATOR
end box

box "Settlement Service" #LightGreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #LightYellow
    participant DB
end box

group Request Settlement Details
    activate OPERATOR
    note right of OPERATOR #Yellow
        **Filtering Params:**
        &settlementWindowId=/settlementWindow/{id}
        &currencyId=/currency/{id}
        &participantId=/participant/{id}
        &accountId=/account/{id}
        &state={state}
        &fromDateTime={yyyy-mm-ddThh:mm}
        &toDateTime={yyyy-mm-ddThh:mm}
    end note

    OPERATOR -> SSAPI: GET - /settlement/{id}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Retrieve full settlement details\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO

    SETTLE_DAO -> DB: Select settlement from DB
    activate DB
    hnote over DB #LightYellow
        SELECT s.settlementId, ssc.settlementStateId, ssc.reason, ssc.createdDate
        FROM **settlement** AS s
        LEFT JOIN **settlementStateChange** AS ssc
        ON ssc.settlementId = s.settlementId
        AND ssc.settelementStateChangeId = (
            SELECT MAX(ssc1.settelementStateChangeId)
            FROM **settlementStateChange** AS ssc1
            WHERE ssc1.settlementId = {id})
        WHERE s.settlementId = {id}
    end hnote

        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **settlementData**
            Contains information about settlement and its current state/reason
        end note
        SSAPI <- - SETTLE_DAO: Return **settlementData**
        deactivate SETTLE_DAO
    alt settlement found
        SSAPI -> SETTLE_DAO: Retrieve full information for settlement accounts\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Select from DB
        activate DB
        hnote over DB #LightYellow
            SELECT pc.participantId, spc.participantCurrencyId, spcsc.settlementStateId, spcsc.reason,
                spcsc.createdDate, spc.netAmount, pc.currencyId, spc.settlementParticipantCurrencyId
            FROM **settlementParticipantCurrency** AS spc
            JOIN (SELECT spcsc1.settlementParticipantCurrencyId,
                    MAX(spcsc1.settlementParticipantCurrencyStateChangeId) AS
                    maxSettlementParticipantCurrencyStateChangeId
                FROM **settlementParticipantCurrency** AS spc1
                JOIN **settlementParticipantCurrencyStateChange** AS spcsc1
                ON spcsc1.settlementParticipantCurrencyId = spc1.settlementParticipantCurrencyId
                WHERE spc1.settlementId = {id}
                GROUP BY spcsc1.settlementParticipantCurrencyId) spcs
            JOIN **settlementParticipantCurrencyStateChange** AS spcsc
            ON spcsc.settlementParticipantCurrencyStateChangeId =
                spcs.maxSettlementParticipantCurrencyStateChangeId
            JOIN **participantCurrency** AS pc
            ON pc.participantCurrencyId = spc.participantCurrencyId
            WHERE spc.settlementId = {id}
        end hnote
        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **settlementAccountsList**
            Holds information about all accounts and their current state/reason
        end note
        SSAPI <- - SETTLE_DAO: Return **settlementAccountsList**
        deactivate SETTLE_DAO

        SSAPI -> SETTLE_DAO: Retrieve full information for settlement windows\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Select from DB
        activate DB
        hnote over DB #LightYellow
            SELECT ssw.settlementWindowId, sswsc.settlementWindowStateId, sswsc.reason, sswsc.createdDate
            FROM **settlementSettlementWindow** AS ssw
            JOIN (SELECT sswsc1.settlementWindowId, MAX(sswsc1.settlementWindowStateChangeId) AS
                        maxSettlementWindowStateChangeId
                    FROM **settlementSettlementWindowStateChange** AS sswsc1
                   WHERE sswsc1.settlementWindowId IN (
                        SELECT ssw1.settlementWindowId
                    FROM **settlementSettlementWindow** AS ssw1
                    WHERE ssw1.settlementId = {id})
                GROUP BY sswsc1.settlementWindowId) ssws
            ON ssws.settlementWindowId = ssw.settlementWindowId
            JOIN **settlementSettlementWindowStateChange** AS sswsc
            ON sswsc.settlementWindowStateChangeId = ssws.maxSettlementWindowStateChangeId
            WHERE ssw.settlementId = {id}
        end hnote
        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **windowsList**
            Has information about all windows and their current state/reason
        end note
        SSAPI <- - SETTLE_DAO: Return **windowsList**
        deactivate SETTLE_DAO

        SSAPI -> SETTLE_DAO: Retrieve full information for settlement windows accounts\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Select from DB
        activate DB
        hnote over DB #LightYellow
            SELECT ssw.settlementWindowId, tp.participantCurrencyId
            FROM **settlementSettlementWindow** AS ssw
            JOIN **transferFulfilment** AS tf
            ON tf.settlementWindowId = ssw.settlementWindowId
            JOIN **transferParticipant** AS tp
            ON tp.transferId = tf.transferId
            WHERE settlementId = {id}
            GROUP BY ssw.settlementWindowId, tp.participantCurrencyId
        end hnote
        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **windowsAccountsList**
            Has information about all accounts and windows
        end note
        SSAPI <- - SETTLE_DAO: Return **windowsAccountsList**
        deactivate SETTLE_DAO

        note right of SSAPI #Pink
        **Design still in progress**

        Apply filters to datalist(s) from DB
        Format reply messages
        end note

        SSAPI <- - SETTLE_DAO: Operation successfully completed
        note left of SSAPI #Yellow
            [
              {
                "Id": 0,
                "State": "string",
                "settlementWindows": [
                  [
                    {
                      "id": 0,
                      "reason": "string",
                      "state": "string",
                      "createdDate": "string",
                      "changedDate": "string"
                    }
                  ]
                ],
                "Participants": [
                  {
                    "id": 0,
                    "accounts": [
                      {
                        "id": "string",
                        "reason": "string",
                        "state": "PENDING-SETTLEMENT",
                        "netSettlementAmount": {
                          "amount": 0,
                          "currency": "string"
                        }
                      }
                    ]
                  }
                ]
              }
            ]
        end note
        OPERATOR <- - SSAPI: Return results
    deactivate SSAPI
    else <color #FF0000><b>Settlement not found</b></color>
        SETTLE_DAO - -> SSAPI: settlement not found - Return ERROR
        deactivate SETTLE_DAO
        activate SSAPI
        SSAPI - -> SSAPI: Update Event log
        note right of SSAPI #LightBlue
            Log ERROR Messages.
            Update Event log with ERROR.
        end note
        note left of SSAPI #Yellow
            {
              "status": 0,
              "code": "(ERROR response code eg. '404' - Defined in swagger definition))",
              "message": "string"
            }
        end note
        OPERATOR <- - SSAPI: Return ERROR
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b29
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>