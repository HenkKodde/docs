<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1758.0001px" preserveAspectRatio="none" style="width:657px;height:1758px;" version="1.1" viewBox="0 0 657 1758" width="657px" zoomAndPan="magnify"><defs><filter height="300%" id="fwhtss73mrfkf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="259.8" x="199.2" y="14.1211">6.2.0. Returns Settlement(s) as per parameters/filter criteria</text><rect fill="#FFB6C1" height="1731.0176" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="67.2" x="17.4" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="26.7" y="28.234">Central HUB</text><rect fill="#90EE90" height="1731.0176" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="294.3" x="160.5" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="270.45" y="28.234">Settlement Service</text><rect fill="#FFFFE0" height="1731.0176" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="68.4" x="510" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="511.8" y="28.234">Central Services</text><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="1592.059" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="48" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="1366.5047" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="207" y="203.4492"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="151.6359" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="415.2" y="230.0356"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="225.1266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="415.2" y="422.8442"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="335.3625" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="415.2" y="674.5571"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="74.318" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="541.2" y="247.8082"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="111.0633" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="541.2" y="440.6168"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="202.9266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="541.2" y="692.3297"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="1597.0454" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="642.6" x="7.8" y="92.5723"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="1294.5598" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="630.6" x="13.8" y="390.8578"/><rect fill="#FFFFFF" height="110.4773" style="stroke: none; stroke-width: 0.6000000238418579;" width="630.6" x="13.8" y="1574.9403"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="51" x2="51" y1="82.3723" y2="1699.8176"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="209.7" x2="209.7" y1="82.3723" y2="1699.8176"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="418.2" x2="418.2" y1="82.3723" y2="1699.8176"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="544.2" x2="544.2" y1="82.3723" y2="1699.8176"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="19.8" y="80.6004">Hub Employee</text><ellipse cx="51" cy="38.2793" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M51,43.0793 L51,59.2793 M43.2,47.8793 L58.8,47.8793 M51,59.2793 L43.2,68.2793 M51,59.2793 L58.8,68.2793 " fill="none" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="19.8" y="1707.3387">Hub Employee</text><ellipse cx="51" cy="1715.1106" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M51,1719.9106 L51,1736.1106 M43.2,1724.7106 L58.8,1724.7106 M51,1736.1106 L43.2,1745.1106 M51,1736.1106 L58.8,1745.1106 " fill="none" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="162.9" y="80.6004">Settlement Service API</text><path d="M197.7,55.6793 L197.7,70.0793 M197.7,62.8793 L207.9,62.8793 " fill="none" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="215.1" cy="62.8793" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="162.9" y="1707.3387">Settlement Service API</text><path d="M197.7,1711.5106 L197.7,1725.9106 M197.7,1718.7106 L207.9,1718.7106 " fill="none" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="215.1" cy="1718.7106" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="384" y="80.6004">Settlement DAO</text><ellipse cx="418.2" cy="62.8793" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="411" x2="425.4" y1="71.2793" y2="71.2793"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="384" y="1707.3387">Settlement DAO</text><ellipse cx="418.2" cy="1718.7106" fill="#FEFECE" filter="url(#fwhtss73mrfkf)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="411" x2="425.4" y1="1727.1106" y2="1727.1106"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="515.4" y="80.6004">Central Store</text><path d="M533.4,50.8793 C533.4,44.8793 544.2,44.8793 544.2,44.8793 C544.2,44.8793 555,44.8793 555,50.8793 L555,66.4793 C555,72.4793 544.2,72.4793 544.2,72.4793 C544.2,72.4793 533.4,72.4793 533.4,66.4793 L533.4,50.8793 " fill="#FEFECE" filter="url(#fwhtss73mrfkf)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M533.4,50.8793 C533.4,56.8793 544.2,56.8793 544.2,56.8793 C544.2,56.8793 555,56.8793 555,50.8793 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="515.4" y="1707.3387">Central Store</text><path d="M533.4,1715.1106 C533.4,1709.1106 544.2,1709.1106 544.2,1709.1106 C544.2,1709.1106 555,1709.1106 555,1715.1106 L555,1730.7106 C555,1736.7106 544.2,1736.7106 544.2,1736.7106 C544.2,1736.7106 533.4,1736.7106 533.4,1730.7106 L533.4,1715.1106 " fill="#FEFECE" filter="url(#fwhtss73mrfkf)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M533.4,1715.1106 C533.4,1721.1106 544.2,1721.1106 544.2,1721.1106 C544.2,1721.1106 555,1721.1106 555,1715.1106 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="1592.059" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="48" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="1366.5047" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="207" y="203.4492"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="151.6359" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="415.2" y="230.0356"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="225.1266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="415.2" y="422.8442"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="335.3625" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="415.2" y="674.5571"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="74.318" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="541.2" y="247.8082"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="111.0633" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="541.2" y="440.6168"/><rect fill="#FFFFFF" filter="url(#fwhtss73mrfkf)" height="202.9266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="541.2" y="692.3297"/><path d="M7.8,92.5723 L143.4,92.5723 L143.4,96.7723 L137.4,102.7723 L7.8,102.7723 L7.8,92.5723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="1597.0454" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="642.6" x="7.8" y="92.5723"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108.6" x="16.8" y="100.7133">Request Settlement Details</text><path d="M57,105.9586 L57,185.1586 L247.8,185.1586 L247.8,111.9586 L241.8,105.9586 L57,105.9586 " fill="#FFFF00" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M241.8,105.9586 L241.8,111.9586 L247.8,111.9586 L241.8,105.9586 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67.8" x="60.6" y="116.4996">Filtering Params:</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="178.2" x="60.6" y="125.6859">&amp;settlementWindowId=/settlementWindow/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="103.8" x="60.6" y="134.8723">&amp;currencyId=/currency/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="120.6" x="60.6" y="144.0586">&amp;participantId=/participant/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="99" x="60.6" y="153.2449">&amp;accountId=/account/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="60.6" y="162.4313">&amp;state={state}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="151.8" x="60.6" y="171.6176">&amp;fromDateTime={yyyy-mm-ddThh:mm}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="141.6" x="60.6" y="180.8039">&amp;toDateTime={yyyy-mm-ddThh:mm}</text><polygon fill="#A80036" points="199.8,201.0492,205.8,203.4492,199.8,205.8492,202.2,203.4492" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="54" x2="203.4" y1="203.4492" y2="203.4492"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="58.2" y="200.7902">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="84.6" x="66" y="200.7902">GET - /settlement/{id}</text><polygon fill="#A80036" points="408,227.6356,414,230.0356,408,232.4356,410.4,230.0356" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="213" x2="411.6" y1="230.0356" y2="230.0356"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="217.2" y="222.9697">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="100.2" x="225" y="218.3766">Retrieve settlement details</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="225" y="227.5629">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="271.2" y="227.5629">2001</text><polygon fill="#A80036" points="534,245.4082,540,247.8082,534,250.2082,536.4,247.8082" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="421.2" x2="537.6" y1="247.8082" y2="247.8082"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="425.4" y="245.1492">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="97.8" x="433.2" y="245.1492">Select settlement from DB</text><polygon fill="#FFFFE0" filter="url(#fwhtss73mrfkf)" points="484.2,255.7945,604.2,255.7945,610.2,280.9945,604.2,306.1945,484.2,306.1945,478.2,280.9945,484.2,255.7945" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="51" x="485.4" y="265.7356">SELECT FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="485.4" y="274.9219">settlement</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="47.4" x="495" y="284.1082">settlementId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117.6" x="485.4" y="293.2945">settlementSettlementChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66" x="495" y="302.4809">settlementStateId</text><polygon fill="#A80036" points="427.8,319.7262,421.8,322.1262,427.8,324.5262,425.4,322.1262" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="424.2" x2="543.6" y1="322.1262" y2="322.1262"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="431.4" y="319.4672">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="439.2" y="319.4672">Return data</text><path d="M250.2,330.1125 L250.2,363.1125 L409.8,363.1125 L409.8,336.1125 L403.8,330.1125 L250.2,330.1125 " fill="#D3D3D3" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M403.8,330.1125 L403.8,336.1125 L409.8,336.1125 L403.8,330.1125 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="253.8" y="340.6535">settlementData</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="147" x="253.8" y="349.8399">Contains information about settlement</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="253.8" y="359.0262">-state</text><polygon fill="#A80036" points="219.6,379.2715,213.6,381.6715,219.6,384.0715,217.2,381.6715" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="216" x2="417.6" y1="381.6715" y2="381.6715"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="223.2" y="379.0125">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="231" y="379.0125">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="258" y="379.0125">settlementData</text><path d="M13.8,390.8578 L51,390.8578 L51,395.0578 L45,401.0578 L13.8,401.0578 L13.8,390.8578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="1294.5598" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="630.6" x="13.8" y="390.8578"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="22.8" y="398.9988">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="60" y="398.4387">[Settlement found]</text><polygon fill="#A80036" points="408,420.4442,414,422.8442,408,425.2442,410.4,422.8442" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="213" x2="411.6" y1="422.8442" y2="422.8442"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="217.2" y="415.7783">6</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="183" x="225" y="411.1852">Retrieve full information for settlement windows</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="225" y="420.3715">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="271.2" y="420.3715">2001</text><polygon fill="#A80036" points="534,438.2168,540,440.6168,534,443.0168,536.4,440.6168" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="421.2" x2="537.6" y1="440.6168" y2="440.6168"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="425.4" y="437.9578">7</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="433.2" y="437.9578">Select from DB</text><polygon fill="#FFFFE0" filter="url(#fwhtss73mrfkf)" points="480,448.6031,608.4,448.6031,614.4,491.8031,608.4,535.6031,480,535.6031,474,491.8031,480,448.6031" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118.2" x="481.2" y="458.5442">settlementSettlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="47.4" x="490.8" y="467.7305">settlementId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="490.8" y="476.9168">settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="481.2" y="486.1031">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="45" x="490.8" y="495.2895">createdDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="481.2" y="504.4758">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="490.8" y="513.6621">reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="101.4" x="490.8" y="522.8485">createdDate (changedDate)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="483.6" y="532.0348"/><polygon fill="#A80036" points="427.8,549.2801,421.8,551.6801,427.8,554.0801,425.4,551.6801" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="424.2" x2="543.6" y1="551.6801" y2="551.6801"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="431.4" y="549.0211">8</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="439.2" y="549.0211">Return data</text><path d="M209.4,559.6664 L209.4,629.8664 L409.8,629.8664 L409.8,565.6664 L403.8,559.6664 L209.4,559.6664 " fill="#D3D3D3" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M403.8,559.6664 L403.8,565.6664 L409.8,565.6664 L403.8,559.6664 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49.8" x="213" y="570.2074">windowsList</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="187.8" x="213" y="579.3938">Contains about settlement windows in settlement</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="213" y="588.5801">-settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="30" x="213" y="597.7664">-reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="213" y="606.9528">-state</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="49.8" x="213" y="616.1391">-createdDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="54" x="213" y="625.3254">-changedDate</text><polygon fill="#A80036" points="219.6,645.5707,213.6,647.9707,219.6,650.3707,217.2,647.9707" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="216" x2="417.6" y1="647.9707" y2="647.9707"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="223.2" y="645.3117">9</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="231" y="645.3117">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49.8" x="258" y="645.3117">windowsList</text><polygon fill="#A80036" points="408,672.1571,414,674.5571,408,676.9571,410.4,674.5571" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="213" x2="411.6" y1="674.5571" y2="674.5571"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="217.2" y="667.4912">10</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="169.2" x="230.4" y="662.8981">Retrieve information for settlement accounts</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="230.4" y="672.0844">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="276.6" y="672.0844">2001</text><polygon fill="#A80036" points="534,689.9297,540,692.3297,534,694.7297,536.4,692.3297" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="421.2" x2="537.6" y1="692.3297" y2="692.3297"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="425.4" y="689.6707">11</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="55.2" x="438.6" y="689.6707">Select from DB</text><polygon fill="#FFFFE0" filter="url(#fwhtss73mrfkf)" points="455.4,700.316,632.4,700.316,638.4,789.716,632.4,879.1161,455.4,879.1161,449.4,789.716,455.4,700.316" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="51" x="456.6" y="710.2571">SELECT FROM</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73.2" x="456.6" y="719.4434">transferFulfilment</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="36.6" x="466.2" y="728.6297">transferid</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="466.2" y="737.816">settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76.2" x="456.6" y="747.0024">transferParticipant</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="36.6" x="466.2" y="756.1887">transferId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="466.2" y="765.375">participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="456.6" y="774.5614">participantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="466.2" y="783.7477">participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="48" x="466.2" y="792.934">participantId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="466.2" y="802.1203">currencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124.2" x="456.6" y="811.3067">settlementParticipantCurrency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="466.2" y="820.493">settlementId - ?</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="466.2" y="829.6793">participantCurrencyId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="42" x="466.2" y="838.8657">netAmount</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174.6" x="456.6" y="848.052">settlementSettlementCurrencyStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66" x="466.2" y="857.2383">settlementStateId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="466.2" y="866.4246">reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="459" y="875.611"/><polygon fill="#A80036" points="427.8,892.8563,421.8,895.2563,427.8,897.6563,425.4,895.2563" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="424.2" x2="543.6" y1="895.2563" y2="895.2563"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="431.4" y="892.5973">12</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="444.6" y="892.5973">Return data</text><path d="M204,903.2426 L204,991.4426 L409.8,991.4426 L409.8,909.2426 L403.8,903.2426 L204,903.2426 " fill="#D3D3D3" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M403.8,903.2426 L403.8,909.2426 L409.8,909.2426 L403.8,903.2426 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.8" x="207.6" y="913.7836">settlementAccountsList</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="193.2" x="207.6" y="922.97">Holds information about all accounts in settlement</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="81.6" x="207.6" y="932.1563">-settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="217.2" y="941.3426">-participantId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="123.6" x="226.8" y="950.5289">-participantCurrencyId (account)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="30" x="226.8" y="959.7153">-reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="226.8" y="968.9016">-state</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.8" x="226.8" y="978.0879">-amount (netAmount)</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="44.4" x="226.8" y="987.2743">-currencyId</text><polygon fill="#A80036" points="219.6,1007.5196,213.6,1009.9196,219.6,1012.3196,217.2,1009.9196" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="216" x2="417.6" y1="1009.9196" y2="1009.9196"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="223.2" y="1007.2606">13</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="24.6" x="236.4" y="1007.2606">Return</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94.8" x="263.4" y="1007.2606">settlementAccountsList</text><path d="M216,1017.9059 L216,1216.5059 L408,1216.5059 L408,1023.9059 L402,1017.9059 L216,1017.9059 " fill="#FFC0CB" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M402,1017.9059 L402,1023.9059 L408,1023.9059 L402,1017.9059 " fill="#FFC0CB" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93.6" x="219.6" y="1028.4469">Design still in progress</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="222" y="1037.6332"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="118.8" x="219.6" y="1046.8196">settlementId = /settlement/{id}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="219.6" y="1056.0059">loop</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="169.8" x="229.2" y="1065.1922">settlementWindowId = &amp;settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="121.2" x="229.2" y="1074.3786">createdDate &gt;= &amp;fromDateTime</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="111" x="229.2" y="1083.5649">createdDate &lt;= &amp;toDateTime</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="229.2" y="1092.7512">loop</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="112.2" x="238.8" y="1101.9375">participantId = &amp;participantId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="16.8" x="238.8" y="1111.1239">loop</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="127.8" x="248.4" y="1120.3102">participantCurrencyId = &amp;account</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="248.4" y="1129.4965">currencyId = &amp;currency</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="248.4" y="1138.6829">state = &amp;state</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="13.8" x="238.8" y="1147.8692">end</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="13.8" x="229.2" y="1157.0555">end</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="13.8" x="219.6" y="1166.2418">end</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="222" y="1175.4282"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="222" y="1184.6145"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="129" x="219.6" y="1193.8008">Apply filters to datalist(s) from DB</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="0" x="222" y="1202.9872"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="87" x="219.6" y="1212.1735">Format reply messages</text><polygon fill="#A80036" points="219.6,1232.4188,213.6,1234.8188,219.6,1237.2188,217.2,1234.8188" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="216" x2="417.6" y1="1234.8188" y2="1234.8188"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="223.2" y="1232.1598">14</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="128.4" x="236.4" y="1232.1598">Operation successfully completed</text><path d="M35.4,1242.8051 L35.4,1551.8051 L201.6,1551.8051 L201.6,1248.8051 L195.6,1242.8051 L35.4,1242.8051 " fill="#FFFF00" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M195.6,1242.8051 L195.6,1248.8051 L201.6,1248.8051 L195.6,1242.8051 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="39" y="1253.3461">[</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="43.8" y="1262.5325">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="48.6" y="1271.7188">"Id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="48.6" y="1280.9051">"State": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="87" x="48.6" y="1290.0915">"settlementWindows": [</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="53.4" y="1299.2778">[</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="58.2" y="1308.4641">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="63" y="1317.6504">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="63" y="1326.8368">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="63" y="1336.0231">"state": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="63" y="1345.2094">"createdDate": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="63" y="1354.3958">"changedDate": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="58.2" y="1363.5821">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="53.4" y="1372.7684">]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="4.8" x="48.6" y="1381.9547">],</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="57.6" x="48.6" y="1391.1411">"Participants": [</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="53.4" y="1400.3274">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="58.2" y="1409.5137">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="47.4" x="58.2" y="1418.7001">"accounts": [</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="63" y="1427.8864">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="67.8" y="1437.0727">"id": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="67.8" y="1446.259">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="124.8" x="67.8" y="1455.4454">"state": "PENDING-SETTLEMENT",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="95.4" x="67.8" y="1464.6317">"netSettlementAmount": {</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="46.8" x="72.6" y="1473.818">"amount": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="71.4" x="72.6" y="1483.0044">"currency": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="67.8" y="1492.1907">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="63" y="1501.377">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="58.2" y="1510.5633">]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="53.4" y="1519.7497">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="48.6" y="1528.936">]</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="43.8" y="1538.1223">}</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="39" y="1547.3087">]</text><polygon fill="#A80036" points="60.6,1567.554,54.6,1569.954,60.6,1572.354,58.2,1569.954" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="57" x2="209.4" y1="1569.954" y2="1569.954"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="64.2" y="1567.295">15</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="77.4" y="1567.295">Return results</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="13.8" x2="644.4" y1="1575.5403" y2="1575.5403"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="16.8" y="1581.9212">[Settlement not found]</text><path d="M213,1586.9133 L213,1601.9133 L289.2,1601.9133 L289.2,1592.9133 L283.2,1586.9133 L213,1586.9133 " fill="#D3D3D3" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M283.2,1586.9133 L283.2,1592.9133 L289.2,1592.9133 L283.2,1586.9133 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="63.6" x="216.6" y="1597.4544">Log ERROR event</text><path d="M104.4,1610.4997 L104.4,1662.0997 L204.6,1662.0997 L204.6,1616.4997 L198.6,1610.4997 L104.4,1610.4997 " fill="#FFFF00" filter="url(#fwhtss73mrfkf)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M198.6,1610.4997 L198.6,1616.4997 L204.6,1616.4997 L198.6,1610.4997 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="108" y="1621.0407">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="41.4" x="117.6" y="1630.227">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="117.6" y="1639.4133">"code": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="78" x="117.6" y="1648.5997">"message": &lt;string&gt;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="108" y="1657.786">}</text><polygon fill="#A80036" points="57.6,1678.0313,51.6,1680.4313,57.6,1682.8313,55.2,1680.4313" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="54" x2="209.4" y1="1680.4313" y2="1680.4313"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="61.2" y="1677.7723">16</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="61.8" x="74.4" y="1677.7723">Respond HTTP -</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="64.2" x="138.6" y="1677.7723">4xx (Client error)</text><!--
@startuml
title 6.2.0. Returns Settlement(s) as per parameters/filter criteria

autonumber

actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #LightPink
    participant OPERATOR
end box

box "Settlement Service" #LightGreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #LightYellow
    participant DB
end box

group Request Settlement Details
    activate OPERATOR
    note right of OPERATOR #Yellow
        **Filtering Params:**
        &settlementWindowId=/settlementWindow/{id}
        &currencyId=/currency/{id}
        &participantId=/participant/{id}
        &accountId=/account/{id}
        &state={state}
        &fromDateTime={yyyy-mm-ddThh:mm}
        &toDateTime={yyyy-mm-ddThh:mm}
    end note

    OPERATOR -> SSAPI: GET - /settlement/{id}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Retrieve settlement details\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO

    SETTLE_DAO -> DB: Select settlement from DB
    activate DB
    hnote over DB #LightYellow
        SELECT FROM
        **settlement**
            settlementId
        **settlementSettlementChange**
            settlementStateId
    end hnote

        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **settlementData**
            Contains information about settlement
            -state
        end note
        SSAPI <- - SETTLE_DAO: Return **settlementData**
        deactivate SETTLE_DAO
    alt Settlement found

        SSAPI -> SETTLE_DAO: Retrieve full information for settlement windows\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Select from DB
        activate DB
        hnote over DB #LightYellow
            **settlementSettlementWindow**
                settlementId
                settlementWindowId
            **settlementWindow**
                createdDate
            **settlementWindowStateChange**
                reason
                createdDate (changedDate)

        end hnote
        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **windowsList**
            Contains about settlement windows in settlement
            -settlementWindowId
            -reason
            -state
            -createdDate
            -changedDate
        end note
        SSAPI <- - SETTLE_DAO: Return **windowsList**
        deactivate SETTLE_DAO

        SSAPI -> SETTLE_DAO: Retrieve information for settlement accounts\n<color #FF0000><b>Error code:</b> 2001</color>
        activate SETTLE_DAO
        SETTLE_DAO -> DB: Select from DB
        activate DB
        hnote over DB #LightYellow
            SELECT FROM
            **transferFulfilment**
                transferid
                settlementWindowId
            **transferParticipant**
                transferId
                participantCurrencyId
            **participantCurrency**
                participantCurrencyId
                participantId
                currencyId
            **settlementParticipantCurrency**
                settlementId - ?
                participantCurrencyId
                netAmount
            **settlementSettlementCurrencyStateChange**
                settlementStateId
                reason

        end hnote
        SETTLE_DAO <- - DB: Return data
        deactivate DB
        note left of SETTLE_DAO #LightGray
            **settlementAccountsList**
            Holds information about all accounts in settlement
            -settlementWindowId
                -participantId
                    -participantCurrencyId (account)
                    -reason
                    -state
                    -amount (netAmount)
                    -currencyId
        end note
        SSAPI <- - SETTLE_DAO: Return **settlementAccountsList**
        deactivate SETTLE_DAO

        note right of SSAPI #Pink
        **Design still in progress**

        settlementId = /settlement/{id}
        loop
            settlementWindowId = &settlementWindowId
            createdDate >= &fromDateTime
            createdDate <= &toDateTime
            loop
                participantId = &participantId
                loop
                    participantCurrencyId = &account
                    currencyId = &currency
                    state = &state
                end
            end
        end


        Apply filters to datalist(s) from DB

        Format reply messages
        end note

        SSAPI <- - SETTLE_DAO: Operation successfully completed
        note left of SSAPI #Yellow
            [
              {
                "Id": 0,
                "State": "string",
                "settlementWindows": [
                  [
                    {
                      "id": 0,
                      "reason": "string",
                      "state": "string",
                      "createdDate": "string",
                      "changedDate": "string"
                    }
                  ]
                ],
                "Participants": [
                  {
                    "id": 0,
                    "accounts": [
                      {
                        "id": "string",
                        "reason": "string",
                        "state": "PENDING-SETTLEMENT",
                        "netSettlementAmount": {
                          "amount": 0,
                          "currency": "string"
                        }
                      }
                    ]
                  }
                ]
              }
            ]
        end note
        OPERATOR <- - SSAPI: Return results
    deactivate SSAPI
    else Settlement not found
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                "status": 0,
                "code": <integer>,
                "message": <string>
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - <color #FF0000>4xx (Client error)</color>
        deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b29
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>