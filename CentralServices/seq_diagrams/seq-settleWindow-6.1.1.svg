<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="736.8px" preserveAspectRatio="none" style="width:852px;height:736px;" version="1.1" viewBox="0 0 852 736" width="852.6px" zoomAndPan="magnify"><defs><filter height="300%" id="fsm8fw3qjpm6i" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169.2" x="342" y="14.1211">Returns a Settlement Window as per id</text><rect fill="#FFB6C1" height="709.7438" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="67.2" x="150" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="159.3" y="28.234">Central HUB</text><rect fill="#90EE90" height="709.7438" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="286.5" x="277.5" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74.4" x="383.55" y="28.234">Settlement Service</text><rect fill="#FFFFE0" height="709.7438" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="68.4" x="623.4" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="625.2" y="28.234">Central Services</text><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="570.7852" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="180.6" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="543.5988" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="115.5586"/><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="389.9356" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="524.4" y="133.1449"/><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="208.3266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="654.6" y="159.7313"/><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="575.7715" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="837.6" x="7.8" y="92.5723"/><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="286.8996" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="553.8" x="13.8" y="377.2442"/><rect fill="#FFFFFF" height="162.6363" style="stroke: none; stroke-width: 0.6000000238418579;" width="553.8" x="13.8" y="501.5074"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="183.6" x2="183.6" y1="82.3723" y2="678.5438"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="326.7" x2="326.7" y1="82.3723" y2="678.5438"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="527.4" x2="527.4" y1="82.3723" y2="678.5438"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="657.6" x2="657.6" y1="82.3723" y2="678.5438"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="152.4" y="80.6004">Hub Employee</text><ellipse cx="183.6" cy="38.2793" fill="#FEFECE" filter="url(#fsm8fw3qjpm6i)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M183.6,43.0793 L183.6,59.2793 M175.8,47.8793 L191.4,47.8793 M183.6,59.2793 L175.8,68.2793 M183.6,59.2793 L191.4,68.2793 " fill="none" filter="url(#fsm8fw3qjpm6i)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="58.8" x="152.4" y="686.0649">Hub Employee</text><ellipse cx="183.6" cy="693.8367" fill="#FEFECE" filter="url(#fsm8fw3qjpm6i)" rx="4.8" ry="4.8" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><path d="M183.6,698.6367 L183.6,714.8367 M175.8,703.4367 L191.4,703.4367 M183.6,714.8367 L175.8,723.8367 M183.6,714.8367 L191.4,723.8367 " fill="none" filter="url(#fsm8fw3qjpm6i)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="80.6004">Settlement Service API</text><path d="M314.7,55.6793 L314.7,70.0793 M314.7,62.8793 L324.9,62.8793 " fill="none" filter="url(#fsm8fw3qjpm6i)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="62.8793" fill="#FEFECE" filter="url(#fsm8fw3qjpm6i)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="90.6" x="279.9" y="686.0649">Settlement Service API</text><path d="M314.7,690.2367 L314.7,704.6367 M314.7,697.4367 L324.9,697.4367 " fill="none" filter="url(#fsm8fw3qjpm6i)" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><ellipse cx="332.1" cy="697.4367" fill="#FEFECE" filter="url(#fsm8fw3qjpm6i)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="493.2" y="80.6004">Settlement DAO</text><ellipse cx="527.4" cy="62.8793" fill="#FEFECE" filter="url(#fsm8fw3qjpm6i)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="520.2" x2="534.6" y1="71.2793" y2="71.2793"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="493.2" y="686.0649">Settlement DAO</text><ellipse cx="527.4" cy="697.4367" fill="#FEFECE" filter="url(#fsm8fw3qjpm6i)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><line style="stroke: #A80036; stroke-width: 1.2000000476837158;" x1="520.2" x2="534.6" y1="705.8367" y2="705.8367"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="628.8" y="80.6004">Central Store</text><path d="M646.8,50.8793 C646.8,44.8793 657.6,44.8793 657.6,44.8793 C657.6,44.8793 668.4,44.8793 668.4,50.8793 L668.4,66.4793 C668.4,72.4793 657.6,72.4793 657.6,72.4793 C657.6,72.4793 646.8,72.4793 646.8,66.4793 L646.8,50.8793 " fill="#FEFECE" filter="url(#fsm8fw3qjpm6i)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M646.8,50.8793 C646.8,56.8793 657.6,56.8793 657.6,56.8793 C657.6,56.8793 668.4,56.8793 668.4,50.8793 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="54" x="628.8" y="686.0649">Central Store</text><path d="M646.8,693.8367 C646.8,687.8367 657.6,687.8367 657.6,687.8367 C657.6,687.8367 668.4,687.8367 668.4,693.8367 L668.4,709.4367 C668.4,715.4367 657.6,715.4367 657.6,715.4367 C657.6,715.4367 646.8,715.4367 646.8,709.4367 L646.8,693.8367 " fill="#FEFECE" filter="url(#fsm8fw3qjpm6i)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M646.8,693.8367 C646.8,699.8367 657.6,699.8367 657.6,699.8367 C657.6,699.8367 668.4,699.8367 668.4,693.8367 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="570.7852" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="180.6" y="88.3723"/><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="543.5988" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="324" y="115.5586"/><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="389.9356" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="524.4" y="133.1449"/><rect fill="#FFFFFF" filter="url(#fsm8fw3qjpm6i)" height="208.3266" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="654.6" y="159.7313"/><path d="M7.8,92.5723 L192,92.5723 L192,96.7723 L186,102.7723 L7.8,102.7723 L7.8,92.5723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="575.7715" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="837.6" x="7.8" y="92.5723"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157.2" x="16.8" y="100.7133">Request Settlement Window properties</text><polygon fill="#A80036" points="316.8,113.1586,322.8,115.5586,316.8,117.9586,319.2,115.5586" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="186.6" x2="320.4" y1="115.5586" y2="115.5586"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="190.8" y="112.8996">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="118.2" x="198.6" y="112.8996">GET - /settlementWindows/{id}</text><polygon fill="#A80036" points="517.2,130.7449,523.2,133.1449,517.2,135.5449,519.6,133.1449" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="330" x2="520.8" y1="133.1449" y2="133.1449"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="130.4859">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="102" x="342" y="130.4859">Request settlementWindow</text><polygon fill="#A80036" points="647.4,157.3313,653.4,159.7313,647.4,162.1313,649.8,159.7313" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="530.4" x2="651" y1="159.7313" y2="159.7313"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="534.6" y="152.6654">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="102" x="542.4" y="148.0723">Request settlementWindow</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="542.4" y="157.2586">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="588.6" y="157.2586">2001</text><path d="M586.8,167.9039 L586.8,228.5039 L725.4,228.5039 L725.4,173.9039 L719.4,167.9039 L586.8,167.9039 " fill="#FFFFE0" filter="url(#fsm8fw3qjpm6i)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M719.4,167.9039 L719.4,173.9039 L725.4,173.9039 L719.4,167.9039 " fill="#FFFFE0" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="590.4" y="178.4449">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="40.2" x="600" y="187.6313">createDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="590.4" y="196.8176">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="18.6" x="600" y="206.0039">state</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="600" y="215.1902">reason</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="44.4" x="600" y="224.3766">changeDate</text><polygon fill="#FFFFE0" filter="url(#fsm8fw3qjpm6i)" points="481.8,237.4219,833.4,237.4219,839.4,294.4219,833.4,352.0219,481.8,352.0219,475.8,294.4219,481.8,237.4219" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="293.4" x="483" y="247.3629">SELECT sw.settlementWindowId, swsc.reason, swsc.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="190.8" x="502.2" y="256.5492">sw.createdDate, swsc.createdDate as changedDate</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="118.2" x="483" y="265.7356">FROM settlementWindow AS sw</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="151.2" x="492.6" y="274.9219">JOIN (SELECT swsc.settlementWindowId,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="320.4" x="511.8" y="284.1082">MAX(swsc.settlementWindowStateChangeId) AS maxSettlementWindowStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="173.4" x="502.2" y="293.2945">FROM settlementWindowStateChange AS swsc</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="126" x="502.2" y="302.4809">WHERE swsc.settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="160.8" x="502.2" y="311.6672">GROUP BY swsc.settlementWindowId) ssws</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="212.4" x="492.6" y="320.8535">ON ssws.settlementWindowId = sw.settlementWindowId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="168.6" x="483" y="330.0399">JOIN settlementWindowStateChange AS swsc</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="330.6" x="483" y="339.2262">ON swsc.settlementWindowStateChangeId = ssws.maxSettlementWindowStateChangeId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="220.8" x="483" y="348.4125">WHERE sw.settlementWindowId = /settlementWindow/{id};</text><polygon fill="#A80036" points="537,365.6578,531,368.0578,537,370.4578,534.6,368.0578" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="533.4" x2="657" y1="368.0578" y2="368.0578"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="540.6" y="365.3988">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="548.4" y="365.3988">Return results</text><path d="M13.8,377.2442 L51,377.2442 L51,381.4442 L45,387.4442 L13.8,387.4442 L13.8,377.2442 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="286.8996" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="553.8" x="13.8" y="377.2442"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="22.8" y="385.3852">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="60" y="384.825">[settlementWindow found]</text><polygon fill="#A80036" points="336.6,397.8305,330.6,400.2305,336.6,402.6305,334.2,400.2305" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="523.8" y1="400.2305" y2="400.2305"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="397.5715">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="128.4" x="348" y="397.5715">Operation successfully completed</text><path d="M213,408.2168 L213,478.4168 L318.6,478.4168 L318.6,414.2168 L312.6,408.2168 L213,408.2168 " fill="#FFFF00" filter="url(#fsm8fw3qjpm6i)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,408.2168 L312.6,414.2168 L318.6,414.2168 L312.6,408.2168 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="216.6" y="418.7578">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="221.4" y="427.9442">"id": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="66.6" x="221.4" y="437.1305">"reason": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="60" x="221.4" y="446.3168">"state": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="221.4" y="455.5031">"createdDate": "string",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="88.2" x="221.4" y="464.6895">"changedDate": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="216.6" y="473.8758">}</text><polygon fill="#A80036" points="193.2,494.1211,187.2,496.5211,193.2,498.9211,190.8,496.5211" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="189.6" x2="323.4" y1="496.5211" y2="496.5211"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="196.8" y="493.8621">6</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="52.8" x="204.6" y="493.8621">Return results</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="13.8" x2="567.6" y1="502.1074" y2="502.1074"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="16.8" y="508.4883">[</text><text fill="#FF0000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="19.2" y="508.4883">Settlement Window not found</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="118.2" y="508.4883">]</text><polygon fill="#A80036" points="336.6,520.6805,330.6,523.0805,336.6,525.4805,334.2,523.0805" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="333" x2="526.8" y1="523.0805" y2="523.0805"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="340.2" y="520.4215">7</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="172.2" x="348" y="520.4215">settlement window not found - Return ERROR</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="330" x2="355.2" y1="540.8531" y2="540.8531"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="355.2" x2="355.2" y1="540.8531" y2="548.6531"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="330.6" x2="355.2" y1="548.6531" y2="548.6531"/><polygon fill="#A80036" points="336.6,546.2531,330.6,548.6531,336.6,551.0531,334.2,548.6531" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="334.2" y="538.0078">8</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="63.6" x="342" y="538.0078">Update Event log</text><path d="M333,556.4531 L333,580.4531 L457.2,580.4531 L457.2,562.4531 L451.2,556.4531 L333,556.4531 " fill="#ADD8E6" filter="url(#fsm8fw3qjpm6i)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M451.2,556.4531 L451.2,562.4531 L457.2,562.4531 L451.2,556.4531 " fill="#ADD8E6" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="82.2" x="336.6" y="566.9942">Log ERROR Messages.</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="111.6" x="336.6" y="576.1805">Update Event log with ERROR.</text><path d="M19.8,589.2258 L19.8,640.8258 L318.6,640.8258 L318.6,595.2258 L312.6,589.2258 L19.8,589.2258 " fill="#FFFF00" filter="url(#fsm8fw3qjpm6i)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M312.6,589.2258 L312.6,595.2258 L318.6,595.2258 L312.6,589.2258 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="599.7668">{</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="41.4" x="28.2" y="608.9531">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="281.4" x="28.2" y="618.1395">"code": "(ERROR response code eg. '404' - Defined in swagger definition))",</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="72" x="28.2" y="627.3258">"message": "string"</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="23.4" y="636.5121">}</text><polygon fill="#A80036" points="190.2,656.7574,184.2,659.1574,190.2,661.5574,187.8,659.1574" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="186.6" x2="326.4" y1="659.1574" y2="659.1574"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="193.8" y="656.4985">9</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="51.6" x="201.6" y="656.4985">Return ERROR</text><!--
@startuml
title Returns a Settlement Window as per id

autonumber

actor "Hub Employee" as OPERATOR

boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO

database "Central Store" as DB

box "Central HUB" #LightPink
    participant OPERATOR
end box

box "Settlement Service" #LightGreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #LightYellow
    participant DB
end box

group Request Settlement Window properties
    activate OPERATOR
    OPERATOR -> SSAPI: GET - /settlementWindows/{id}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Request settlementWindow\n<color #FF0000><b>Error code:</b> 2001</color>
    activate DB
    note over DB #LightYellow
        **settlementWindow**
            createDate
        **settlementWindowStateChange**
            state
            reason
            changeDate
    end note
    hnote over DB #LightYellow
        SELECT sw.settlementWindowId, swsc.reason, swsc.settlementWindowStateId,
                sw.createdDate, swsc.createdDate as changedDate
        FROM settlementWindow AS sw
            JOIN (SELECT swsc.settlementWindowId,
                    MAX(swsc.settlementWindowStateChangeId) AS maxSettlementWindowStateChangeId
                FROM settlementWindowStateChange AS swsc
                WHERE swsc.settlementWindowId
                GROUP BY swsc.settlementWindowId) ssws
            ON ssws.settlementWindowId = sw.settlementWindowId
        JOIN settlementWindowStateChange AS swsc
        ON swsc.settlementWindowStateChangeId = ssws.maxSettlementWindowStateChangeId
        WHERE sw.settlementWindowId = /settlementWindow/{id};
    end hnote
    SETTLE_DAO <- - DB: Return results
    deactivate DB
    alt settlementWindow found
        SSAPI <- - SETTLE_DAO: Operation successfully completed
        note left of SSAPI #Yellow
            {
              "id": 0,
              "reason": "string",
              "state": "string",
              "createdDate": "string",
              "changedDate": "string"
            }
        end note
        OPERATOR <- - SSAPI: Return results
    else <color #FF0000><b>Settlement Window not found</b></color>
        SETTLE_DAO - -> SSAPI: settlement window not found - Return ERROR
        deactivate SETTLE_DAO
        SSAPI - -> SSAPI: Update Event log
        note right of SSAPI #LightBlue
            Log ERROR Messages.
            Update Event log with ERROR.
        end note
        note left of SSAPI #Yellow
            {
              "status": 0,
              "code": "(ERROR response code eg. '404' - Defined in swagger definition))",
              "message": "string"
            }
        end note
        OPERATOR <- - SSAPI: Return ERROR
    deactivate SSAPI
    deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.01(Sun Jan 28 20:08:22 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1136-b29
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>