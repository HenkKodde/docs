<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="967px" preserveAspectRatio="none" style="width:972px;height:967px;" version="1.1" viewBox="0 0 972 967" width="972px" zoomAndPan="magnify"><defs><filter height="300%" id="f1n2mh3e6qqy1n" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="489" x="242" y="23.5352">6.1.1. Request Settlement Window By Id (getSettlementWindowById)</text><rect fill="#FFB6C1" height="921.9141" style="stroke: #A80036; stroke-width: 1.0;" width="112" x="29" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="44.5" y="47.0566">Central HUB</text><rect fill="#90EE90" height="921.9141" style="stroke: #A80036; stroke-width: 1.0;" width="390.5" x="263.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="396.75" y="47.0566">Settlement Service</text><rect fill="#FFFFE0" height="921.9141" style="stroke: #A80036; stroke-width: 1.0;" width="114" x="675" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="678" y="47.0566">Central Services</text><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="690.627" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="80" y="147.2871"/><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="645.0059" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="341" y="192.9082"/><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="244.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="588" y="237.5293"/><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="727" y="266.8398"/><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="698.627" style="stroke: #000000; stroke-width: 2.0;" width="947" x="13" y="154.2871"/><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="348.9688" style="stroke: #000000; stroke-width: 2.0;" width="474" x="23" y="496.9453"/><rect fill="#FFFFFF" height="171.1738" style="stroke: none; stroke-width: 1.0;" width="474" x="23" y="674.7402"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="85" x2="85" y1="137.2871" y2="869.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="345.5" x2="345.5" y1="137.2871" y2="869.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="593" x2="593" y1="137.2871" y2="869.9141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="732" x2="732" y1="137.2871" y2="869.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="33" y="134.334">Hub Employee</text><ellipse cx="85" cy="63.7988" fill="#FEFECE" filter="url(#f1n2mh3e6qqy1n)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M85,71.7988 L85,98.7988 M72,79.7988 L98,79.7988 M85,98.7988 L72,113.7988 M85,98.7988 L98,113.7988 " fill="none" filter="url(#f1n2mh3e6qqy1n)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="33" y="882.4492">Hub Employee</text><ellipse cx="85" cy="895.4023" fill="#FEFECE" filter="url(#f1n2mh3e6qqy1n)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M85,903.4023 L85,930.4023 M72,911.4023 L98,911.4023 M85,930.4023 L72,945.4023 M85,930.4023 L98,945.4023 " fill="none" filter="url(#f1n2mh3e6qqy1n)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="267.5" y="134.334">Settlement Service API</text><path d="M325.5,92.7988 L325.5,116.7988 M325.5,104.7988 L342.5,104.7988 " fill="none" filter="url(#f1n2mh3e6qqy1n)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="354.5" cy="104.7988" fill="#FEFECE" filter="url(#f1n2mh3e6qqy1n)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="267.5" y="882.4492">Settlement Service API</text><path d="M325.5,889.4023 L325.5,913.4023 M325.5,901.4023 L342.5,901.4023 " fill="none" filter="url(#f1n2mh3e6qqy1n)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="354.5" cy="901.4023" fill="#FEFECE" filter="url(#f1n2mh3e6qqy1n)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="536" y="134.334">Settlement DAO</text><ellipse cx="593" cy="104.7988" fill="#FEFECE" filter="url(#f1n2mh3e6qqy1n)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="581" x2="605" y1="118.7988" y2="118.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="536" y="882.4492">Settlement DAO</text><ellipse cx="593" cy="901.4023" fill="#FEFECE" filter="url(#f1n2mh3e6qqy1n)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="581" x2="605" y1="915.4023" y2="915.4023"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="684" y="134.334">Central Store</text><path d="M714,84.7988 C714,74.7988 732,74.7988 732,74.7988 C732,74.7988 750,74.7988 750,84.7988 L750,110.7988 C750,120.7988 732,120.7988 732,120.7988 C732,120.7988 714,120.7988 714,110.7988 L714,84.7988 " fill="#FEFECE" filter="url(#f1n2mh3e6qqy1n)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M714,84.7988 C714,94.7988 732,94.7988 732,94.7988 C732,94.7988 750,94.7988 750,84.7988 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="684" y="882.4492">Central Store</text><path d="M714,895.4023 C714,885.4023 732,885.4023 732,885.4023 C732,885.4023 750,885.4023 750,895.4023 L750,921.4023 C750,931.4023 732,931.4023 732,931.4023 C732,931.4023 714,931.4023 714,921.4023 L714,895.4023 " fill="#FEFECE" filter="url(#f1n2mh3e6qqy1n)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M714,895.4023 C714,905.4023 732,905.4023 732,905.4023 C732,905.4023 750,905.4023 750,895.4023 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="690.627" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="80" y="147.2871"/><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="645.0059" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="341" y="192.9082"/><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="244.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="588" y="237.5293"/><rect fill="#FFFFFF" filter="url(#f1n2mh3e6qqy1n)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="727" y="266.8398"/><path d="M13,154.2871 L246,154.2871 L246,161.2871 L236,171.2871 L13,171.2871 L13,154.2871 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="698.627" style="stroke: #000000; stroke-width: 2.0;" width="947" x="13" y="154.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="28" y="167.8555">Request Settlement Window</text><polygon fill="#A80036" points="329,188.9082,339,192.9082,329,196.9082,333,192.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="90" x2="335" y1="192.9082" y2="192.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="97" y="188.166">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="110" y="188.166">GET - /settlementWindows/{id}</text><polygon fill="#A80036" points="576,233.5293,586,237.5293,576,241.5293,580,237.5293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="351" x2="582" y1="237.5293" y2="237.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="358" y="225.1318">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="371" y="217.4766">Request settlementWindow by id</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="371" y="232.7871">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="448" y="232.7871">2001</text><polygon fill="#A80036" points="715,262.8398,725,266.8398,715,270.8398,719,266.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="598" x2="721" y1="266.8398" y2="266.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="605" y="262.0977">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="618" y="262.0977">Select from DB</text><polygon fill="#FFFFE0" filter="url(#f1n2mh3e6qqy1n)" points="523,309.8398,940,309.8398,950,381.8398,940,454.8398,523,454.8398,513,381.8398,523,309.8398" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="404" x="525" y="326.4082">SELECT sw.settlementWindowId, swsc.settlementWindowStateId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="385" x="553" y="341.7188">swsc.reason, sw.createdDate, swsc.createdDate changedDate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="525" y="357.0293">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="565" y="357.0293">settlementWindow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="694" y="357.0293">AS sw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="525" y="372.3398">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="557" y="372.3398">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="771" y="372.3398">AS swsc</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="287" x="525" y="387.6504">ON swsc.settlementWindowStateChangeId = (</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="541" y="402.9609">SELECT MAX(settlementWindowStateChangeId)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="541" y="418.2715">FROM</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="581" y="418.2715">settlementWindowStateChange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="541" y="433.582">WHERE settlementWindowId = {id})</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="525" y="448.8926">WHERE sw.settlementWindowId = {id}</text><polygon fill="#A80036" points="362,477.9453,352,481.9453,362,485.9453,358,481.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="356" x2="592" y1="481.9453" y2="481.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="368" y="477.2031">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="381" y="477.2031">Return data</text><path d="M23,496.9453 L85,496.9453 L85,503.9453 L75,513.9453 L23,513.9453 L23,496.9453 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="348.9688" style="stroke: #000000; stroke-width: 2.0;" width="474" x="23" y="496.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="38" y="510.5137">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="100" y="509.5801">[settlementWindow found]</text><path d="M148,519.2559 L148,636.2559 L332,636.2559 L332,529.2559 L322,519.2559 L148,519.2559 " fill="#FFFF00" filter="url(#f1n2mh3e6qqy1n)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M322,519.2559 L322,529.2559 L332,529.2559 L322,519.2559 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="154" y="536.8242">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="170" y="552.1348">"id": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="170" y="567.4453">"reason": &lt;string&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="170" y="582.7559">"state": &lt;string&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="170" y="598.0664">"createdDate": &lt;date&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="170" y="613.377">"changedDate": &lt;date&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="154" y="628.6875">}</text><polygon fill="#A80036" points="101,662.7402,91,666.7402,101,670.7402,97,666.7402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="95" x2="340" y1="666.7402" y2="666.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="107" y="661.998">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="120" y="661.998">Respond HTTP - 200 (OK)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="23" x2="497" y1="675.7402" y2="675.7402"/><path d="M356,681.7402 L356,706.7402 L483,706.7402 L483,691.7402 L473,681.7402 L356,681.7402 " fill="#D3D3D3" filter="url(#f1n2mh3e6qqy1n)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M473,681.7402 L473,691.7402 L483,691.7402 L473,681.7402 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="362" y="699.3086">Log ERROR event</text><path d="M165,721.0508 L165,807.0508 L332,807.0508 L332,731.0508 L322,721.0508 L165,721.0508 " fill="#FFFF00" filter="url(#f1n2mh3e6qqy1n)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M322,721.0508 L322,731.0508 L332,731.0508 L322,721.0508 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="171" y="738.6191">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="69" x="187" y="753.9297">"status": 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="187" y="769.2402">"code": &lt;integer&gt;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="187" y="784.5508">"message": &lt;string&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="171" y="799.8613">}</text><polygon fill="#A80036" points="96,833.9141,86,837.9141,96,841.9141,92,837.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="90" x2="345" y1="837.9141" y2="837.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="102" y="833.1719">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="115" y="833.1719">Respond HTTP - 4xx (Client error)</text><!--
@startuml
title 6.1.1. Request Settlement Window By Id (getSettlementWindowById)

autonumber

actor "Hub Employee" as OPERATOR
boundary "Settlement Service API" as SSAPI
entity "Settlement DAO" as SETTLE_DAO
database "Central Store" as DB

box "Central HUB" #lightpink
    participant OPERATOR
end box

box "Settlement Service" #lightgreen
    participant SSAPI
    participant SETTLE_DAO
end box

box "Central Services" #lightyellow
    participant DB
end box

group Request Settlement Window
    activate OPERATOR
    OPERATOR -> SSAPI: GET - /settlementWindows/{id}
    activate SSAPI
    SSAPI -> SETTLE_DAO: Request settlementWindow by id\n<color #FF0000><b>Error code:</b> 2001</color>
    activate SETTLE_DAO
    SETTLE_DAO -> DB: Select from DB
    activate DB
    hnote over DB #lightyellow
        SELECT sw.settlementWindowId, swsc.settlementWindowStateId, 
               swsc.reason, sw.createdDate, swsc.createdDate changedDate
        FROM **settlementWindow** AS sw
        JOIN **settlementWindowStateChange** AS swsc
        ON swsc.settlementWindowStateChangeId = (
            SELECT MAX(settlementWindowStateChangeId)
            FROM **settlementWindowStateChange**
            WHERE settlementWindowId = {id})
        WHERE sw.settlementWindowId = {id}
    end hnote
    deactivate DB
    SSAPI <- - SETTLE_DAO: Return data
    deactivate SETTLE_DAO

    alt settlementWindow found
        note left of SSAPI #Yellow
            {
                "id": <integer>,
                "reason": <string>,
                "state": <string>,
                "createdDate": <date>,
                "changedDate": <date>
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 200 (OK)
    else
        note right of SSAPI #lightgray
            Log ERROR event
        end note
        note left of SSAPI #yellow
            {
                "status": 0,
                "code": <integer>,
                "message": <string>
            }
        end note
        OPERATOR <- - SSAPI: Respond HTTP - 4xx (Client error)
        deactivate SSAPI
        deactivate OPERATOR
    end
end
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>